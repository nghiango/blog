<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><meta name="next-head-count" content="2"/><link rel="preload" href="/_next/static/css/1b83b19899daad40.css" as="style" crossorigin=""/><link rel="stylesheet" href="/_next/static/css/1b83b19899daad40.css" crossorigin="" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" crossorigin="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-701f6a78412d5185.js" defer="" crossorigin=""></script><script src="/_next/static/chunks/framework-de0699283ff4f1d0.js" defer="" crossorigin=""></script><script src="/_next/static/chunks/main-19399bcdf56baa52.js" defer="" crossorigin=""></script><script src="/_next/static/chunks/pages/_app-8632c6a178bb83ff.js" defer="" crossorigin=""></script><script src="/_next/static/chunks/6c86d9ce-5c3713bcd78fdc7a.js" defer="" crossorigin=""></script><script src="/_next/static/chunks/162-ae367f7794a4e1a0.js" defer="" crossorigin=""></script><script src="/_next/static/chunks/pages/guide/%5Bslug%5D-e55bca3e70a27023.js" defer="" crossorigin=""></script><script src="/_next/static/ylG0eKTBBf-wlJIinfZSJ/_buildManifest.js" defer="" crossorigin=""></script><script src="/_next/static/ylG0eKTBBf-wlJIinfZSJ/_ssgManifest.js" defer="" crossorigin=""></script></head><body><div id="__next"><div class="page__container"><div class="fixed bg-white w-full z-10" data-headlessui-state=""><div class="mx-auto px-4 sm:px-6 position-fixed"><div class="flex items-center border-b-2 border-gray-100 py-6 md:justify-start md:space-x-10"><div class="flex justify-start"><div class="relative" data-headlessui-state=""><a href="/"><span class="text-gray-500 cursor-pointer group bg-white rounded-md inline-flex items-center text-base font-medium hover:text-gray-900 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" aria-hidden="true" class="h-9 w-9 mr-2"><path stroke-linecap="round" stroke-linejoin="round" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"></path></svg> <span class="text-xl pt-1">HOME</span></span></a></div><div style="position:fixed;top:1px;left:1px;width:1px;height:0;padding:0;margin:-1px;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border-width:0;display:none"></div></div><nav class="hidden md:flex space-x-10"><div class="relative" data-headlessui-state=""><button class="text-gray-500 group bg-white rounded-md inline-flex items-center text-base font-medium hover:text-gray-900 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500" type="button" aria-expanded="false" data-headlessui-state=""><span>Devs Document</span><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true" class="text-gray-400 ml-2 h-5 w-5 group-hover:text-gray-500"><path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg></button></div></nav><div style="position:fixed;top:1px;left:1px;width:1px;height:0;padding:0;margin:-1px;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border-width:0;display:none"></div><nav class="hidden md:flex space-x-10"><div class="relative" data-headlessui-state=""><button class="text-gray-500 group bg-white rounded-md inline-flex items-center text-base font-medium hover:text-gray-900 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500" type="button" aria-expanded="false" data-headlessui-state=""><a href="/info/about-me"><span>About me</span></a></button></div></nav><div style="position:fixed;top:1px;left:1px;width:1px;height:0;padding:0;margin:-1px;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border-width:0;display:none"></div></div></div></div><div style="position:fixed;top:1px;left:1px;width:1px;height:0;padding:0;margin:-1px;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border-width:0;display:none"></div><main class="container w-100 lg:w-8/12 mx-auto flex flex-col pb-16 pt-40"><div class="card card-page"><div class="post__header"><h1 class="post__title post--padding">Custom validation without any lib</h1><div class="post__author post--padding"><p>By <span class="font-bold">Nghia Ngo</span></p><span class="text-sm">Feb 12, 2024</span></div><img class="post__image-cover" src="/images/posts/how-you-understand-nodejs/nodejs-cover.jpeg" alt="image-cover"/></div><div class="post__body post--padding"><h1>Why we need a custom validation</h1>
<p class=" code-block__paragraph">Instead of using a lib for validation, we can achieve validation by our-self. It&#x27;s not only help us to understand more
about the validation system, but also help us to have a suitable validation system for our project.</p>
<h2>Using hook</h2>
<pre><div class="code-block__block"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 448 512" class="code-block__copy-func" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M433.941 65.941l-51.882-51.882A48 48 0 0 0 348.118 0H176c-26.51 0-48 21.49-48 48v48H48c-26.51 0-48 21.49-48 48v320c0 26.51 21.49 48 48 48h224c26.51 0 48-21.49 48-48v-48h80c26.51 0 48-21.49 48-48V99.882a48 48 0 0 0-14.059-33.941zM266 464H54a6 6 0 0 1-6-6V150a6 6 0 0 1 6-6h74v224c0 26.51 21.49 48 48 48h96v42a6 6 0 0 1-6 6zm128-96H182a6 6 0 0 1-6-6V54a6 6 0 0 1 6-6h106v88c0 13.255 10.745 24 24 24h88v202a6 6 0 0 1-6 6zm6-256h-64V48h9.632c1.591 0 3.117.632 4.243 1.757l48.368 48.368a6 6 0 0 1 1.757 4.243V112z"></path></svg><pre style="text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;color:#c3cee3;background:#263238;font-family:Roboto Mono, monospace;font-size:1em;line-height:1.5em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;overflow:auto;position:relative;margin:0.5em 0;padding:1.25em 1em"><code class="language-tsx" style="text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;color:#c3cee3;background:#263238;font-family:Roboto Mono, monospace;font-size:1em;line-height:1.5em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token token" style="color:#c792ea;font-style:italic">enum</span><span> </span><span class="token token maybe-class-name">InputType</span><span> </span><span class="token token" style="color:#89ddff">{</span><span>
</span><span>    </span><span class="token token maybe-class-name">Text</span><span> </span><span class="token token" style="color:#89ddff">=</span><span> </span><span class="token token" style="color:#c3e88d">&#x27;text&#x27;</span><span class="token token" style="color:#89ddff">,</span><span>
</span><span>    </span><span class="token token known-class-name" style="color:#f2ff00">Number</span><span> </span><span class="token token" style="color:#89ddff">=</span><span> </span><span class="token token" style="color:#c3e88d">&#x27;number&#x27;</span><span class="token token" style="color:#89ddff">,</span><span>
</span><span>    </span><span class="token token maybe-class-name">Email</span><span> </span><span class="token token" style="color:#89ddff">=</span><span> </span><span class="token token" style="color:#c3e88d">&#x27;email&#x27;</span><span class="token token" style="color:#89ddff">,</span><span>
</span><span>    </span><span class="token token maybe-class-name">Password</span><span> </span><span class="token token" style="color:#89ddff">=</span><span> </span><span class="token token" style="color:#c3e88d">&#x27;password&#x27;</span><span class="token token" style="color:#89ddff">,</span><span>
</span><span>    </span><span class="token token known-class-name" style="color:#f2ff00">Date</span><span> </span><span class="token token" style="color:#89ddff">=</span><span> </span><span class="token token" style="color:#c3e88d">&#x27;date&#x27;</span><span class="token token" style="color:#89ddff">,</span><span>
</span><span></span><span class="token token" style="color:#89ddff">}</span><span>
</span>
<span></span><span class="token token" style="color:#c792ea;font-style:italic">interface</span><span> </span><span class="token token maybe-class-name" style="color:#f2ff00">IInputFieldParams</span><span> </span><span class="token token" style="color:#89ddff">{</span><span>
</span><span>    value</span><span class="token token" style="color:#89ddff">:</span><span> </span><span class="token token" style="color:#c792ea">T</span><span>
</span><span>    </span><span class="token token function-variable" style="color:#c792ea">onChange</span><span class="token token" style="color:#89ddff">:</span><span> </span><span class="token token" style="color:#89ddff">(</span><span>value</span><span class="token token" style="color:#89ddff">:</span><span> </span><span class="token token" style="color:#c792ea">T</span><span class="token token" style="color:#89ddff">)</span><span> </span><span class="token token arrow" style="color:#89ddff">=&gt;</span><span> </span><span class="token token" style="color:#c792ea;font-style:italic">void</span><span>
</span><span>    </span><span class="token token function-variable" style="color:#c792ea">validate</span><span class="token token" style="color:#89ddff">:</span><span> </span><span class="token token" style="color:#89ddff">(</span><span>value</span><span class="token token" style="color:#89ddff">:</span><span> </span><span class="token token" style="color:#c792ea">T</span><span class="token token" style="color:#89ddff">)</span><span> </span><span class="token token arrow" style="color:#89ddff">=&gt;</span><span> </span><span class="token token" style="color:#ffcb6b">string</span><span>
</span><span>    placeholder</span><span class="token token" style="color:#89ddff">?</span><span class="token token" style="color:#89ddff">:</span><span> </span><span class="token token" style="color:#ffcb6b">string</span><span>
</span><span>    label</span><span class="token token" style="color:#89ddff">?</span><span class="token token" style="color:#89ddff">:</span><span> </span><span class="token token" style="color:#ffcb6b">string</span><span>
</span><span>    type</span><span class="token token" style="color:#89ddff">?</span><span class="token token" style="color:#89ddff">:</span><span> </span><span class="token token" style="color:#ffcb6b">string</span><span>
</span><span>    required</span><span class="token token" style="color:#89ddff">?</span><span class="token token" style="color:#89ddff">:</span><span> </span><span class="token token" style="color:#ffcb6b">boolean</span><span>
</span><span>    disabled</span><span class="token token" style="color:#89ddff">?</span><span class="token token" style="color:#89ddff">:</span><span> </span><span class="token token" style="color:#ffcb6b">boolean</span><span>
</span><span>    className</span><span class="token token" style="color:#89ddff">?</span><span class="token token" style="color:#89ddff">:</span><span> </span><span class="token token" style="color:#ffcb6b">string</span><span>
</span><span>    style</span><span class="token token" style="color:#89ddff">?</span><span class="token token" style="color:#89ddff">:</span><span> </span><span class="token token maybe-class-name">React</span><span class="token token" style="color:#89ddff">.</span><span class="token token property-access maybe-class-name">CSSProperties</span><span>
</span><span></span><span class="token token" style="color:#89ddff">}</span><span>
</span>
<span></span><span class="token token" style="color:#c792ea;font-style:italic">const</span><span> useInput </span><span class="token token" style="color:#89ddff">=</span><span> </span><span class="token token" style="color:#89ddff">&lt;</span><span class="token token" style="color:#c792ea">T</span><span class="token token" style="color:#89ddff">,</span><span> </span><span class="token token" style="color:#89ddff">&gt;</span><span class="token token" style="color:#89ddff">(</span><span>params</span><span class="token token" style="color:#89ddff">:</span><span> </span><span class="token token maybe-class-name">IInputFieldParams</span><span class="token token" style="color:#89ddff">&lt;</span><span class="token token" style="color:#c792ea">T</span><span class="token token" style="color:#89ddff">&gt;</span><span class="token token" style="color:#89ddff">)</span><span> </span><span class="token token arrow" style="color:#89ddff">=&gt;</span><span> </span><span class="token token" style="color:#89ddff">{</span><span>
</span><span>    </span><span class="token token" style="color:#c792ea;font-style:italic">const</span><span> </span><span class="token token" style="color:#89ddff">[</span><span>value</span><span class="token token" style="color:#89ddff">,</span><span> setValue</span><span class="token token" style="color:#89ddff">]</span><span> </span><span class="token token" style="color:#89ddff">=</span><span> </span><span class="token token generic-function" style="color:#c792ea">useState</span><span class="token token generic-function generic" style="color:#89ddff">&lt;</span><span class="token token generic-function generic" style="color:#c792ea">T</span><span class="token token generic-function generic" style="color:#89ddff">&gt;</span><span class="token token" style="color:#89ddff">(</span><span>params</span><span class="token token" style="color:#89ddff">.</span><span class="token token property-access">value</span><span class="token token" style="color:#89ddff">)</span><span>
</span><span>    </span><span class="token token" style="color:#c792ea;font-style:italic">const</span><span> </span><span class="token token" style="color:#89ddff">[</span><span>hasError</span><span class="token token" style="color:#89ddff">,</span><span> setHasError</span><span class="token token" style="color:#89ddff">]</span><span> </span><span class="token token" style="color:#89ddff">=</span><span> </span><span class="token token generic-function" style="color:#c792ea">useState</span><span class="token token generic-function generic" style="color:#89ddff">&lt;</span><span class="token token generic-function generic" style="color:#ffcb6b">boolean</span><span class="token token generic-function generic" style="color:#89ddff">&gt;</span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#c792ea">false</span><span class="token token" style="color:#89ddff">)</span><span>
</span><span>    </span><span class="token token" style="color:#c792ea;font-style:italic">const</span><span> </span><span class="token token" style="color:#89ddff">[</span><span>helperText</span><span class="token token" style="color:#89ddff">,</span><span> setHelperText</span><span class="token token" style="color:#89ddff">]</span><span> </span><span class="token token" style="color:#89ddff">=</span><span> </span><span class="token token generic-function" style="color:#c792ea">useState</span><span class="token token generic-function generic" style="color:#89ddff">&lt;</span><span class="token token generic-function generic" style="color:#ffcb6b">string</span><span class="token token generic-function generic" style="color:#89ddff">&gt;</span><span class="token token" style="color:#89ddff">(</span><span>params</span><span class="token token" style="color:#89ddff">.</span><span class="token token property-access">helperText</span><span class="token token" style="color:#89ddff">)</span><span>
</span><span>    </span><span class="token token" style="color:#c792ea;font-style:italic">const</span><span> validationRules </span><span class="token token" style="color:#89ddff">=</span><span> </span><span class="token token" style="color:#c792ea">useMemo</span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#89ddff">)</span><span> </span><span class="token token arrow" style="color:#89ddff">=&gt;</span><span> </span><span class="token token" style="color:#89ddff">{</span><span>
</span><span>        </span><span class="token token" style="color:#c792ea;font-style:italic">const</span><span> rules </span><span class="token token" style="color:#89ddff">=</span><span> params</span><span class="token token" style="color:#89ddff">.</span><span class="token token property-access">validationRules</span><span> </span><span class="token token" style="color:#89ddff">??</span><span> </span><span class="token token" style="color:#89ddff">[</span><span class="token token" style="color:#89ddff">]</span><span class="token token" style="color:#89ddff">;</span><span>
</span><span>        </span><span class="token token control-flow" style="color:#c792ea;font-style:italic">if</span><span> </span><span class="token token" style="color:#89ddff">(</span><span>params</span><span class="token token" style="color:#89ddff">.</span><span class="token token property-access">required</span><span> </span><span class="token token" style="color:#89ddff">&amp;&amp;</span><span> </span><span class="token token" style="color:#89ddff">!</span><span>params</span><span class="token token" style="color:#89ddff">.</span><span class="token token property-access">disabled</span><span class="token token" style="color:#89ddff">)</span><span> </span><span class="token token" style="color:#89ddff">{</span><span>
</span><span>            </span><span class="token token control-flow" style="color:#c792ea;font-style:italic">return</span><span> isRequiredValidationRule</span><span class="token token" style="color:#89ddff">.</span><span class="token token method property-access" style="color:#c792ea">concat</span><span class="token token" style="color:#89ddff">(</span><span>rules</span><span class="token token" style="color:#89ddff">)</span><span class="token token" style="color:#89ddff">;</span><span>
</span><span>        </span><span class="token token" style="color:#89ddff">}</span><span> </span><span class="token token control-flow" style="color:#c792ea;font-style:italic">else</span><span> </span><span class="token token" style="color:#89ddff">{</span><span>
</span><span>            </span><span class="token token control-flow" style="color:#c792ea;font-style:italic">return</span><span> rules</span><span class="token token" style="color:#89ddff">;</span><span>
</span><span>        </span><span class="token token" style="color:#89ddff">}</span><span>
</span><span>    </span><span class="token token" style="color:#89ddff">}</span><span class="token token" style="color:#89ddff">,</span><span> </span><span class="token token" style="color:#89ddff">[</span><span>params</span><span class="token token" style="color:#89ddff">.</span><span class="token token property-access">required</span><span class="token token" style="color:#89ddff">,</span><span> params</span><span class="token token" style="color:#89ddff">.</span><span class="token token property-access">validationRules</span><span class="token token" style="color:#89ddff">,</span><span> params</span><span class="token token" style="color:#89ddff">.</span><span class="token token property-access">disabled</span><span class="token token" style="color:#89ddff">]</span><span class="token token" style="color:#89ddff">)</span><span class="token token" style="color:#89ddff">;</span><span>
</span>
<span>    </span><span class="token token" style="color:#c792ea;font-style:italic">const</span><span> </span><span class="token token function-variable" style="color:#c792ea">validateRules</span><span> </span><span class="token token" style="color:#89ddff">=</span><span> </span><span class="token token" style="color:#89ddff">(</span><span>currentValue</span><span class="token token" style="color:#89ddff">?</span><span class="token token" style="color:#89ddff">:</span><span> </span><span class="token token" style="color:#ffcb6b">any</span><span class="token token" style="color:#89ddff">)</span><span> </span><span class="token token arrow" style="color:#89ddff">=&gt;</span><span> </span><span class="token token" style="color:#89ddff">{</span><span>
</span><span>        </span><span class="token token" style="color:#c792ea;font-style:italic">const</span><span> currValue </span><span class="token token" style="color:#89ddff">=</span><span> currentValue </span><span class="token token" style="color:#89ddff">||</span><span> value</span><span class="token token" style="color:#89ddff">;</span><span>
</span><span>        </span><span class="token token control-flow" style="color:#c792ea;font-style:italic">for</span><span> </span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#c792ea;font-style:italic">const</span><span> rule </span><span class="token token" style="color:#c792ea;font-style:italic">of</span><span> validationRules</span><span class="token token" style="color:#89ddff">)</span><span> </span><span class="token token" style="color:#89ddff">{</span><span>
</span><span>            </span><span class="token token control-flow" style="color:#c792ea;font-style:italic">if</span><span> </span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#89ddff">!</span><span>rule</span><span class="token token" style="color:#89ddff">.</span><span class="token token method property-access" style="color:#c792ea">validate</span><span class="token token" style="color:#89ddff">(</span><span>currValue</span><span class="token token" style="color:#89ddff">)</span><span class="token token" style="color:#89ddff">)</span><span> </span><span class="token token" style="color:#89ddff">{</span><span>
</span><span>                </span><span class="token token" style="color:#c792ea">setHelperText</span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#c792ea">t</span><span class="token token" style="color:#89ddff">(</span><span>rule</span><span class="token token" style="color:#89ddff">.</span><span class="token token property-access">message</span><span class="token token" style="color:#89ddff">)</span><span class="token token" style="color:#89ddff">)</span><span class="token token" style="color:#89ddff">;</span><span>
</span><span>                </span><span class="token token" style="color:#c792ea">setHasError</span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#c792ea">true</span><span class="token token" style="color:#89ddff">)</span><span class="token token" style="color:#89ddff">;</span><span>
</span><span>                </span><span class="token token control-flow" style="color:#c792ea;font-style:italic">return</span><span> </span><span class="token token" style="color:#c792ea">false</span><span class="token token" style="color:#89ddff">;</span><span>
</span><span>            </span><span class="token token" style="color:#89ddff">}</span><span>
</span><span>        </span><span class="token token" style="color:#89ddff">}</span><span>
</span><span>        </span><span class="token token" style="color:#c792ea">setHelperText</span><span class="token token" style="color:#89ddff">(</span><span>params</span><span class="token token" style="color:#89ddff">.</span><span class="token token property-access">helperText</span><span class="token token" style="color:#89ddff">)</span><span class="token token" style="color:#89ddff">;</span><span>
</span><span>        </span><span class="token token" style="color:#c792ea">setHasError</span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#c792ea">false</span><span class="token token" style="color:#89ddff">)</span><span class="token token" style="color:#89ddff">;</span><span>
</span><span>        </span><span class="token token control-flow" style="color:#c792ea;font-style:italic">return</span><span> </span><span class="token token" style="color:#c792ea">true</span><span class="token token" style="color:#89ddff">;</span><span>
</span><span>    </span><span class="token token" style="color:#89ddff">}</span><span class="token token" style="color:#89ddff">;</span><span>
</span>
<span>    </span><span class="token token" style="color:#c792ea;font-style:italic">const</span><span> </span><span class="token token function-variable" style="color:#c792ea">getInputField</span><span> </span><span class="token token" style="color:#89ddff">=</span><span> </span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#89ddff">)</span><span> </span><span class="token token arrow" style="color:#89ddff">=&gt;</span><span> </span><span class="token token" style="color:#89ddff">{</span><span>
</span><span>        </span><span class="token token control-flow" style="color:#c792ea;font-style:italic">switch</span><span> </span><span class="token token" style="color:#89ddff">(</span><span>params</span><span class="token token" style="color:#89ddff">.</span><span class="token token property-access">type</span><span class="token token" style="color:#89ddff">)</span><span> </span><span class="token token" style="color:#89ddff">{</span><span>
</span><span>            </span><span class="token token" style="color:#c792ea;font-style:italic">case</span><span> </span><span class="token token maybe-class-name">InputFieldType</span><span class="token token" style="color:#89ddff">.</span><span class="token token property-access maybe-class-name">Text</span><span class="token token" style="color:#89ddff">:</span><span>
</span><span>            </span><span class="token token" style="color:#c792ea;font-style:italic">case</span><span> </span><span class="token token maybe-class-name">InputFieldType</span><span class="token token" style="color:#89ddff">.</span><span class="token token known-class-name" style="color:#f2ff00">Number</span><span class="token token" style="color:#89ddff">:</span><span>
</span><span>                </span><span class="token token control-flow" style="color:#c792ea;font-style:italic">return</span><span> </span><span class="token token" style="color:#89ddff">(</span><span>
</span><span>                    </span><span class="token token" style="color:#89ddff">&lt;</span><span class="token token" style="color:#f2ff00">Input</span><span class="token token" style="color:#f07178">
</span><span class="token token" style="color:#f07178">                        </span><span class="token token" style="color:#ffcb6b">className</span><span class="token token script language-javascript script-punctuation" style="color:#f07178">=</span><span class="token token script language-javascript" style="color:#89ddff">{</span><span class="token token script language-javascript" style="color:#f07178">params</span><span class="token token script language-javascript" style="color:#89ddff">.</span><span class="token token script language-javascript property-access" style="color:#f07178">className</span><span class="token token script language-javascript" style="color:#89ddff">}</span><span class="token token" style="color:#f07178">
</span><span class="token token" style="color:#f07178">                        </span><span class="token token" style="color:#ffcb6b">key</span><span class="token token script language-javascript script-punctuation" style="color:#f07178">=</span><span class="token token script language-javascript" style="color:#89ddff">{</span><span class="token token script language-javascript" style="color:#f07178">params</span><span class="token token script language-javascript" style="color:#89ddff">.</span><span class="token token script language-javascript property-access" style="color:#f07178">key</span><span class="token token script language-javascript" style="color:#89ddff">}</span><span class="token token" style="color:#f07178">
</span><span class="token token" style="color:#f07178">                        </span><span class="token token" style="color:#ffcb6b">label</span><span class="token token script language-javascript script-punctuation" style="color:#f07178">=</span><span class="token token script language-javascript" style="color:#89ddff">{</span><span class="token token script language-javascript" style="color:#f07178">params</span><span class="token token script language-javascript" style="color:#89ddff">.</span><span class="token token script language-javascript property-access" style="color:#f07178">label</span><span class="token token script language-javascript" style="color:#89ddff">}</span><span class="token token" style="color:#f07178">
</span><span class="token token" style="color:#f07178">                        </span><span class="token token" style="color:#ffcb6b">placeholder</span><span class="token token script language-javascript script-punctuation" style="color:#f07178">=</span><span class="token token script language-javascript" style="color:#89ddff">{</span><span class="token token script language-javascript" style="color:#f07178">params</span><span class="token token script language-javascript" style="color:#89ddff">.</span><span class="token token script language-javascript property-access" style="color:#f07178">placeholder</span><span class="token token script language-javascript" style="color:#89ddff">}</span><span class="token token" style="color:#f07178">
</span><span class="token token" style="color:#f07178">                        </span><span class="token token" style="color:#ffcb6b">popoverInfo</span><span class="token token script language-javascript script-punctuation" style="color:#f07178">=</span><span class="token token script language-javascript" style="color:#89ddff">{</span><span class="token token script language-javascript" style="color:#f07178">params</span><span class="token token script language-javascript" style="color:#89ddff">.</span><span class="token token script language-javascript property-access" style="color:#f07178">popoverInfo</span><span class="token token script language-javascript" style="color:#89ddff">}</span><span class="token token" style="color:#f07178">
</span><span class="token token" style="color:#f07178">                        </span><span class="token token" style="color:#ffcb6b">helperText</span><span class="token token script language-javascript script-punctuation" style="color:#f07178">=</span><span class="token token script language-javascript" style="color:#89ddff">{</span><span class="token token script language-javascript" style="color:#f07178">helperText</span><span class="token token script language-javascript" style="color:#89ddff">}</span><span class="token token" style="color:#f07178">
</span><span class="token token" style="color:#f07178">                        </span><span class="token token" style="color:#ffcb6b">leadingText</span><span class="token token script language-javascript script-punctuation" style="color:#f07178">=</span><span class="token token script language-javascript" style="color:#89ddff">{</span><span class="token token script language-javascript" style="color:#f07178">params</span><span class="token token script language-javascript" style="color:#89ddff">.</span><span class="token token script language-javascript property-access" style="color:#f07178">leadingText</span><span class="token token script language-javascript" style="color:#89ddff">}</span><span class="token token" style="color:#f07178">
</span><span class="token token" style="color:#f07178">                        </span><span class="token token" style="color:#ffcb6b">leadingIcon</span><span class="token token script language-javascript script-punctuation" style="color:#f07178">=</span><span class="token token script language-javascript" style="color:#89ddff">{</span><span class="token token script language-javascript" style="color:#f07178">params</span><span class="token token script language-javascript" style="color:#89ddff">.</span><span class="token token script language-javascript property-access" style="color:#f07178">leadingIcon</span><span class="token token script language-javascript" style="color:#89ddff">}</span><span class="token token" style="color:#f07178">
</span><span class="token token" style="color:#f07178">                        </span><span class="token token" style="color:#ffcb6b">value</span><span class="token token script language-javascript script-punctuation" style="color:#f07178">=</span><span class="token token script language-javascript" style="color:#89ddff">{</span><span class="token token script language-javascript" style="color:#f07178">value</span><span class="token token script language-javascript" style="color:#89ddff">}</span><span class="token token" style="color:#f07178">
</span><span class="token token" style="color:#f07178">                        </span><span class="token token" style="color:#ffcb6b">trailingText</span><span class="token token script language-javascript script-punctuation" style="color:#f07178">=</span><span class="token token script language-javascript" style="color:#89ddff">{</span><span class="token token script language-javascript" style="color:#f07178">params</span><span class="token token script language-javascript" style="color:#89ddff">.</span><span class="token token script language-javascript property-access" style="color:#f07178">trailingText</span><span class="token token script language-javascript" style="color:#89ddff">}</span><span class="token token" style="color:#f07178">
</span><span class="token token" style="color:#f07178">                        </span><span class="token token" style="color:#ffcb6b">trailingIcon</span><span class="token token script language-javascript script-punctuation" style="color:#f07178">=</span><span class="token token script language-javascript" style="color:#89ddff">{</span><span class="token token script language-javascript" style="color:#f07178">params</span><span class="token token script language-javascript" style="color:#89ddff">.</span><span class="token token script language-javascript property-access" style="color:#f07178">trailingIcon</span><span class="token token script language-javascript" style="color:#89ddff">}</span><span class="token token" style="color:#f07178">
</span><span class="token token" style="color:#f07178">                        </span><span class="token token" style="color:#ffcb6b">mandatory</span><span class="token token script language-javascript script-punctuation" style="color:#f07178">=</span><span class="token token script language-javascript" style="color:#89ddff">{</span><span class="token token script language-javascript" style="color:#f07178">params</span><span class="token token script language-javascript" style="color:#89ddff">.</span><span class="token token script language-javascript property-access" style="color:#f07178">required</span><span class="token token script language-javascript" style="color:#89ddff">}</span><span class="token token" style="color:#f07178">
</span><span class="token token" style="color:#f07178">                        </span><span class="token token" style="color:#ffcb6b">disabled</span><span class="token token script language-javascript script-punctuation" style="color:#f07178">=</span><span class="token token script language-javascript" style="color:#89ddff">{</span><span class="token token script language-javascript" style="color:#f07178">params</span><span class="token token script language-javascript" style="color:#89ddff">.</span><span class="token token script language-javascript property-access" style="color:#f07178">disabled</span><span class="token token script language-javascript" style="color:#89ddff">}</span><span class="token token" style="color:#f07178">
</span><span class="token token" style="color:#f07178">                        </span><span class="token token" style="color:#ffcb6b">errorText</span><span class="token token script language-javascript script-punctuation" style="color:#f07178">=</span><span class="token token script language-javascript" style="color:#89ddff">{</span><span class="token token script language-javascript" style="color:#f07178">helperText</span><span class="token token script language-javascript" style="color:#89ddff">}</span><span class="token token" style="color:#f07178">
</span><span class="token token" style="color:#f07178">                        </span><span class="token token" style="color:#ffcb6b">state</span><span class="token token script language-javascript script-punctuation" style="color:#f07178">=</span><span class="token token script language-javascript" style="color:#89ddff">{</span><span class="token token script language-javascript" style="color:#c792ea">getState</span><span class="token token script language-javascript" style="color:#89ddff">(</span><span class="token token script language-javascript" style="color:#89ddff">)</span><span class="token token script language-javascript" style="color:#89ddff">}</span><span class="token token" style="color:#f07178">
</span><span class="token token" style="color:#f07178">                        </span><span class="token token" style="color:#ffcb6b">onBlur</span><span class="token token script language-javascript script-punctuation" style="color:#f07178">=</span><span class="token token script language-javascript" style="color:#89ddff">{</span><span class="token token script language-javascript" style="color:#f07178">blurHandler</span><span class="token token script language-javascript" style="color:#89ddff">}</span><span class="token token" style="color:#f07178">
</span><span class="token token" style="color:#f07178">                        </span><span class="token token" style="color:#ffcb6b">type</span><span class="token token script language-javascript script-punctuation" style="color:#f07178">=</span><span class="token token script language-javascript" style="color:#89ddff">{</span><span class="token token script language-javascript" style="color:#f07178">params</span><span class="token token script language-javascript" style="color:#89ddff">.</span><span class="token token script language-javascript property-access" style="color:#f07178">type</span><span class="token token script language-javascript" style="color:#89ddff">}</span><span class="token token" style="color:#f07178">
</span><span class="token token" style="color:#f07178">                        </span><span class="token token" style="color:#ffcb6b">onInputChange</span><span class="token token script language-javascript script-punctuation" style="color:#f07178">=</span><span class="token token script language-javascript" style="color:#89ddff">{</span><span class="token token script language-javascript" style="color:#c792ea">valueChangeHandler</span><span class="token token script language-javascript" style="color:#89ddff">(</span><span class="token token script language-javascript" style="color:#f07178">params</span><span class="token token script language-javascript" style="color:#89ddff">.</span><span class="token token script language-javascript property-access" style="color:#f07178">type</span><span class="token token script language-javascript" style="color:#89ddff">)</span><span class="token token script language-javascript" style="color:#89ddff">}</span><span class="token token" style="color:#f07178">
</span><span class="token token" style="color:#f07178">                        </span><span class="token token" style="color:#ffcb6b">id</span><span class="token token script language-javascript script-punctuation" style="color:#f07178">=</span><span class="token token script language-javascript" style="color:#89ddff">{</span><span class="token token script language-javascript" style="color:#f07178">params</span><span class="token token script language-javascript" style="color:#89ddff">.</span><span class="token token script language-javascript property-access" style="color:#f07178">id</span><span class="token token script language-javascript" style="color:#89ddff">}</span><span class="token token" style="color:#f07178">
</span><span class="token token" style="color:#f07178">                    </span><span class="token token" style="color:#89ddff">/&gt;</span><span>
</span><span>                </span><span class="token token" style="color:#89ddff">)</span><span class="token token" style="color:#89ddff">;</span><span>
</span><span>            </span><span class="token token module" style="color:#c792ea;font-style:italic">default</span><span class="token token" style="color:#89ddff">:</span><span>
</span><span>                </span><span class="token token control-flow" style="color:#c792ea;font-style:italic">return</span><span> </span><span class="token token null nil" style="color:#c792ea;font-style:italic">null</span><span class="token token" style="color:#89ddff">;</span><span>
</span><span>        </span><span class="token token" style="color:#89ddff">}</span><span>
</span><span>    </span><span class="token token" style="color:#89ddff">}</span><span class="token token" style="color:#89ddff">;</span><span>
</span><span>    </span><span class="token token control-flow" style="color:#c792ea;font-style:italic">return</span><span> </span><span class="token token" style="color:#89ddff">{</span><span>
</span><span>        value</span><span class="token token" style="color:#89ddff">,</span><span>
</span><span>        setValue</span><span class="token token" style="color:#89ddff">,</span><span>
</span><span>        hasError</span><span class="token token" style="color:#89ddff">,</span><span>
</span><span>        setHasError</span><span class="token token" style="color:#89ddff">,</span><span>
</span><span>        inputField</span><span class="token token" style="color:#89ddff">:</span><span> </span><span class="token token" style="color:#c792ea">getInputField</span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#89ddff">)</span><span class="token token" style="color:#89ddff">,</span><span>
</span><span>        helperText</span><span class="token token" style="color:#89ddff">,</span><span>
</span><span>        setHelperText</span><span class="token token" style="color:#89ddff">,</span><span>
</span><span>        validateRules</span><span class="token token" style="color:#89ddff">,</span><span>
</span><span>        </span><span class="token token function-variable" style="color:#c792ea">onChange</span><span class="token token" style="color:#89ddff">:</span><span> </span><span class="token token" style="color:#89ddff">(</span><span>e</span><span class="token token" style="color:#89ddff">:</span><span> </span><span class="token token maybe-class-name">React</span><span class="token token" style="color:#89ddff">.</span><span class="token token property-access maybe-class-name">ChangeEvent</span><span class="token token" style="color:#89ddff">&lt;</span><span class="token token maybe-class-name">HTMLInputElement</span><span class="token token" style="color:#89ddff">&gt;</span><span class="token token" style="color:#89ddff">)</span><span> </span><span class="token token arrow" style="color:#89ddff">=&gt;</span><span> </span><span class="token token" style="color:#89ddff">{</span><span>
</span><span>            </span><span class="token token" style="color:#c792ea">setValue</span><span class="token token" style="color:#89ddff">(</span><span>e</span><span class="token token" style="color:#89ddff">.</span><span class="token token property-access">target</span><span class="token token" style="color:#89ddff">.</span><span class="token token property-access">value</span><span> </span><span class="token token module" style="color:#c792ea;font-style:italic">as</span><span> </span><span class="token token" style="color:#ffcb6b">any</span><span class="token token" style="color:#89ddff">)</span><span class="token token" style="color:#89ddff">;</span><span>
</span><span>            </span><span class="token token" style="color:#c792ea">validateRules</span><span class="token token" style="color:#89ddff">(</span><span>e</span><span class="token token" style="color:#89ddff">.</span><span class="token token property-access">target</span><span class="token token" style="color:#89ddff">.</span><span class="token token property-access">value</span><span class="token token" style="color:#89ddff">)</span><span class="token token" style="color:#89ddff">;</span><span>
</span><span>        </span><span class="token token" style="color:#89ddff">}</span><span class="token token" style="color:#89ddff">,</span><span>
</span><span>        </span><span class="token token function-variable" style="color:#c792ea">onBlur</span><span class="token token" style="color:#89ddff">:</span><span> </span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#89ddff">)</span><span> </span><span class="token token arrow" style="color:#89ddff">=&gt;</span><span> </span><span class="token token" style="color:#89ddff">{</span><span>
</span><span>            </span><span class="token token" style="color:#c792ea">validateRules</span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#89ddff">)</span><span class="token token" style="color:#89ddff">;</span><span>
</span><span>        </span><span class="token token" style="color:#89ddff">}</span><span class="token token" style="color:#89ddff">,</span><span>
</span><span>    </span><span class="token token" style="color:#89ddff">}</span><span class="token token" style="color:#89ddff">;</span><span>
</span><span></span><span class="token token" style="color:#89ddff">}</span><span>
</span></code></pre></div></pre></div></div></main></div></div><script id="__NEXT_DATA__" type="application/json" crossorigin="">{"props":{"pageProps":{"frontmatter":{"title":"Custom validation without any lib","date":"Feb 12, 2024","excerpt":"In some project we don't want to use any libs for validation, but we still want to have a good validation system","tag":"reactjs","author":"Nghia Ngo","cover_image":"/images/posts/how-you-understand-nodejs/nodejs-cover.jpeg"},"slug":"custom-validation-without-any-lib","content":"# Why we need a custom validation\nInstead of using a lib for validation, we can achieve validation by our-self. It's not only help us to understand more\nabout the validation system, but also help us to have a suitable validation system for our project.\n## Using hook\n```tsx\nenum InputType {\n    Text = 'text',\n    Number = 'number',\n    Email = 'email',\n    Password = 'password',\n    Date = 'date',\n}\n\ninterface IInputFieldParams {\n    value: T\n    onChange: (value: T) =\u003e void\n    validate: (value: T) =\u003e string\n    placeholder?: string\n    label?: string\n    type?: string\n    required?: boolean\n    disabled?: boolean\n    className?: string\n    style?: React.CSSProperties\n}\n\nconst useInput = \u003cT, \u003e(params: IInputFieldParams\u003cT\u003e) =\u003e {\n    const [value, setValue] = useState\u003cT\u003e(params.value)\n    const [hasError, setHasError] = useState\u003cboolean\u003e(false)\n    const [helperText, setHelperText] = useState\u003cstring\u003e(params.helperText)\n    const validationRules = useMemo(() =\u003e {\n        const rules = params.validationRules ?? [];\n        if (params.required \u0026\u0026 !params.disabled) {\n            return isRequiredValidationRule.concat(rules);\n        } else {\n            return rules;\n        }\n    }, [params.required, params.validationRules, params.disabled]);\n\n    const validateRules = (currentValue?: any) =\u003e {\n        const currValue = currentValue || value;\n        for (const rule of validationRules) {\n            if (!rule.validate(currValue)) {\n                setHelperText(t(rule.message));\n                setHasError(true);\n                return false;\n            }\n        }\n        setHelperText(params.helperText);\n        setHasError(false);\n        return true;\n    };\n\n    const getInputField = () =\u003e {\n        switch (params.type) {\n            case InputFieldType.Text:\n            case InputFieldType.Number:\n                return (\n                    \u003cInput\n                        className={params.className}\n                        key={params.key}\n                        label={params.label}\n                        placeholder={params.placeholder}\n                        popoverInfo={params.popoverInfo}\n                        helperText={helperText}\n                        leadingText={params.leadingText}\n                        leadingIcon={params.leadingIcon}\n                        value={value}\n                        trailingText={params.trailingText}\n                        trailingIcon={params.trailingIcon}\n                        mandatory={params.required}\n                        disabled={params.disabled}\n                        errorText={helperText}\n                        state={getState()}\n                        onBlur={blurHandler}\n                        type={params.type}\n                        onInputChange={valueChangeHandler(params.type)}\n                        id={params.id}\n                    /\u003e\n                );\n            default:\n                return null;\n        }\n    };\n    return {\n        value,\n        setValue,\n        hasError,\n        setHasError,\n        inputField: getInputField(),\n        helperText,\n        setHelperText,\n        validateRules,\n        onChange: (e: React.ChangeEvent\u003cHTMLInputElement\u003e) =\u003e {\n            setValue(e.target.value as any);\n            validateRules(e.target.value);\n        },\n        onBlur: () =\u003e {\n            validateRules();\n        },\n    };\n}\n```"},"__N_SSG":true},"page":"/guide/[slug]","query":{"slug":"custom-validation-without-any-lib"},"buildId":"ylG0eKTBBf-wlJIinfZSJ","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>