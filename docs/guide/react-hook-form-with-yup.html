<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><meta name="next-head-count" content="2"/><link rel="preload" href="/_next/static/css/c8432f7fac79626d.css" as="style"/><link rel="stylesheet" href="/_next/static/css/c8432f7fac79626d.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/_next/static/chunks/webpack-ca88991350427991.js" defer=""></script><script src="/_next/static/chunks/framework-5f4595e5518b5600.js" defer=""></script><script src="/_next/static/chunks/main-6c271d0898ce07bd.js" defer=""></script><script src="/_next/static/chunks/pages/_app-435e136e6600a8d0.js" defer=""></script><script src="/_next/static/chunks/1bfc9850-3cad268fb948ae56.js" defer=""></script><script src="/_next/static/chunks/170-b8ba1c2285f66ced.js" defer=""></script><script src="/_next/static/chunks/pages/guide/%5Bslug%5D-e7f7ed578379f45e.js" defer=""></script><script src="/_next/static/vuQndhomTpM58GjcS-nI_/_buildManifest.js" defer=""></script><script src="/_next/static/vuQndhomTpM58GjcS-nI_/_ssgManifest.js" defer=""></script><script src="/_next/static/vuQndhomTpM58GjcS-nI_/_middlewareManifest.js" defer=""></script></head><body><div id="__next" data-reactroot=""><div class="page__container"><div class="fixed bg-white w-full z-10"><div class="mx-auto px-4 sm:px-6 position-fixed"><div class="flex items-center border-b-2 border-gray-100 py-6 md:justify-start md:space-x-10"><div class="flex justify-start"><div class="relative"><span class="text-gray-500 cursor-pointer group bg-white rounded-md inline-flex items-center text-base font-medium hover:text-gray-900 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true" class="h-9 w-9 mr-2"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"></path></svg> <span class="text-xl pt-1">HOME</span></span></div></div><nav class="hidden md:flex space-x-10"><div class="relative"><button class="text-gray-500 group bg-white rounded-md inline-flex items-center text-base font-medium hover:text-gray-900 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500" id="headlessui-popover-button-undefined" type="button" aria-expanded="false"><span>Devs Document</span><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true" class="text-gray-400 ml-2 h-5 w-5 group-hover:text-gray-500"><path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg></button></div></nav><nav class="hidden md:flex space-x-10"><div class="relative"><button class="text-gray-500 group bg-white rounded-md inline-flex items-center text-base font-medium hover:text-gray-900 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500" id="headlessui-popover-button-undefined" type="button" aria-expanded="false"><span>About me</span></button></div></nav></div></div></div><main class="container w-100 lg:w-8/12 mx-auto flex flex-col pb-16 pt-40"><div class="card card-page"><div class="post__header"><h1 class="post__title post--padding">The combination between React Hook Form and Yup</h1><div class="post__author post--padding"><p>By <span class="font-bold">Nghia Ngo</span></p><span class="text-sm">Feb 07, 2022</span></div><img class="post__image-cover" src="/images/posts/how-you-understand-nodejs/nodejs-cover.jpeg" alt="image-cover"/></div><div class="post__body post--padding"><h1>React Hook Form</h1>
<p>React Hook Form is a library to handle form in React. It&#x27;s a lightweight library and easy to use. It&#x27;s also support validation and error handling. The library is built with performance in mind, so it&#x27;s a good choice for a big project.</p>
<h1>Yup</h1>
<p>Yup is a library to handle validation. It&#x27;s a schema-based validation library. It&#x27;s easy to use and support many types of validation. It&#x27;s also support custom validation and error message.</p>
<h1>Combination</h1>
<p>Wrap a <code value="Input" class="code-block__code">Input</code> component with <code value="Controller" class="code-block__code">Controller</code> and control the value and validation through <code value="control" class="code-block__code">control</code> of <code value="useFormContext" class="code-block__code">useFormContext</code> of react-hook-form</p>
<pre><div class="code-block__block"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 448 512" class="code-block__copy-func" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M433.941 65.941l-51.882-51.882A48 48 0 0 0 348.118 0H176c-26.51 0-48 21.49-48 48v48H48c-26.51 0-48 21.49-48 48v320c0 26.51 21.49 48 48 48h224c26.51 0 48-21.49 48-48v-48h80c26.51 0 48-21.49 48-48V99.882a48 48 0 0 0-14.059-33.941zM266 464H54a6 6 0 0 1-6-6V150a6 6 0 0 1 6-6h74v224c0 26.51 21.49 48 48 48h96v42a6 6 0 0 1-6 6zm128-96H182a6 6 0 0 1-6-6V54a6 6 0 0 1 6-6h106v88c0 13.255 10.745 24 24 24h88v202a6 6 0 0 1-6 6zm6-256h-64V48h9.632c1.591 0 3.117.632 4.243 1.757l48.368 48.368a6 6 0 0 1 1.757 4.243V112z"></path></svg><pre style="text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;color:#c3cee3;background:#263238;font-family:Roboto Mono, monospace;font-size:1em;line-height:1.5em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;overflow:auto;position:relative;margin:0.5em 0;padding:1.25em 1em"><code class="language-tsx" style="text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;color:#c3cee3;background:#263238;font-family:Roboto Mono, monospace;font-size:1em;line-height:1.5em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token token module" style="color:#c792ea;font-style:italic">import</span><span> </span><span class="token token imports" style="color:#89ddff">{</span><span class="token token imports"> useFormContext </span><span class="token token imports" style="color:#89ddff">}</span><span> </span><span class="token token module" style="color:#c792ea;font-style:italic">from</span><span> </span><span class="token token" style="color:#c3e88d">&#x27;react-hook-form&#x27;</span><span class="token token" style="color:#89ddff">;</span><span>
</span>
<span></span><span class="token token" style="color:#c792ea;font-style:italic">interface</span><span> </span><span class="token token maybe-class-name" style="color:#f2ff00">IProps</span><span> </span><span class="token token" style="color:#89ddff">{</span><span>
</span><span>    name</span><span class="token token" style="color:#89ddff">:</span><span> </span><span class="token token" style="color:#ffcb6b">string</span><span class="token token" style="color:#89ddff">;</span><span>
</span><span></span><span class="token token" style="color:#89ddff">}</span><span>
</span><span></span><span class="token token" style="color:#c792ea;font-style:italic">const</span><span> </span><span class="token token function-variable maybe-class-name" style="color:#c792ea">InputForm</span><span> </span><span class="token token" style="color:#89ddff">=</span><span> </span><span class="token token" style="color:#89ddff">(</span><span>props</span><span class="token token" style="color:#89ddff">:</span><span> </span><span class="token token maybe-class-name">IProps</span><span class="token token" style="color:#89ddff">)</span><span> </span><span class="token token arrow" style="color:#89ddff">=&gt;</span><span> </span><span class="token token" style="color:#89ddff">{</span><span>
</span><span>    </span><span class="token token" style="color:#c792ea;font-style:italic">const</span><span> </span><span class="token token" style="color:#89ddff">{</span><span> control </span><span class="token token" style="color:#89ddff">}</span><span> </span><span class="token token" style="color:#89ddff">=</span><span> </span><span class="token token" style="color:#c792ea">useFormContext</span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#89ddff">)</span><span class="token token" style="color:#89ddff">;</span><span>
</span>    
<span>    </span><span class="token token control-flow" style="color:#c792ea;font-style:italic">return</span><span> </span><span class="token token" style="color:#89ddff">(</span><span>
</span><span>        </span><span class="token token" style="color:#89ddff">&lt;</span><span class="token token" style="color:#f2ff00">Controller</span><span class="token token" style="color:#f07178">
</span><span class="token token" style="color:#f07178">            </span><span class="token token" style="color:#ffcb6b">name</span><span class="token token script language-javascript script-punctuation" style="color:#f07178">=</span><span class="token token script language-javascript" style="color:#89ddff">{</span><span class="token token script language-javascript" style="color:#f07178">props</span><span class="token token script language-javascript" style="color:#89ddff">.</span><span class="token token script language-javascript property-access" style="color:#f07178">name</span><span class="token token script language-javascript" style="color:#89ddff">}</span><span class="token token" style="color:#f07178">
</span><span class="token token" style="color:#f07178">            </span><span class="token token" style="color:#ffcb6b">control</span><span class="token token script language-javascript script-punctuation" style="color:#f07178">=</span><span class="token token script language-javascript" style="color:#89ddff">{</span><span class="token token script language-javascript" style="color:#f07178">control</span><span class="token token script language-javascript" style="color:#89ddff">}</span><span class="token token" style="color:#f07178">
</span><span class="token token" style="color:#f07178">            </span><span class="token token" style="color:#ffcb6b">render</span><span class="token token script language-javascript script-punctuation" style="color:#f07178">=</span><span class="token token script language-javascript" style="color:#89ddff">{</span><span class="token token script language-javascript" style="color:#89ddff">(</span><span class="token token script language-javascript" style="color:#89ddff">{</span><span class="token token script language-javascript" style="color:#f07178"> field </span><span class="token token script language-javascript" style="color:#89ddff">}</span><span class="token token script language-javascript" style="color:#89ddff">)</span><span class="token token script language-javascript" style="color:#f07178"> </span><span class="token token script language-javascript arrow" style="color:#f07178">=&gt;</span><span class="token token script language-javascript" style="color:#f07178"> </span><span class="token token script language-javascript" style="color:#89ddff">(</span><span class="token token script language-javascript" style="color:#f07178">
</span><span class="token token script language-javascript" style="color:#f07178">                </span><span class="token token script language-javascript" style="color:#89ddff">&lt;</span><span class="token token script language-javascript" style="color:#f2ff00">Input</span><span class="token token script language-javascript" style="color:#f07178">
</span><span class="token token script language-javascript" style="color:#f07178">                    </span><span class="token token script language-javascript" style="color:#ffcb6b">value</span><span class="token token script language-javascript script-punctuation" style="color:#f07178">=</span><span class="token token script language-javascript" style="color:#89ddff">{</span><span class="token token script language-javascript" style="color:#f07178">field</span><span class="token token script language-javascript" style="color:#89ddff">.</span><span class="token token script language-javascript property-access" style="color:#f07178">value</span><span class="token token script language-javascript" style="color:#89ddff">}</span><span class="token token script language-javascript" style="color:#f07178">
</span><span class="token token script language-javascript" style="color:#f07178">                    </span><span class="token token script language-javascript" style="color:#ffcb6b">onChange</span><span class="token token script language-javascript script-punctuation" style="color:#f07178">=</span><span class="token token script language-javascript" style="color:#89ddff">{</span><span class="token token script language-javascript" style="color:#f07178">field</span><span class="token token script language-javascript" style="color:#89ddff">.</span><span class="token token script language-javascript property-access" style="color:#f07178">onChange</span><span class="token token script language-javascript" style="color:#89ddff">}</span><span class="token token script language-javascript" style="color:#f07178">
</span><span class="token token script language-javascript" style="color:#f07178">                    </span><span class="token token script language-javascript spread" style="color:#f07178">{</span><span class="token token script language-javascript spread" style="color:#f07178">...</span><span class="token token script language-javascript spread" style="color:#f07178">props</span><span class="token token script language-javascript spread" style="color:#f07178">}</span><span class="token token script language-javascript" style="color:#f07178">
</span><span class="token token script language-javascript" style="color:#f07178">                </span><span class="token token script language-javascript" style="color:#89ddff">/&gt;</span><span class="token token script language-javascript" style="color:#f07178">
</span><span class="token token script language-javascript" style="color:#f07178">            </span><span class="token token script language-javascript" style="color:#89ddff">)</span><span class="token token script language-javascript" style="color:#89ddff">}</span><span class="token token" style="color:#f07178">
</span><span class="token token" style="color:#f07178">        </span><span class="token token" style="color:#89ddff">/&gt;</span><span>
</span><span>    </span><span class="token token" style="color:#89ddff">)</span><span class="token token" style="color:#89ddff">;</span><span>
</span><span></span><span class="token token" style="color:#89ddff">}</span><span>
</span></code></pre></div></pre>
<p>To custom label and error message style, we can wrap <code value="InputForm" class="code-block__code">InputForm</code> with <code value="FromWrapper" class="code-block__code">FromWrapper</code>.</p>
<pre><div class="code-block__block"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 448 512" class="code-block__copy-func" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M433.941 65.941l-51.882-51.882A48 48 0 0 0 348.118 0H176c-26.51 0-48 21.49-48 48v48H48c-26.51 0-48 21.49-48 48v320c0 26.51 21.49 48 48 48h224c26.51 0 48-21.49 48-48v-48h80c26.51 0 48-21.49 48-48V99.882a48 48 0 0 0-14.059-33.941zM266 464H54a6 6 0 0 1-6-6V150a6 6 0 0 1 6-6h74v224c0 26.51 21.49 48 48 48h96v42a6 6 0 0 1-6 6zm128-96H182a6 6 0 0 1-6-6V54a6 6 0 0 1 6-6h106v88c0 13.255 10.745 24 24 24h88v202a6 6 0 0 1-6 6zm6-256h-64V48h9.632c1.591 0 3.117.632 4.243 1.757l48.368 48.368a6 6 0 0 1 1.757 4.243V112z"></path></svg><pre style="text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;color:#c3cee3;background:#263238;font-family:Roboto Mono, monospace;font-size:1em;line-height:1.5em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;overflow:auto;position:relative;margin:0.5em 0;padding:1.25em 1em"><code class="language-tsx" style="text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;color:#c3cee3;background:#263238;font-family:Roboto Mono, monospace;font-size:1em;line-height:1.5em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token token module" style="color:#c792ea;font-style:italic">import</span><span> </span><span class="token token imports" style="color:#89ddff">{</span><span class="token token imports"> useFormContext </span><span class="token token imports" style="color:#89ddff">}</span><span> </span><span class="token token module" style="color:#c792ea;font-style:italic">from</span><span> </span><span class="token token" style="color:#c3e88d">&#x27;react-hook-form&#x27;</span><span class="token token" style="color:#89ddff">;</span><span>
</span>
<span></span><span class="token token" style="color:#c792ea;font-style:italic">interface</span><span> </span><span class="token token maybe-class-name" style="color:#f2ff00">IProps</span><span> </span><span class="token token" style="color:#89ddff">{</span><span>
</span><span>    name</span><span class="token token" style="color:#89ddff">:</span><span> </span><span class="token token" style="color:#ffcb6b">string</span><span class="token token" style="color:#89ddff">;</span><span>
</span><span>    label</span><span class="token token" style="color:#89ddff">:</span><span> </span><span class="token token" style="color:#ffcb6b">string</span><span class="token token" style="color:#89ddff">;</span><span>
</span><span>    children</span><span class="token token" style="color:#89ddff">:</span><span> </span><span class="token token maybe-class-name">React</span><span class="token token" style="color:#89ddff">.</span><span class="token token property-access maybe-class-name">JSXElement</span><span class="token token" style="color:#89ddff">;</span><span>
</span><span></span><span class="token token" style="color:#89ddff">}</span><span>
</span>
<span></span><span class="token token" style="color:#c792ea;font-style:italic">const</span><span> </span><span class="token token function-variable maybe-class-name" style="color:#c792ea">FormWrapper</span><span> </span><span class="token token" style="color:#89ddff">=</span><span> </span><span class="token token" style="color:#89ddff">(</span><span>props</span><span class="token token" style="color:#89ddff">:</span><span> </span><span class="token token maybe-class-name">IProps</span><span class="token token" style="color:#89ddff">)</span><span> </span><span class="token token arrow" style="color:#89ddff">=&gt;</span><span> </span><span class="token token" style="color:#89ddff">{</span><span>
</span><span>    </span><span class="token token" style="color:#c792ea;font-style:italic">const</span><span> </span><span class="token token" style="color:#89ddff">{</span><span> formState </span><span class="token token" style="color:#89ddff">}</span><span> </span><span class="token token" style="color:#89ddff">=</span><span> </span><span class="token token" style="color:#c792ea">useFormContext</span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#89ddff">)</span><span class="token token" style="color:#89ddff">;</span><span>
</span><span>    </span><span class="token token control-flow" style="color:#c792ea;font-style:italic">return</span><span> </span><span class="token token" style="color:#89ddff">(</span><span>
</span><span>        </span><span class="token token" style="color:#89ddff">&lt;</span><span class="token token" style="color:#89ddff">&gt;</span><span class="token token plain-text">
</span><span class="token token plain-text">            </span><span class="token token" style="color:#89ddff">&lt;</span><span class="token token" style="color:#f07178">label</span><span class="token token" style="color:#89ddff">&gt;</span><span class="token token" style="color:#89ddff">{</span><span>props</span><span class="token token" style="color:#89ddff">.</span><span class="token token property-access">label</span><span class="token token" style="color:#89ddff">}</span><span class="token token" style="color:#89ddff">&lt;/</span><span class="token token" style="color:#f07178">label</span><span class="token token" style="color:#89ddff">&gt;</span><span class="token token plain-text">
</span><span class="token token plain-text">            </span><span class="token token" style="color:#89ddff">{</span><span>children</span><span class="token token" style="color:#89ddff">}</span><span class="token token plain-text">
</span><span class="token token plain-text">            </span><span class="token token" style="color:#89ddff">&lt;</span><span class="token token" style="color:#f2ff00">Text</span><span class="token token" style="color:#f07178"> </span><span class="token token" style="color:#ffcb6b">type</span><span class="token token attr-equals" style="color:#89ddff">=</span><span class="token token" style="color:#89ddff">&quot;</span><span class="token token" style="color:#c3e88d">danger</span><span class="token token" style="color:#89ddff">&quot;</span><span class="token token" style="color:#89ddff">&gt;</span><span class="token token plain-text">Error: </span><span class="token token" style="color:#89ddff">{</span><span>formState</span><span class="token token" style="color:#89ddff">.</span><span class="token token property-access">errors</span><span class="token token" style="color:#89ddff">[</span><span>props</span><span class="token token" style="color:#89ddff">.</span><span class="token token property-access">name</span><span class="token token" style="color:#89ddff">]</span><span class="token token" style="color:#89ddff">?.</span><span>message</span><span class="token token" style="color:#89ddff">}</span><span class="token token" style="color:#89ddff">&lt;/</span><span class="token token" style="color:#f2ff00">Text</span><span class="token token" style="color:#89ddff">&gt;</span><span class="token token plain-text">
</span><span class="token token plain-text">        </span><span class="token token" style="color:#89ddff">&lt;/</span><span class="token token" style="color:#89ddff">&gt;</span><span>
</span><span>    </span><span class="token token" style="color:#89ddff">)</span><span class="token token" style="color:#89ddff">;</span><span>
</span><span></span><span class="token token" style="color:#89ddff">}</span><span>
</span></code></pre></div></pre>
<p>In the main page we need to define the Yup schema and pass it to resolver of <code value="useForm" class="code-block__code">useForm</code> to validate the form</p>
<pre><div class="code-block__block"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 448 512" class="code-block__copy-func" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M433.941 65.941l-51.882-51.882A48 48 0 0 0 348.118 0H176c-26.51 0-48 21.49-48 48v48H48c-26.51 0-48 21.49-48 48v320c0 26.51 21.49 48 48 48h224c26.51 0 48-21.49 48-48v-48h80c26.51 0 48-21.49 48-48V99.882a48 48 0 0 0-14.059-33.941zM266 464H54a6 6 0 0 1-6-6V150a6 6 0 0 1 6-6h74v224c0 26.51 21.49 48 48 48h96v42a6 6 0 0 1-6 6zm128-96H182a6 6 0 0 1-6-6V54a6 6 0 0 1 6-6h106v88c0 13.255 10.745 24 24 24h88v202a6 6 0 0 1-6 6zm6-256h-64V48h9.632c1.591 0 3.117.632 4.243 1.757l48.368 48.368a6 6 0 0 1 1.757 4.243V112z"></path></svg><pre style="text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;color:#c3cee3;background:#263238;font-family:Roboto Mono, monospace;font-size:1em;line-height:1.5em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;overflow:auto;position:relative;margin:0.5em 0;padding:1.25em 1em"><code class="language-tsx" style="text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;color:#c3cee3;background:#263238;font-family:Roboto Mono, monospace;font-size:1em;line-height:1.5em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token token module" style="color:#c792ea;font-style:italic">import</span><span> </span><span class="token token imports" style="color:#89ddff">{</span><span class="token token imports"> </span><span class="token token imports maybe-class-name">FormProvider</span><span class="token token imports" style="color:#89ddff">,</span><span class="token token imports"> useForm </span><span class="token token imports" style="color:#89ddff">}</span><span> </span><span class="token token module" style="color:#c792ea;font-style:italic">from</span><span> </span><span class="token token" style="color:#c3e88d">&#x27;react-hook-form&#x27;</span><span class="token token" style="color:#89ddff">;</span><span>
</span><span></span><span class="token token module" style="color:#c792ea;font-style:italic">import</span><span> </span><span class="token token imports" style="color:#89ddff">{</span><span class="token token imports"> yupResolver </span><span class="token token imports" style="color:#89ddff">}</span><span> </span><span class="token token module" style="color:#c792ea;font-style:italic">from</span><span> </span><span class="token token" style="color:#c3e88d">&#x27;@hookform/resolvers/yup&#x27;</span><span class="token token" style="color:#89ddff">;</span><span>
</span>
<span></span><span class="token token" style="color:#c792ea;font-style:italic">interface</span><span> </span><span class="token token maybe-class-name" style="color:#f2ff00">IFormValues</span><span> </span><span class="token token" style="color:#89ddff">{</span><span>
</span><span>    firstName</span><span class="token token" style="color:#89ddff">:</span><span> </span><span class="token token" style="color:#ffcb6b">string</span><span class="token token" style="color:#89ddff">;</span><span>
</span><span></span><span class="token token" style="color:#89ddff">}</span><span>
</span>
<span></span><span class="token token" style="color:#c792ea;font-style:italic">const</span><span> </span><span class="token token function-variable maybe-class-name" style="color:#c792ea">MainPage</span><span> </span><span class="token token" style="color:#89ddff">=</span><span> </span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#89ddff">)</span><span> </span><span class="token token arrow" style="color:#89ddff">=&gt;</span><span> </span><span class="token token" style="color:#89ddff">{</span><span>
</span><span>    </span><span class="token token" style="color:#c792ea;font-style:italic">const</span><span> </span><span class="token token function-variable" style="color:#c792ea">schema</span><span> </span><span class="token token" style="color:#89ddff">=</span><span> </span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#89ddff">)</span><span> </span><span class="token token arrow" style="color:#89ddff">=&gt;</span><span> </span><span class="token token" style="color:#89ddff">{</span><span>
</span><span>        </span><span class="token token" style="color:#c792ea">object</span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#89ddff">{</span><span>
</span><span>            firstName</span><span class="token token" style="color:#89ddff">:</span><span> </span><span class="token token" style="color:#c792ea">string</span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#89ddff">)</span><span class="token token" style="color:#89ddff">.</span><span class="token token method property-access" style="color:#c792ea">required</span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#c3e88d">&#x27;First name is required&#x27;</span><span class="token token" style="color:#89ddff">)</span><span class="token token" style="color:#89ddff">,</span><span>
</span><span>        </span><span class="token token" style="color:#89ddff">}</span><span class="token token" style="color:#89ddff">)</span><span>
</span><span>    </span><span class="token token" style="color:#89ddff">}</span><span>
</span>
<span>    </span><span class="token token" style="color:#c792ea;font-style:italic">const</span><span> methods </span><span class="token token" style="color:#89ddff">=</span><span> </span><span class="token token generic-function" style="color:#c792ea">useForm</span><span class="token token generic-function generic" style="color:#89ddff">&lt;</span><span class="token token generic-function generic maybe-class-name" style="color:#f2ff00">IFormValues</span><span class="token token generic-function generic" style="color:#89ddff">&gt;</span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#89ddff">{</span><span>
</span><span>        resolver</span><span class="token token" style="color:#89ddff">:</span><span> </span><span class="token token" style="color:#c792ea">yupResolver</span><span class="token token" style="color:#89ddff">(</span><span>schema</span><span class="token token" style="color:#89ddff">)</span><span class="token token" style="color:#89ddff">,</span><span>
</span><span>        defaultValues</span><span class="token token" style="color:#89ddff">:</span><span> </span><span class="token token" style="color:#89ddff">{</span><span>
</span><span>            firstName</span><span class="token token" style="color:#89ddff">:</span><span> </span><span class="token token" style="color:#c3e88d">&#x27;&#x27;</span><span class="token token" style="color:#89ddff">,</span><span>
</span><span>        </span><span class="token token" style="color:#89ddff">}</span><span>
</span><span>    </span><span class="token token" style="color:#89ddff">}</span><span class="token token" style="color:#89ddff">)</span><span class="token token" style="color:#89ddff">;</span><span>
</span>
<span>    </span><span class="token token" style="color:#c792ea;font-style:italic">const</span><span> </span><span class="token token function-variable" style="color:#c792ea">onSubmit</span><span> </span><span class="token token" style="color:#89ddff">=</span><span> </span><span class="token token" style="color:#89ddff">(</span><span>value</span><span class="token token" style="color:#89ddff">:</span><span> </span><span class="token token maybe-class-name">IFormValues</span><span class="token token" style="color:#89ddff">)</span><span> </span><span class="token token arrow" style="color:#89ddff">=&gt;</span><span> </span><span class="token token" style="color:#89ddff">{</span><span>
</span><span>    </span><span class="token token" style="color:#89ddff">}</span><span class="token token" style="color:#89ddff">;</span><span>
</span>
<span>    </span><span class="token token control-flow" style="color:#c792ea;font-style:italic">return</span><span> </span><span class="token token" style="color:#89ddff">(</span><span>
</span><span>        </span><span class="token token" style="color:#89ddff">&lt;</span><span class="token token" style="color:#f2ff00">FormProvider</span><span class="token token" style="color:#f07178"> </span><span class="token token spread" style="color:#89ddff">{</span><span class="token token spread" style="color:#89ddff">...</span><span class="token token spread" style="color:#f07178">methods</span><span class="token token spread" style="color:#89ddff">}</span><span class="token token" style="color:#89ddff">&gt;</span><span class="token token plain-text">
</span><span class="token token plain-text">            </span><span class="token token" style="color:#89ddff">&lt;</span><span class="token token" style="color:#f07178">form</span><span class="token token" style="color:#f07178"> </span><span class="token token" style="color:#ffcb6b">onSubmit</span><span class="token token script language-javascript script-punctuation" style="color:#f07178">=</span><span class="token token script language-javascript" style="color:#89ddff">{</span><span class="token token script language-javascript" style="color:#f07178">methods</span><span class="token token script language-javascript" style="color:#89ddff">.</span><span class="token token script language-javascript method property-access" style="color:#f07178">handleSubmit</span><span class="token token script language-javascript" style="color:#89ddff">(</span><span class="token token script language-javascript" style="color:#f07178">onSubmit</span><span class="token token script language-javascript" style="color:#89ddff">)</span><span class="token token script language-javascript" style="color:#89ddff">}</span><span class="token token" style="color:#89ddff">&gt;</span><span class="token token plain-text">
</span><span class="token token plain-text">                </span><span class="token token" style="color:#89ddff">&lt;</span><span class="token token" style="color:#f2ff00">FormWrapper</span><span class="token token" style="color:#f07178"> </span><span class="token token" style="color:#ffcb6b">name</span><span class="token token attr-equals" style="color:#89ddff">=</span><span class="token token" style="color:#89ddff">&quot;</span><span class="token token" style="color:#c3e88d">firstName</span><span class="token token" style="color:#89ddff">&quot;</span><span class="token token" style="color:#f07178"> </span><span class="token token" style="color:#ffcb6b">label</span><span class="token token attr-equals" style="color:#89ddff">=</span><span class="token token" style="color:#89ddff">&quot;</span><span class="token token" style="color:#c3e88d">First name</span><span class="token token" style="color:#89ddff">&quot;</span><span class="token token" style="color:#89ddff">&gt;</span><span class="token token plain-text">
</span><span class="token token plain-text">                    </span><span class="token token" style="color:#89ddff">&lt;</span><span class="token token" style="color:#f2ff00">InputForm</span><span class="token token" style="color:#f07178"> </span><span class="token token" style="color:#ffcb6b">name</span><span class="token token attr-equals" style="color:#89ddff">=</span><span class="token token" style="color:#89ddff">&quot;</span><span class="token token" style="color:#c3e88d">firstName</span><span class="token token" style="color:#89ddff">&quot;</span><span class="token token" style="color:#89ddff">/&gt;</span><span class="token token plain-text">
</span><span class="token token plain-text">                </span><span class="token token" style="color:#89ddff">&lt;/</span><span class="token token" style="color:#f2ff00">FormWrapper</span><span class="token token" style="color:#89ddff">&gt;</span><span class="token token plain-text">
</span><span class="token token plain-text">                </span><span class="token token" style="color:#89ddff">&lt;</span><span class="token token" style="color:#f2ff00">Button</span><span class="token token" style="color:#f07178"> </span><span class="token token" style="color:#ffcb6b">onClick</span><span class="token token script language-javascript script-punctuation" style="color:#f07178">=</span><span class="token token script language-javascript" style="color:#89ddff">{</span><span class="token token script language-javascript" style="color:#f07178">methods</span><span class="token token script language-javascript" style="color:#89ddff">.</span><span class="token token script language-javascript method property-access" style="color:#f07178">handleSubmit</span><span class="token token script language-javascript" style="color:#89ddff">(</span><span class="token token script language-javascript" style="color:#f07178">onSubmit</span><span class="token token script language-javascript" style="color:#89ddff">)</span><span class="token token script language-javascript" style="color:#89ddff">}</span><span class="token token" style="color:#89ddff">&gt;</span><span class="token token plain-text">Submit</span><span class="token token" style="color:#89ddff">&lt;/</span><span class="token token" style="color:#f2ff00">Button</span><span class="token token" style="color:#89ddff">&gt;</span><span class="token token plain-text">
</span><span class="token token plain-text">            </span><span class="token token" style="color:#89ddff">&lt;/</span><span class="token token" style="color:#f07178">form</span><span class="token token" style="color:#89ddff">&gt;</span><span class="token token plain-text">
</span><span class="token token plain-text">        </span><span class="token token" style="color:#89ddff">&lt;/</span><span class="token token" style="color:#f2ff00">FormProvider</span><span class="token token" style="color:#89ddff">&gt;</span><span>
</span><span>    </span><span class="token token" style="color:#89ddff">)</span><span class="token token" style="color:#89ddff">;</span><span>
</span><span></span><span class="token token" style="color:#89ddff">}</span><span>
</span></code></pre></div></pre></div></div></main></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"frontmatter":{"title":"The combination between React Hook Form and Yup","date":"Feb 07, 2022","excerpt":"Guide to use React Hook Form with Yup","tag":"reactjs","author":"Nghia Ngo","cover_image":"/images/posts/how-you-understand-nodejs/nodejs-cover.jpeg"},"slug":"react-hook-form-with-yup","content":"# React Hook Form\nReact Hook Form is a library to handle form in React. It's a lightweight library and easy to use. It's also support validation and error handling. The library is built with performance in mind, so it's a good choice for a big project.\n# Yup\nYup is a library to handle validation. It's a schema-based validation library. It's easy to use and support many types of validation. It's also support custom validation and error message.\n# Combination\nWrap a `Input` component with `Controller` and control the value and validation through `control` of `useFormContext` of react-hook-form\n\n```tsx\nimport { useFormContext } from 'react-hook-form';\n\ninterface IProps {\n    name: string;\n}\nconst InputForm = (props: IProps) =\u003e {\n    const { control } = useFormContext();\n    \n    return (\n        \u003cController\n            name={props.name}\n            control={control}\n            render={({ field }) =\u003e (\n                \u003cInput\n                    value={field.value}\n                    onChange={field.onChange}\n                    {...props}\n                /\u003e\n            )}\n        /\u003e\n    );\n}\n```\n\nTo custom label and error message style, we can wrap `InputForm` with `FromWrapper`.\n\n```tsx\nimport { useFormContext } from 'react-hook-form';\n\ninterface IProps {\n    name: string;\n    label: string;\n    children: React.JSXElement;\n}\n\nconst FormWrapper = (props: IProps) =\u003e {\n    const { formState } = useFormContext();\n    return (\n        \u003c\u003e\n            \u003clabel\u003e{props.label}\u003c/label\u003e\n            {children}\n            \u003cText type=\"danger\"\u003eError: {formState.errors[props.name]?.message}\u003c/Text\u003e\n        \u003c/\u003e\n    );\n}\n```\n\nIn the main page we need to define the Yup schema and pass it to resolver of `useForm` to validate the form\n\n```tsx\nimport { FormProvider, useForm } from 'react-hook-form';\nimport { yupResolver } from '@hookform/resolvers/yup';\n\ninterface IFormValues {\n    firstName: string;\n}\n\nconst MainPage = () =\u003e {\n    const schema = () =\u003e {\n        object({\n            firstName: string().required('First name is required'),\n        })\n    }\n\n    const methods = useForm\u003cIFormValues\u003e({\n        resolver: yupResolver(schema),\n        defaultValues: {\n            firstName: '',\n        }\n    });\n\n    const onSubmit = (value: IFormValues) =\u003e {\n    };\n\n    return (\n        \u003cFormProvider {...methods}\u003e\n            \u003cform onSubmit={methods.handleSubmit(onSubmit)}\u003e\n                \u003cFormWrapper name=\"firstName\" label=\"First name\"\u003e\n                    \u003cInputForm name=\"firstName\"/\u003e\n                \u003c/FormWrapper\u003e\n                \u003cButton onClick={methods.handleSubmit(onSubmit)}\u003eSubmit\u003c/Button\u003e\n            \u003c/form\u003e\n        \u003c/FormProvider\u003e\n    );\n}\n```\n"},"__N_SSG":true},"page":"/guide/[slug]","query":{"slug":"react-hook-form-with-yup"},"buildId":"vuQndhomTpM58GjcS-nI_","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>