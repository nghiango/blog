<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><meta name="next-head-count" content="2"/><link rel="preload" href="/_next/static/css/1b83b19899daad40.css" as="style" crossorigin=""/><link rel="stylesheet" href="/_next/static/css/1b83b19899daad40.css" crossorigin="" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" crossorigin="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-701f6a78412d5185.js" defer="" crossorigin=""></script><script src="/_next/static/chunks/framework-de0699283ff4f1d0.js" defer="" crossorigin=""></script><script src="/_next/static/chunks/main-19399bcdf56baa52.js" defer="" crossorigin=""></script><script src="/_next/static/chunks/pages/_app-8632c6a178bb83ff.js" defer="" crossorigin=""></script><script src="/_next/static/chunks/6c86d9ce-5c3713bcd78fdc7a.js" defer="" crossorigin=""></script><script src="/_next/static/chunks/162-ae367f7794a4e1a0.js" defer="" crossorigin=""></script><script src="/_next/static/chunks/pages/guide/%5Bslug%5D-e55bca3e70a27023.js" defer="" crossorigin=""></script><script src="/_next/static/ylG0eKTBBf-wlJIinfZSJ/_buildManifest.js" defer="" crossorigin=""></script><script src="/_next/static/ylG0eKTBBf-wlJIinfZSJ/_ssgManifest.js" defer="" crossorigin=""></script></head><body><div id="__next"><div class="page__container"><div class="fixed bg-white w-full z-10" data-headlessui-state=""><div class="mx-auto px-4 sm:px-6 position-fixed"><div class="flex items-center border-b-2 border-gray-100 py-6 md:justify-start md:space-x-10"><div class="flex justify-start"><div class="relative" data-headlessui-state=""><a href="/"><span class="text-gray-500 cursor-pointer group bg-white rounded-md inline-flex items-center text-base font-medium hover:text-gray-900 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" aria-hidden="true" class="h-9 w-9 mr-2"><path stroke-linecap="round" stroke-linejoin="round" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"></path></svg> <span class="text-xl pt-1">HOME</span></span></a></div><div style="position:fixed;top:1px;left:1px;width:1px;height:0;padding:0;margin:-1px;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border-width:0;display:none"></div></div><nav class="hidden md:flex space-x-10"><div class="relative" data-headlessui-state=""><button class="text-gray-500 group bg-white rounded-md inline-flex items-center text-base font-medium hover:text-gray-900 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500" type="button" aria-expanded="false" data-headlessui-state=""><span>Devs Document</span><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true" class="text-gray-400 ml-2 h-5 w-5 group-hover:text-gray-500"><path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg></button></div></nav><div style="position:fixed;top:1px;left:1px;width:1px;height:0;padding:0;margin:-1px;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border-width:0;display:none"></div><nav class="hidden md:flex space-x-10"><div class="relative" data-headlessui-state=""><button class="text-gray-500 group bg-white rounded-md inline-flex items-center text-base font-medium hover:text-gray-900 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500" type="button" aria-expanded="false" data-headlessui-state=""><a href="/info/about-me"><span>About me</span></a></button></div></nav><div style="position:fixed;top:1px;left:1px;width:1px;height:0;padding:0;margin:-1px;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border-width:0;display:none"></div></div></div></div><div style="position:fixed;top:1px;left:1px;width:1px;height:0;padding:0;margin:-1px;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border-width:0;display:none"></div><main class="container w-100 lg:w-8/12 mx-auto flex flex-col pb-16 pt-40"><div class="card card-page"><div class="post__header"><h1 class="post__title post--padding">React testing collection</h1><div class="post__author post--padding"><p>By <span class="font-bold">Nghia Ngo</span></p><span class="text-sm">Feb 16, 2024</span></div><img class="post__image-cover" src="/images/posts/how-you-understand-nodejs/nodejs-cover.jpeg" alt="image-cover"/></div><div class="post__body post--padding"><h1>Introduction</h1>
<p class=" code-block__paragraph">Testing is an important part of the development process. It helps us to ensure the quality of the project.
In this article, I will collect my experience about testing in React.</p>
<p class=" code-block__paragraph">In this article, I will use <a href="https://jestjs.io/" class=" code-block__link">Jest</a>,
<a href="https://testing-library.com/docs/react-testing-library/intro/" class=" code-block__link">React Testing Library</a> and
<a href="https://mswjs.io/" class=" code-block__link">msw</a> for testing.</p>
<h1>Testing</h1>
<h2>Setup testing utilities</h2>
<p class=" code-block__paragraph">Add a setup for <code value="jest-dom" class="code-block__code">jest-dom</code> from <code value="testing-library" class="code-block__code">testing-library</code> to adds custom mathchers for asserting on the DOM nodes, that allows
you to do things like <code value="expect(element).toHaveTextContent(/react/i)" class="code-block__code">expect(element).toHaveTextContent(/react/i)</code>.
Read more on <a href="https://github.com/testing-library/jest-dom" class=" code-block__link">jest-dom</a>.</p>
<pre><div class="code-block__block"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 448 512" class="code-block__copy-func" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M433.941 65.941l-51.882-51.882A48 48 0 0 0 348.118 0H176c-26.51 0-48 21.49-48 48v48H48c-26.51 0-48 21.49-48 48v320c0 26.51 21.49 48 48 48h224c26.51 0 48-21.49 48-48v-48h80c26.51 0 48-21.49 48-48V99.882a48 48 0 0 0-14.059-33.941zM266 464H54a6 6 0 0 1-6-6V150a6 6 0 0 1 6-6h74v224c0 26.51 21.49 48 48 48h96v42a6 6 0 0 1-6 6zm128-96H182a6 6 0 0 1-6-6V54a6 6 0 0 1 6-6h106v88c0 13.255 10.745 24 24 24h88v202a6 6 0 0 1-6 6zm6-256h-64V48h9.632c1.591 0 3.117.632 4.243 1.757l48.368 48.368a6 6 0 0 1 1.757 4.243V112z"></path></svg><pre style="text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;color:#c3cee3;background:#263238;font-family:Roboto Mono, monospace;font-size:1em;line-height:1.5em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;overflow:auto;position:relative;margin:0.5em 0;padding:1.25em 1em"><code class="language-tsx" style="text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;color:#c3cee3;background:#263238;font-family:Roboto Mono, monospace;font-size:1em;line-height:1.5em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token token module" style="color:#c792ea;font-style:italic">import</span><span> </span><span class="token token" style="color:#c3e88d">&#x27;@testing-library/jest-dom&#x27;</span><span class="token token" style="color:#89ddff">;</span><span>
</span><span></span><span class="token token module" style="color:#c792ea;font-style:italic">import</span><span> </span><span class="token token imports" style="color:#89ddff">{</span><span class="token token imports"> render</span><span class="token token imports" style="color:#89ddff">,</span><span class="token token imports"> screen </span><span class="token token imports" style="color:#89ddff">}</span><span> </span><span class="token token module" style="color:#c792ea;font-style:italic">from</span><span> </span><span class="token token" style="color:#c3e88d">&#x27;@testing-library/react&#x27;</span><span class="token token" style="color:#89ddff">;</span><span>
</span><span></span><span class="token token module" style="color:#c792ea;font-style:italic">import</span><span> </span><span class="token token imports" style="color:#89ddff">{</span><span class="token token imports"> </span><span class="token token imports maybe-class-name">ReactElement</span><span class="token token imports"> </span><span class="token token imports" style="color:#89ddff">}</span><span> </span><span class="token token module" style="color:#c792ea;font-style:italic">from</span><span> </span><span class="token token" style="color:#c3e88d">&#x27;react&#x27;</span><span class="token token" style="color:#89ddff">;</span><span>
</span><span></span><span class="token token module" style="color:#c792ea;font-style:italic">import</span><span> </span><span class="token token imports" style="color:#89ddff">{</span><span class="token token imports"> </span><span class="token token imports maybe-class-name">BrowserRouter</span><span class="token token imports"> </span><span class="token token imports module" style="color:#c792ea;font-style:italic">as</span><span class="token token imports"> </span><span class="token token imports maybe-class-name">Router</span><span class="token token imports"> </span><span class="token token imports" style="color:#89ddff">}</span><span> </span><span class="token token module" style="color:#c792ea;font-style:italic">from</span><span> </span><span class="token token" style="color:#c3e88d">&#x27;react-router-dom&#x27;</span><span class="token token" style="color:#89ddff">;</span><span>
</span>
<span></span><span class="token token" style="color:#c792ea;font-style:italic">const</span><span> renderWithProviders </span><span class="token token" style="color:#89ddff">=</span><span> </span><span class="token token" style="color:#89ddff">(</span><span>ui</span><span class="token token" style="color:#89ddff">:</span><span> </span><span class="token token maybe-class-name">ReactElement</span><span class="token token" style="color:#89ddff">,</span><span> </span><span class="token token" style="color:#89ddff">{</span><span> route </span><span class="token token" style="color:#89ddff">=</span><span> </span><span class="token token" style="color:#c3e88d">&#x27;/&#x27;</span><span> </span><span class="token token" style="color:#89ddff">}</span><span> </span><span class="token token" style="color:#89ddff">=</span><span> </span><span class="token token" style="color:#89ddff">{</span><span class="token token" style="color:#89ddff">}</span><span class="token token" style="color:#89ddff">)</span><span> </span><span class="token token arrow" style="color:#89ddff">=&gt;</span><span> </span><span class="token token" style="color:#89ddff">{</span><span>
</span><span>    </span><span class="token token known-class-name" style="color:#f2ff00">Object</span><span class="token token" style="color:#89ddff">.</span><span class="token token method property-access" style="color:#c792ea">defineProperty</span><span class="token token" style="color:#89ddff">(</span><span class="token token dom" style="color:#f07178">window</span><span class="token token" style="color:#89ddff">,</span><span> </span><span class="token token" style="color:#c3e88d">&#x27;matchMedia&#x27;</span><span class="token token" style="color:#89ddff">,</span><span> </span><span class="token token" style="color:#89ddff">{</span><span>
</span><span>        writable</span><span class="token token" style="color:#89ddff">:</span><span> </span><span class="token token" style="color:#c792ea">true</span><span class="token token" style="color:#89ddff">,</span><span>
</span><span>        value</span><span class="token token" style="color:#89ddff">:</span><span> jest</span><span class="token token" style="color:#89ddff">.</span><span class="token token method property-access" style="color:#c792ea">fn</span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#89ddff">)</span><span class="token token" style="color:#89ddff">.</span><span class="token token method property-access" style="color:#c792ea">mockImplementation</span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#89ddff">(</span><span>query</span><span class="token token" style="color:#89ddff">)</span><span> </span><span class="token token arrow" style="color:#89ddff">=&gt;</span><span> </span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#89ddff">{</span><span>
</span><span>            matches</span><span class="token token" style="color:#89ddff">:</span><span> </span><span class="token token" style="color:#c792ea">false</span><span class="token token" style="color:#89ddff">,</span><span>
</span><span>            media</span><span class="token token" style="color:#89ddff">:</span><span> query</span><span class="token token" style="color:#89ddff">,</span><span>
</span><span>            onchange</span><span class="token token" style="color:#89ddff">:</span><span> </span><span class="token token null nil" style="color:#c792ea;font-style:italic">null</span><span class="token token" style="color:#89ddff">,</span><span>
</span><span>            addListener</span><span class="token token" style="color:#89ddff">:</span><span> jest</span><span class="token token" style="color:#89ddff">.</span><span class="token token method property-access" style="color:#c792ea">fn</span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#89ddff">)</span><span class="token token" style="color:#89ddff">,</span><span> </span><span class="token token" style="color:#546e7a">// Deprecated</span><span>
</span><span>            removeListener</span><span class="token token" style="color:#89ddff">:</span><span> jest</span><span class="token token" style="color:#89ddff">.</span><span class="token token method property-access" style="color:#c792ea">fn</span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#89ddff">)</span><span class="token token" style="color:#89ddff">,</span><span> </span><span class="token token" style="color:#546e7a">// Deprecated</span><span>
</span><span>            addEventListener</span><span class="token token" style="color:#89ddff">:</span><span> jest</span><span class="token token" style="color:#89ddff">.</span><span class="token token method property-access" style="color:#c792ea">fn</span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#89ddff">)</span><span class="token token" style="color:#89ddff">,</span><span>
</span><span>            removeEventListener</span><span class="token token" style="color:#89ddff">:</span><span> jest</span><span class="token token" style="color:#89ddff">.</span><span class="token token method property-access" style="color:#c792ea">fn</span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#89ddff">)</span><span class="token token" style="color:#89ddff">,</span><span>
</span><span>            dispatchEvent</span><span class="token token" style="color:#89ddff">:</span><span> jest</span><span class="token token" style="color:#89ddff">.</span><span class="token token method property-access" style="color:#c792ea">fn</span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#89ddff">)</span><span class="token token" style="color:#89ddff">,</span><span>
</span><span>        </span><span class="token token" style="color:#89ddff">}</span><span class="token token" style="color:#89ddff">)</span><span class="token token" style="color:#89ddff">)</span><span class="token token" style="color:#89ddff">,</span><span>
</span><span>    </span><span class="token token" style="color:#89ddff">}</span><span class="token token" style="color:#89ddff">)</span><span class="token token" style="color:#89ddff">;</span><span>
</span><span>    </span><span class="token token dom" style="color:#f07178">window</span><span class="token token" style="color:#89ddff">.</span><span class="token token property-access">history</span><span class="token token" style="color:#89ddff">.</span><span class="token token method property-access" style="color:#c792ea">pushState</span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#89ddff">{</span><span class="token token" style="color:#89ddff">}</span><span class="token token" style="color:#89ddff">,</span><span> </span><span class="token token" style="color:#c3e88d">&#x27;Test page&#x27;</span><span class="token token" style="color:#89ddff">,</span><span> route</span><span class="token token" style="color:#89ddff">)</span><span class="token token" style="color:#89ddff">;</span><span>
</span><span>    </span><span class="token token control-flow" style="color:#c792ea;font-style:italic">return</span><span> </span><span class="token token" style="color:#c792ea">render</span><span class="token token" style="color:#89ddff">(</span><span>ui</span><span class="token token" style="color:#89ddff">,</span><span> </span><span class="token token" style="color:#89ddff">{</span><span> wrapper</span><span class="token token" style="color:#89ddff">:</span><span> </span><span class="token token maybe-class-name">Router</span><span> </span><span class="token token" style="color:#89ddff">}</span><span class="token token" style="color:#89ddff">)</span><span class="token token" style="color:#89ddff">;</span><span>
</span><span></span><span class="token token" style="color:#89ddff">}</span><span class="token token" style="color:#89ddff">;</span><span>
</span>
<span></span><span class="token token module" style="color:#c792ea;font-style:italic">export</span><span> </span><span class="token token exports" style="color:#89ddff">{</span><span class="token token exports"> renderWithProviders </span><span class="token token exports module" style="color:#c792ea;font-style:italic">as</span><span class="token token exports"> render</span><span class="token token exports" style="color:#89ddff">,</span><span class="token token exports"> screen </span><span class="token token exports" style="color:#89ddff">}</span><span class="token token" style="color:#89ddff">;</span><span>
</span></code></pre></div></pre>
<p class=" code-block__paragraph">Now, whenever we want to use <code value="render" class="code-block__code">render</code> and <code value="screen" class="code-block__code">screen</code> from <code value="@testing-library/react" class="code-block__code">@testing-library/react</code>, we can use our custom <code value="render" class="code-block__code">render</code>
and <code value="screen" class="code-block__code">screen</code> instead.</p>
<h2>Simple test</h2>
<p class=" code-block__paragraph">We start with a simple test by rendering a component and check if it&#x27;s rendered correctly.</p>
<pre><div class="code-block__block"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 448 512" class="code-block__copy-func" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M433.941 65.941l-51.882-51.882A48 48 0 0 0 348.118 0H176c-26.51 0-48 21.49-48 48v48H48c-26.51 0-48 21.49-48 48v320c0 26.51 21.49 48 48 48h224c26.51 0 48-21.49 48-48v-48h80c26.51 0 48-21.49 48-48V99.882a48 48 0 0 0-14.059-33.941zM266 464H54a6 6 0 0 1-6-6V150a6 6 0 0 1 6-6h74v224c0 26.51 21.49 48 48 48h96v42a6 6 0 0 1-6 6zm128-96H182a6 6 0 0 1-6-6V54a6 6 0 0 1 6-6h106v88c0 13.255 10.745 24 24 24h88v202a6 6 0 0 1-6 6zm6-256h-64V48h9.632c1.591 0 3.117.632 4.243 1.757l48.368 48.368a6 6 0 0 1 1.757 4.243V112z"></path></svg><pre style="text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;color:#c3cee3;background:#263238;font-family:Roboto Mono, monospace;font-size:1em;line-height:1.5em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;overflow:auto;position:relative;margin:0.5em 0;padding:1.25em 1em"><code class="language-tsx" style="text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;color:#c3cee3;background:#263238;font-family:Roboto Mono, monospace;font-size:1em;line-height:1.5em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token token module" style="color:#c792ea;font-style:italic">import</span><span> </span><span class="token token imports" style="color:#89ddff">{</span><span class="token token imports"> render </span><span class="token token imports" style="color:#89ddff">}</span><span> </span><span class="token token module" style="color:#c792ea;font-style:italic">from</span><span> </span><span class="token token" style="color:#c3e88d">&#x27;setupTests&#x27;</span><span class="token token" style="color:#89ddff">;</span><span>
</span><span></span><span class="token token module" style="color:#c792ea;font-style:italic">import</span><span> </span><span class="token token imports maybe-class-name">HomeComponent</span><span> </span><span class="token token module" style="color:#c792ea;font-style:italic">from</span><span> </span><span class="token token" style="color:#c3e88d">&#x27;pages/HomeComponent&#x27;</span><span class="token token" style="color:#89ddff">;</span><span>
</span>
<span></span><span class="token token" style="color:#c792ea">describe</span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#c3e88d">&#x27;Simple test&#x27;</span><span class="token token" style="color:#89ddff">,</span><span> </span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#89ddff">)</span><span> </span><span class="token token arrow" style="color:#89ddff">=&gt;</span><span> </span><span class="token token" style="color:#89ddff">{</span><span>
</span><span>    </span><span class="token token" style="color:#c792ea">test</span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#c3e88d">&#x27;render correctly&#x27;</span><span class="token token" style="color:#89ddff">,</span><span> </span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#89ddff">)</span><span> </span><span class="token token arrow" style="color:#89ddff">=&gt;</span><span> </span><span class="token token" style="color:#89ddff">{</span><span>
</span><span>        </span><span class="token token" style="color:#c792ea;font-style:italic">const</span><span> </span><span class="token token" style="color:#89ddff">{</span><span> getByTestId</span><span class="token token" style="color:#89ddff">,</span><span> getAllByTestId </span><span class="token token" style="color:#89ddff">}</span><span> </span><span class="token token" style="color:#89ddff">=</span><span> </span><span class="token token" style="color:#c792ea">render</span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#89ddff">&lt;</span><span class="token token" style="color:#f2ff00">HomeComponent</span><span class="token token" style="color:#89ddff">/&gt;</span><span class="token token" style="color:#89ddff">)</span><span class="token token" style="color:#89ddff">;</span><span>
</span><span>        </span><span class="token token" style="color:#c792ea">expect</span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#c792ea">getByTestId</span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#c3e88d">&#x27;homeHeader&#x27;</span><span class="token token" style="color:#89ddff">)</span><span class="token token" style="color:#89ddff">)</span><span class="token token" style="color:#89ddff">.</span><span class="token token method property-access" style="color:#c792ea">toBeTruthy</span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#89ddff">)</span><span class="token token" style="color:#89ddff">;</span><span>
</span><span>        </span><span class="token token" style="color:#c792ea">expect</span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#c792ea">getAllByTestId</span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#c3e88d">&#x27;input&#x27;</span><span class="token token" style="color:#89ddff">)</span><span class="token token" style="color:#89ddff">)</span><span class="token token" style="color:#89ddff">.</span><span class="token token method property-access" style="color:#c792ea">toHaveLength</span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#fd9170">4</span><span class="token token" style="color:#89ddff">)</span><span class="token token" style="color:#89ddff">;</span><span>
</span><span>    </span><span class="token token" style="color:#89ddff">}</span><span class="token token" style="color:#89ddff">)</span><span>
</span><span></span><span class="token token" style="color:#89ddff">}</span><span class="token token" style="color:#89ddff">)</span><span>
</span></code></pre></div></pre>
<p class=" code-block__paragraph">As you can see that, we use <code value="getByTestId" class="code-block__code">getByTestId</code> and <code value="getAllByTestId" class="code-block__code">getAllByTestId</code> to get the element by <code value="data-testid" class="code-block__code">data-testid</code> attribute.
Therefore, in our component, we need to add <code value="data-testid" class="code-block__code">data-testid</code> attribute to the element that we want to test.</p>
<p class=" code-block__paragraph">For example:</p>
<pre><div class="code-block__block"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 448 512" class="code-block__copy-func" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M433.941 65.941l-51.882-51.882A48 48 0 0 0 348.118 0H176c-26.51 0-48 21.49-48 48v48H48c-26.51 0-48 21.49-48 48v320c0 26.51 21.49 48 48 48h224c26.51 0 48-21.49 48-48v-48h80c26.51 0 48-21.49 48-48V99.882a48 48 0 0 0-14.059-33.941zM266 464H54a6 6 0 0 1-6-6V150a6 6 0 0 1 6-6h74v224c0 26.51 21.49 48 48 48h96v42a6 6 0 0 1-6 6zm128-96H182a6 6 0 0 1-6-6V54a6 6 0 0 1 6-6h106v88c0 13.255 10.745 24 24 24h88v202a6 6 0 0 1-6 6zm6-256h-64V48h9.632c1.591 0 3.117.632 4.243 1.757l48.368 48.368a6 6 0 0 1 1.757 4.243V112z"></path></svg><pre style="text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;color:#c3cee3;background:#263238;font-family:Roboto Mono, monospace;font-size:1em;line-height:1.5em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;overflow:auto;position:relative;margin:0.5em 0;padding:1.25em 1em"><code class="language-tsx" style="text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;color:#c3cee3;background:#263238;font-family:Roboto Mono, monospace;font-size:1em;line-height:1.5em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token token" style="color:#c792ea;font-style:italic">const</span><span> </span><span class="token token function-variable maybe-class-name" style="color:#c792ea">HomeComponent</span><span> </span><span class="token token" style="color:#89ddff">=</span><span> </span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#89ddff">)</span><span> </span><span class="token token arrow" style="color:#89ddff">=&gt;</span><span> </span><span class="token token" style="color:#89ddff">{</span><span>
</span><span>    </span><span class="token token control-flow" style="color:#c792ea;font-style:italic">return</span><span> </span><span class="token token" style="color:#89ddff">(</span><span>
</span><span>        </span><span class="token token" style="color:#89ddff">&lt;</span><span class="token token" style="color:#f07178">div</span><span class="token token" style="color:#89ddff">&gt;</span><span class="token token plain-text">
</span><span class="token token plain-text">            </span><span class="token token" style="color:#89ddff">&lt;</span><span class="token token" style="color:#f07178">h1</span><span class="token token" style="color:#f07178"> </span><span class="token token" style="color:#ffcb6b">data-testid</span><span class="token token attr-equals" style="color:#89ddff">=</span><span class="token token" style="color:#89ddff">&quot;</span><span class="token token" style="color:#c3e88d">homeHeader</span><span class="token token" style="color:#89ddff">&quot;</span><span class="token token" style="color:#89ddff">&gt;</span><span class="token token plain-text">Home</span><span class="token token" style="color:#89ddff">&lt;/</span><span class="token token" style="color:#f07178">h1</span><span class="token token" style="color:#89ddff">&gt;</span><span class="token token plain-text">
</span><span class="token token plain-text">            </span><span class="token token" style="color:#89ddff">&lt;</span><span class="token token" style="color:#f07178">input</span><span class="token token" style="color:#f07178"> </span><span class="token token" style="color:#ffcb6b">data-testid</span><span class="token token attr-equals" style="color:#89ddff">=</span><span class="token token" style="color:#89ddff">&quot;</span><span class="token token" style="color:#c3e88d">input</span><span class="token token" style="color:#89ddff">&quot;</span><span class="token token" style="color:#89ddff">/&gt;</span><span class="token token plain-text">
</span><span class="token token plain-text">            </span><span class="token token" style="color:#89ddff">&lt;</span><span class="token token" style="color:#f07178">input</span><span class="token token" style="color:#f07178"> </span><span class="token token" style="color:#ffcb6b">data-testid</span><span class="token token attr-equals" style="color:#89ddff">=</span><span class="token token" style="color:#89ddff">&quot;</span><span class="token token" style="color:#c3e88d">input</span><span class="token token" style="color:#89ddff">&quot;</span><span class="token token" style="color:#89ddff">/&gt;</span><span class="token token plain-text">
</span><span class="token token plain-text">            </span><span class="token token" style="color:#89ddff">&lt;</span><span class="token token" style="color:#f07178">input</span><span class="token token" style="color:#f07178"> </span><span class="token token" style="color:#ffcb6b">data-testid</span><span class="token token attr-equals" style="color:#89ddff">=</span><span class="token token" style="color:#89ddff">&quot;</span><span class="token token" style="color:#c3e88d">input</span><span class="token token" style="color:#89ddff">&quot;</span><span class="token token" style="color:#89ddff">/&gt;</span><span class="token token plain-text">
</span><span class="token token plain-text">            </span><span class="token token" style="color:#89ddff">&lt;</span><span class="token token" style="color:#f07178">input</span><span class="token token" style="color:#f07178"> </span><span class="token token" style="color:#ffcb6b">data-testid</span><span class="token token attr-equals" style="color:#89ddff">=</span><span class="token token" style="color:#89ddff">&quot;</span><span class="token token" style="color:#c3e88d">input</span><span class="token token" style="color:#89ddff">&quot;</span><span class="token token" style="color:#89ddff">/&gt;</span><span class="token token plain-text">
</span><span class="token token plain-text">        </span><span class="token token" style="color:#89ddff">&lt;/</span><span class="token token" style="color:#f07178">div</span><span class="token token" style="color:#89ddff">&gt;</span><span>
</span><span>    </span><span class="token token" style="color:#89ddff">)</span><span>
</span><span></span><span class="token token" style="color:#89ddff">}</span><span>
</span></code></pre></div></pre>
<h2>Test with Provider</h2>
<p class=" code-block__paragraph">It is clear that some cases require a context to execute logic inside the component, for example, we have <code value="AdminHeader" class="code-block__code">AdminHeader</code>
component and <code value="NormalHeader" class="code-block__code">NormalHeader</code> component, now we have to check the user from the context to render the correct component.</p>
<div class="code-block__title">HomeComponent.tsx</div>
<pre><div class="code-block__block"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 448 512" class="code-block__copy-func" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M433.941 65.941l-51.882-51.882A48 48 0 0 0 348.118 0H176c-26.51 0-48 21.49-48 48v48H48c-26.51 0-48 21.49-48 48v320c0 26.51 21.49 48 48 48h224c26.51 0 48-21.49 48-48v-48h80c26.51 0 48-21.49 48-48V99.882a48 48 0 0 0-14.059-33.941zM266 464H54a6 6 0 0 1-6-6V150a6 6 0 0 1 6-6h74v224c0 26.51 21.49 48 48 48h96v42a6 6 0 0 1-6 6zm128-96H182a6 6 0 0 1-6-6V54a6 6 0 0 1 6-6h106v88c0 13.255 10.745 24 24 24h88v202a6 6 0 0 1-6 6zm6-256h-64V48h9.632c1.591 0 3.117.632 4.243 1.757l48.368 48.368a6 6 0 0 1 1.757 4.243V112z"></path></svg><pre style="text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;color:#c3cee3;background:#263238;font-family:Roboto Mono, monospace;font-size:1em;line-height:1.5em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;overflow:auto;position:relative;margin:0.5em 0;padding:1.25em 1em"><code class="language-tsx" style="text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;color:#c3cee3;background:#263238;font-family:Roboto Mono, monospace;font-size:1em;line-height:1.5em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token token module" style="color:#c792ea;font-style:italic">import</span><span> </span><span class="token token imports" style="color:#89ddff">{</span><span class="token token imports"> </span><span class="token token imports maybe-class-name">HomeContext</span><span class="token token imports"> </span><span class="token token imports" style="color:#89ddff">}</span><span> </span><span class="token token module" style="color:#c792ea;font-style:italic">from</span><span> </span><span class="token token" style="color:#c3e88d">&#x27;contexts/homeContext&#x27;</span><span class="token token" style="color:#89ddff">;</span><span>
</span>
<span></span><span class="token token" style="color:#c792ea;font-style:italic">const</span><span> </span><span class="token token function-variable maybe-class-name" style="color:#c792ea">HomeComponent</span><span> </span><span class="token token" style="color:#89ddff">=</span><span> </span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#89ddff">)</span><span> </span><span class="token token arrow" style="color:#89ddff">=&gt;</span><span> </span><span class="token token" style="color:#89ddff">{</span><span>
</span><span>    </span><span class="token token" style="color:#c792ea;font-style:italic">const</span><span> </span><span class="token token" style="color:#89ddff">{</span><span> state </span><span class="token token" style="color:#89ddff">}</span><span> </span><span class="token token" style="color:#89ddff">=</span><span> </span><span class="token token" style="color:#c792ea">useContext</span><span class="token token" style="color:#89ddff">(</span><span class="token token maybe-class-name">HomeContext</span><span class="token token" style="color:#89ddff">)</span><span class="token token" style="color:#89ddff">;</span><span>
</span><span>    </span><span class="token token control-flow" style="color:#c792ea;font-style:italic">return</span><span> </span><span class="token token" style="color:#89ddff">(</span><span>
</span><span>        </span><span class="token token" style="color:#89ddff">&lt;</span><span class="token token" style="color:#89ddff">&gt;</span><span class="token token plain-text">
</span><span class="token token plain-text">            </span><span class="token token" style="color:#89ddff">{</span><span>state</span><span class="token token" style="color:#89ddff">.</span><span class="token token property-access">isAdmin</span><span> </span><span class="token token" style="color:#89ddff">?</span><span> </span><span class="token token" style="color:#89ddff">&lt;</span><span class="token token" style="color:#f2ff00">AdminHeader</span><span class="token token" style="color:#f07178"> </span><span class="token token" style="color:#ffcb6b">data-testid</span><span class="token token attr-equals" style="color:#89ddff">=</span><span class="token token" style="color:#89ddff">&quot;</span><span class="token token" style="color:#c3e88d">adminHeader</span><span class="token token" style="color:#89ddff">&quot;</span><span class="token token" style="color:#89ddff">/&gt;</span><span> </span><span class="token token" style="color:#89ddff">:</span><span> </span><span class="token token" style="color:#89ddff">&lt;</span><span class="token token" style="color:#f2ff00">NormalHeader</span><span class="token token" style="color:#f07178"> </span><span class="token token" style="color:#ffcb6b">data-testid</span><span class="token token attr-equals" style="color:#89ddff">=</span><span class="token token" style="color:#89ddff">&quot;</span><span class="token token" style="color:#c3e88d">normalHeader</span><span class="token token" style="color:#89ddff">&quot;</span><span class="token token" style="color:#89ddff">/&gt;</span><span class="token token" style="color:#89ddff">}</span><span class="token token plain-text">
</span><span class="token token plain-text">            </span><span class="token token" style="color:#89ddff">&lt;</span><span class="token token" style="color:#f2ff00">Content</span><span class="token token" style="color:#89ddff">&gt;</span><span class="token token" style="color:#89ddff">&lt;/</span><span class="token token" style="color:#f2ff00">Content</span><span class="token token" style="color:#89ddff">&gt;</span><span class="token token plain-text">
</span><span class="token token plain-text">        </span><span class="token token" style="color:#89ddff">&lt;/</span><span class="token token" style="color:#89ddff">&gt;</span><span>
</span><span>    </span><span class="token token" style="color:#89ddff">)</span><span>
</span><span></span><span class="token token" style="color:#89ddff">}</span><span>
</span></code></pre></div></pre>
<p class=" code-block__paragraph">Now to test with the <code value="HomeContext" class="code-block__code">HomeContext</code>, we will mock the value of it.</p>
<div class="code-block__title">HomeComponent.test.tsx</div>
<pre><div class="code-block__block"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 448 512" class="code-block__copy-func" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M433.941 65.941l-51.882-51.882A48 48 0 0 0 348.118 0H176c-26.51 0-48 21.49-48 48v48H48c-26.51 0-48 21.49-48 48v320c0 26.51 21.49 48 48 48h224c26.51 0 48-21.49 48-48v-48h80c26.51 0 48-21.49 48-48V99.882a48 48 0 0 0-14.059-33.941zM266 464H54a6 6 0 0 1-6-6V150a6 6 0 0 1 6-6h74v224c0 26.51 21.49 48 48 48h96v42a6 6 0 0 1-6 6zm128-96H182a6 6 0 0 1-6-6V54a6 6 0 0 1 6-6h106v88c0 13.255 10.745 24 24 24h88v202a6 6 0 0 1-6 6zm6-256h-64V48h9.632c1.591 0 3.117.632 4.243 1.757l48.368 48.368a6 6 0 0 1 1.757 4.243V112z"></path></svg><pre style="text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;color:#c3cee3;background:#263238;font-family:Roboto Mono, monospace;font-size:1em;line-height:1.5em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;overflow:auto;position:relative;margin:0.5em 0;padding:1.25em 1em"><code class="language-tsx" style="text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;color:#c3cee3;background:#263238;font-family:Roboto Mono, monospace;font-size:1em;line-height:1.5em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token token module" style="color:#c792ea;font-style:italic">import</span><span> </span><span class="token token imports" style="color:#89ddff">{</span><span class="token token imports"> render </span><span class="token token imports" style="color:#89ddff">}</span><span> </span><span class="token token module" style="color:#c792ea;font-style:italic">from</span><span> </span><span class="token token" style="color:#c3e88d">&#x27;setupTests&#x27;</span><span class="token token" style="color:#89ddff">;</span><span>
</span><span></span><span class="token token module" style="color:#c792ea;font-style:italic">import</span><span> </span><span class="token token imports maybe-class-name">HomeComponent</span><span> </span><span class="token token module" style="color:#c792ea;font-style:italic">from</span><span> </span><span class="token token" style="color:#c3e88d">&#x27;pages/HomeComponent&#x27;</span><span class="token token" style="color:#89ddff">;</span><span>
</span>
<span></span><span class="token token" style="color:#c792ea">describe</span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#c3e88d">&#x27;Test with context Provider&#x27;</span><span class="token token" style="color:#89ddff">,</span><span> </span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#89ddff">)</span><span> </span><span class="token token arrow" style="color:#89ddff">=&gt;</span><span> </span><span class="token token" style="color:#89ddff">{</span><span>
</span><span>    </span><span class="token token" style="color:#c792ea">test</span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#c3e88d">&#x27;render admin header when isAdmin is true&#x27;</span><span class="token token" style="color:#89ddff">,</span><span> </span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#89ddff">)</span><span> </span><span class="token token arrow" style="color:#89ddff">=&gt;</span><span> </span><span class="token token" style="color:#89ddff">{</span><span>
</span><span>        </span><span class="token token" style="color:#c792ea;font-style:italic">const</span><span> mockHomeValueContext </span><span class="token token" style="color:#89ddff">=</span><span> </span><span class="token token" style="color:#89ddff">{</span><span>
</span><span>            state</span><span class="token token" style="color:#89ddff">:</span><span> </span><span class="token token" style="color:#89ddff">{</span><span>
</span><span>                isAdmin</span><span class="token token" style="color:#89ddff">:</span><span> </span><span class="token token" style="color:#c792ea">true</span><span>
</span><span>            </span><span class="token token" style="color:#89ddff">}</span><span class="token token" style="color:#89ddff">,</span><span>
</span><span>            dispatch</span><span class="token token" style="color:#89ddff">:</span><span> jest</span><span class="token token" style="color:#89ddff">.</span><span class="token token method property-access" style="color:#c792ea">fn</span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#89ddff">)</span><span class="token token" style="color:#89ddff">,</span><span>
</span><span>        </span><span class="token token" style="color:#89ddff">}</span><span class="token token" style="color:#89ddff">;</span><span>
</span><span>        </span><span class="token token" style="color:#c792ea;font-style:italic">const</span><span> </span><span class="token token" style="color:#89ddff">{</span><span> getByTestId </span><span class="token token" style="color:#89ddff">}</span><span> </span><span class="token token" style="color:#89ddff">=</span><span> </span><span class="token token" style="color:#c792ea">render</span><span class="token token" style="color:#89ddff">(</span><span>
</span><span>            </span><span class="token token" style="color:#89ddff">&lt;</span><span class="token token" style="color:#f2ff00">HomeContext.Provider</span><span class="token token" style="color:#f07178"> </span><span class="token token" style="color:#ffcb6b">value</span><span class="token token script language-javascript script-punctuation" style="color:#f07178">=</span><span class="token token script language-javascript" style="color:#89ddff">{</span><span class="token token script language-javascript" style="color:#f07178">mockHomeValueContext</span><span class="token token script language-javascript" style="color:#89ddff">}</span><span class="token token" style="color:#89ddff">&gt;</span><span class="token token plain-text">
</span><span class="token token plain-text">                </span><span class="token token" style="color:#89ddff">&lt;</span><span class="token token" style="color:#f2ff00">HomeComponent</span><span class="token token" style="color:#89ddff">/&gt;</span><span class="token token plain-text">
</span><span class="token token plain-text">            </span><span class="token token" style="color:#89ddff">&lt;/</span><span class="token token" style="color:#f2ff00">HomeContext.Provider</span><span class="token token" style="color:#89ddff">&gt;</span><span>
</span><span>        </span><span class="token token" style="color:#89ddff">)</span><span class="token token" style="color:#89ddff">;</span><span>
</span><span>        </span><span class="token token" style="color:#c792ea">expect</span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#c792ea">getByTestId</span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#c3e88d">&#x27;adminHeader&#x27;</span><span class="token token" style="color:#89ddff">)</span><span class="token token" style="color:#89ddff">)</span><span class="token token" style="color:#89ddff">.</span><span class="token token method property-access" style="color:#c792ea">toBeTruthy</span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#89ddff">)</span><span class="token token" style="color:#89ddff">;</span><span>
</span><span>    </span><span class="token token" style="color:#89ddff">}</span><span class="token token" style="color:#89ddff">)</span><span>
</span><span></span><span class="token token" style="color:#89ddff">}</span><span class="token token" style="color:#89ddff">)</span><span>
</span></code></pre></div></pre>
<h2>Test with Event</h2>
<p class=" code-block__paragraph">In some cases, we want to test behavior of components after an event is triggered. For example, we click on a button
inside a component, then it will trigger an action of the component. Now, we will check if the action is triggered
correctly.</p>
<p class=" code-block__paragraph">We can use <code value="fireEvent" class="code-block__code">fireEvent</code> from <code value="@testing-library/react" class="code-block__code">@testing-library/react</code> to simulate the event.</p>
<pre><div class="code-block__block"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 448 512" class="code-block__copy-func" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M433.941 65.941l-51.882-51.882A48 48 0 0 0 348.118 0H176c-26.51 0-48 21.49-48 48v48H48c-26.51 0-48 21.49-48 48v320c0 26.51 21.49 48 48 48h224c26.51 0 48-21.49 48-48v-48h80c26.51 0 48-21.49 48-48V99.882a48 48 0 0 0-14.059-33.941zM266 464H54a6 6 0 0 1-6-6V150a6 6 0 0 1 6-6h74v224c0 26.51 21.49 48 48 48h96v42a6 6 0 0 1-6 6zm128-96H182a6 6 0 0 1-6-6V54a6 6 0 0 1 6-6h106v88c0 13.255 10.745 24 24 24h88v202a6 6 0 0 1-6 6zm6-256h-64V48h9.632c1.591 0 3.117.632 4.243 1.757l48.368 48.368a6 6 0 0 1 1.757 4.243V112z"></path></svg><pre style="text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;color:#c3cee3;background:#263238;font-family:Roboto Mono, monospace;font-size:1em;line-height:1.5em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;overflow:auto;position:relative;margin:0.5em 0;padding:1.25em 1em"><code class="language-tsx" style="text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;color:#c3cee3;background:#263238;font-family:Roboto Mono, monospace;font-size:1em;line-height:1.5em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token token module" style="color:#c792ea;font-style:italic">import</span><span> </span><span class="token token imports" style="color:#89ddff">{</span><span class="token token imports"> fireEvent </span><span class="token token imports" style="color:#89ddff">}</span><span> </span><span class="token token module" style="color:#c792ea;font-style:italic">from</span><span> </span><span class="token token" style="color:#c3e88d">&#x27;@testing-library/react&#x27;</span><span class="token token" style="color:#89ddff">;</span><span>
</span><span></span><span class="token token module" style="color:#c792ea;font-style:italic">import</span><span> </span><span class="token token imports" style="color:#89ddff">{</span><span class="token token imports"> render </span><span class="token token imports" style="color:#89ddff">}</span><span> </span><span class="token token module" style="color:#c792ea;font-style:italic">from</span><span> </span><span class="token token" style="color:#c3e88d">&#x27;setupTests&#x27;</span><span class="token token" style="color:#89ddff">;</span><span>
</span>
<span></span><span class="token token" style="color:#c792ea">describe</span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#c3e88d">&#x27;Test component after action click&#x27;</span><span class="token token" style="color:#89ddff">,</span><span> </span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#89ddff">)</span><span> </span><span class="token token arrow" style="color:#89ddff">=&gt;</span><span> </span><span class="token token" style="color:#89ddff">{</span><span>
</span><span>    </span><span class="token token" style="color:#c792ea">test</span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#c3e88d">&#x27;menu component&#x27;</span><span class="token token" style="color:#89ddff">,</span><span> </span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#89ddff">)</span><span> </span><span class="token token arrow" style="color:#89ddff">=&gt;</span><span> </span><span class="token token" style="color:#89ddff">{</span><span>
</span><span>        </span><span class="token token" style="color:#c792ea;font-style:italic">const</span><span> mockClick </span><span class="token token" style="color:#89ddff">=</span><span> jest</span><span class="token token" style="color:#89ddff">.</span><span class="token token method property-access" style="color:#c792ea">fn</span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#89ddff">)</span><span class="token token" style="color:#89ddff">;</span><span>
</span><span>        </span><span class="token token" style="color:#c792ea;font-style:italic">const</span><span> mockItems </span><span class="token token" style="color:#89ddff">=</span><span> </span><span class="token token" style="color:#89ddff">[</span><span>
</span><span>            </span><span class="token token" style="color:#89ddff">{</span><span> id</span><span class="token token" style="color:#89ddff">:</span><span> </span><span class="token token" style="color:#c3e88d">&#x27;id-1&#x27;</span><span class="token token" style="color:#89ddff">,</span><span> label</span><span class="token token" style="color:#89ddff">:</span><span> </span><span class="token token" style="color:#c3e88d">&#x27;label-1&#x27;</span><span class="token token" style="color:#89ddff">,</span><span> icon</span><span class="token token" style="color:#89ddff">:</span><span> </span><span class="token token" style="color:#c3e88d">&#x27;icon-1&#x27;</span><span> </span><span class="token token" style="color:#89ddff">}</span><span class="token token" style="color:#89ddff">,</span><span>
</span><span>            </span><span class="token token" style="color:#89ddff">{</span><span> id</span><span class="token token" style="color:#89ddff">:</span><span> </span><span class="token token" style="color:#c3e88d">&#x27;id-2&#x27;</span><span class="token token" style="color:#89ddff">,</span><span> label</span><span class="token token" style="color:#89ddff">:</span><span> </span><span class="token token" style="color:#c3e88d">&#x27;label-2&#x27;</span><span class="token token" style="color:#89ddff">,</span><span> icon</span><span class="token token" style="color:#89ddff">:</span><span> </span><span class="token token" style="color:#c3e88d">&#x27;icon-2&#x27;</span><span> </span><span class="token token" style="color:#89ddff">}</span><span>
</span><span>        </span><span class="token token" style="color:#89ddff">]</span><span class="token token" style="color:#89ddff">;</span><span>
</span><span>        </span><span class="token token" style="color:#c792ea;font-style:italic">const</span><span> mockMenuProps </span><span class="token token" style="color:#89ddff">=</span><span> </span><span class="token token" style="color:#89ddff">{</span><span>
</span><span>            items</span><span class="token token" style="color:#89ddff">:</span><span> mockItems</span><span class="token token" style="color:#89ddff">,</span><span>
</span><span>            selectedItemKey</span><span class="token token" style="color:#89ddff">:</span><span> mockItems</span><span class="token token" style="color:#89ddff">[</span><span class="token token" style="color:#fd9170">0</span><span class="token token" style="color:#89ddff">]</span><span class="token token" style="color:#89ddff">.</span><span class="token token property-access">id</span><span class="token token" style="color:#89ddff">,</span><span>
</span><span>            onItemClick</span><span class="token token" style="color:#89ddff">:</span><span> mockClick</span><span class="token token" style="color:#89ddff">,</span><span>
</span><span>        </span><span class="token token" style="color:#89ddff">}</span><span class="token token" style="color:#89ddff">;</span><span>
</span><span>        </span><span class="token token" style="color:#c792ea;font-style:italic">const</span><span> </span><span class="token token" style="color:#89ddff">{</span><span> getByText </span><span class="token token" style="color:#89ddff">}</span><span> </span><span class="token token" style="color:#89ddff">=</span><span> </span><span class="token token" style="color:#c792ea">render</span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#89ddff">&lt;</span><span class="token token" style="color:#f2ff00">Menu</span><span class="token token" style="color:#f07178"> </span><span class="token token spread" style="color:#89ddff">{</span><span class="token token spread" style="color:#89ddff">...</span><span class="token token spread" style="color:#f07178">mockMenuProps</span><span class="token token spread" style="color:#89ddff">}</span><span class="token token" style="color:#f07178"> </span><span class="token token" style="color:#89ddff">/&gt;</span><span class="token token" style="color:#89ddff">)</span><span class="token token" style="color:#89ddff">;</span><span>
</span><span>        </span><span class="token token" style="color:#c792ea;font-style:italic">const</span><span> menuItem </span><span class="token token" style="color:#89ddff">=</span><span> </span><span class="token token" style="color:#c792ea">getByText</span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#c3e88d">&#x27;label-2&#x27;</span><span class="token token" style="color:#89ddff">)</span><span class="token token" style="color:#89ddff">;</span><span>
</span><span>        fireEvent</span><span class="token token" style="color:#89ddff">.</span><span class="token token method property-access" style="color:#c792ea">click</span><span class="token token" style="color:#89ddff">(</span><span>menuItem</span><span class="token token" style="color:#89ddff">)</span><span class="token token" style="color:#89ddff">;</span><span>
</span><span>        </span><span class="token token" style="color:#c792ea">expect</span><span class="token token" style="color:#89ddff">(</span><span>mockClick</span><span class="token token" style="color:#89ddff">)</span><span class="token token" style="color:#89ddff">.</span><span class="token token method property-access" style="color:#c792ea">toHaveBeenCalledTimes</span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#fd9170">1</span><span class="token token" style="color:#89ddff">)</span><span class="token token" style="color:#89ddff">;</span><span>
</span><span>    </span><span class="token token" style="color:#89ddff">}</span><span class="token token" style="color:#89ddff">)</span><span>
</span><span></span><span class="token token" style="color:#89ddff">}</span><span class="token token" style="color:#89ddff">)</span><span>
</span></code></pre></div></pre>
<h2>Test with API</h2>
<p class=" code-block__paragraph">How about if we want to test the component that fetches data from an API? Actually, we have two ways to do it.</p>
<ul>
<li>The first way, using mocking HTTP server(msw, nock) to mock a API server, that means we mock at the network level.</li>
<li>The second way, using jest mock data to mock calling api, that means we mock at code function level.</li>
</ul>
<p class=" code-block__paragraph">In conclusion, I prefer mocking with HTTP server more than using jest mock, because we don&#x27;t need to handle any logics
compared to some complexity configurations before and after calling API.</p>
<h3>Mocking HTTP server with msw</h3>
<pre><div class="code-block__block"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 448 512" class="code-block__copy-func" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M433.941 65.941l-51.882-51.882A48 48 0 0 0 348.118 0H176c-26.51 0-48 21.49-48 48v48H48c-26.51 0-48 21.49-48 48v320c0 26.51 21.49 48 48 48h224c26.51 0 48-21.49 48-48v-48h80c26.51 0 48-21.49 48-48V99.882a48 48 0 0 0-14.059-33.941zM266 464H54a6 6 0 0 1-6-6V150a6 6 0 0 1 6-6h74v224c0 26.51 21.49 48 48 48h96v42a6 6 0 0 1-6 6zm128-96H182a6 6 0 0 1-6-6V54a6 6 0 0 1 6-6h106v88c0 13.255 10.745 24 24 24h88v202a6 6 0 0 1-6 6zm6-256h-64V48h9.632c1.591 0 3.117.632 4.243 1.757l48.368 48.368a6 6 0 0 1 1.757 4.243V112z"></path></svg><pre style="text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;color:#c3cee3;background:#263238;font-family:Roboto Mono, monospace;font-size:1em;line-height:1.5em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;overflow:auto;position:relative;margin:0.5em 0;padding:1.25em 1em"><code class="language-tsx" style="text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;color:#c3cee3;background:#263238;font-family:Roboto Mono, monospace;font-size:1em;line-height:1.5em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token token module" style="color:#c792ea;font-style:italic">import</span><span> </span><span class="token token imports">userEvent</span><span> </span><span class="token token module" style="color:#c792ea;font-style:italic">from</span><span> </span><span class="token token" style="color:#c3e88d">&#x27;@testing-library/user-event&#x27;</span><span class="token token" style="color:#89ddff">;</span><span>
</span><span></span><span class="token token module" style="color:#c792ea;font-style:italic">import</span><span> </span><span class="token token imports" style="color:#89ddff">{</span><span class="token token imports"> rest </span><span class="token token imports" style="color:#89ddff">}</span><span> </span><span class="token token module" style="color:#c792ea;font-style:italic">from</span><span> </span><span class="token token" style="color:#c3e88d">&#x27;msw&#x27;</span><span class="token token" style="color:#89ddff">;</span><span>
</span><span></span><span class="token token module" style="color:#c792ea;font-style:italic">import</span><span> </span><span class="token token imports" style="color:#89ddff">{</span><span class="token token imports"> setupServer </span><span class="token token imports" style="color:#89ddff">}</span><span> </span><span class="token token module" style="color:#c792ea;font-style:italic">from</span><span> </span><span class="token token" style="color:#c3e88d">&#x27;msw/node&#x27;</span><span class="token token" style="color:#89ddff">;</span><span>
</span><span></span><span class="token token module" style="color:#c792ea;font-style:italic">import</span><span> </span><span class="token token imports" style="color:#89ddff">{</span><span class="token token imports"> render</span><span class="token token imports" style="color:#89ddff">,</span><span class="token token imports"> screen </span><span class="token token imports" style="color:#89ddff">}</span><span> </span><span class="token token module" style="color:#c792ea;font-style:italic">from</span><span> </span><span class="token token" style="color:#c3e88d">&#x27;setupTests&#x27;</span><span class="token token" style="color:#89ddff">;</span><span>
</span>
<span></span><span class="token token" style="color:#c792ea;font-style:italic">const</span><span> server </span><span class="token token" style="color:#89ddff">=</span><span> </span><span class="token token" style="color:#c792ea">setupServer</span><span class="token token" style="color:#89ddff">(</span><span>
</span><span>    rest</span><span class="token token" style="color:#89ddff">.</span><span class="token token method property-access" style="color:#c792ea">get</span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#c3e88d">&#x27;/greeting&#x27;</span><span class="token token" style="color:#89ddff">,</span><span> </span><span class="token token" style="color:#89ddff">(</span><span>req</span><span class="token token" style="color:#89ddff">,</span><span> res</span><span class="token token" style="color:#89ddff">,</span><span> ctx</span><span class="token token" style="color:#89ddff">)</span><span> </span><span class="token token arrow" style="color:#89ddff">=&gt;</span><span> </span><span class="token token" style="color:#89ddff">{</span><span>
</span><span>        </span><span class="token token control-flow" style="color:#c792ea;font-style:italic">return</span><span> </span><span class="token token" style="color:#c792ea">res</span><span class="token token" style="color:#89ddff">(</span><span>ctx</span><span class="token token" style="color:#89ddff">.</span><span class="token token method property-access" style="color:#c792ea">json</span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#89ddff">{</span><span> nickName</span><span class="token token" style="color:#89ddff">:</span><span> </span><span class="token token" style="color:#c3e88d">&#x27;Hello world&#x27;</span><span> </span><span class="token token" style="color:#89ddff">}</span><span class="token token" style="color:#89ddff">)</span><span class="token token" style="color:#89ddff">)</span><span class="token token" style="color:#89ddff">;</span><span>
</span><span>    </span><span class="token token" style="color:#89ddff">}</span><span class="token token" style="color:#89ddff">)</span><span class="token token" style="color:#89ddff">,</span><span>
</span><span></span><span class="token token" style="color:#89ddff">)</span><span class="token token" style="color:#89ddff">;</span><span>
</span>
<span></span><span class="token token" style="color:#c792ea">beforeAll</span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#89ddff">)</span><span> </span><span class="token token arrow" style="color:#89ddff">=&gt;</span><span> server</span><span class="token token" style="color:#89ddff">.</span><span class="token token method property-access" style="color:#c792ea">listen</span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#89ddff">)</span><span class="token token" style="color:#89ddff">)</span><span class="token token" style="color:#89ddff">;</span><span>
</span><span></span><span class="token token" style="color:#c792ea">afterEach</span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#89ddff">)</span><span> </span><span class="token token arrow" style="color:#89ddff">=&gt;</span><span> server</span><span class="token token" style="color:#89ddff">.</span><span class="token token method property-access" style="color:#c792ea">resetHandlers</span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#89ddff">)</span><span class="token token" style="color:#89ddff">)</span><span class="token token" style="color:#89ddff">;</span><span>
</span><span></span><span class="token token" style="color:#c792ea">afterAll</span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#89ddff">)</span><span> </span><span class="token token arrow" style="color:#89ddff">=&gt;</span><span> server</span><span class="token token" style="color:#89ddff">.</span><span class="token token method property-access" style="color:#c792ea">close</span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#89ddff">)</span><span class="token token" style="color:#89ddff">)</span><span class="token token" style="color:#89ddff">;</span><span>
</span>
<span></span><span class="token token" style="color:#c792ea">describe</span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#c3e88d">&#x27;Render component correctly after data loaded&#x27;</span><span class="token token" style="color:#89ddff">,</span><span> </span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#89ddff">)</span><span> </span><span class="token token arrow" style="color:#89ddff">=&gt;</span><span> </span><span class="token token" style="color:#89ddff">{</span><span>
</span><span>    </span><span class="token token" style="color:#c792ea">test</span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#c3e88d">&#x27;Home component render correctly&#x27;</span><span class="token token" style="color:#89ddff">,</span><span> </span><span class="token token" style="color:#c792ea;font-style:italic">async</span><span> </span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#89ddff">)</span><span> </span><span class="token token arrow" style="color:#89ddff">=&gt;</span><span> </span><span class="token token" style="color:#89ddff">{</span><span>
</span><span>        </span><span class="token token" style="color:#c792ea">render</span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#89ddff">&lt;</span><span class="token token" style="color:#f2ff00">HomeComponent</span><span class="token token" style="color:#89ddff">/&gt;</span><span class="token token" style="color:#89ddff">)</span><span>
</span>
<span>        </span><span class="token token control-flow" style="color:#c792ea;font-style:italic">await</span><span> userEvent</span><span class="token token" style="color:#89ddff">.</span><span class="token token method property-access" style="color:#c792ea">click</span><span class="token token" style="color:#89ddff">(</span><span>screen</span><span class="token token" style="color:#89ddff">.</span><span class="token token method property-access" style="color:#c792ea">getByText</span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#c3e88d">&#x27;Load Nickname&#x27;</span><span class="token token" style="color:#89ddff">)</span><span class="token token" style="color:#89ddff">)</span><span class="token token" style="color:#89ddff">;</span><span>
</span><span>        </span><span class="token token" style="color:#c792ea">expect</span><span class="token token" style="color:#89ddff">(</span><span>screen</span><span class="token token" style="color:#89ddff">.</span><span class="token token method property-access" style="color:#c792ea">getByRole</span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#c3e88d">&#x27;span&#x27;</span><span class="token token" style="color:#89ddff">)</span><span class="token token" style="color:#89ddff">)</span><span class="token token" style="color:#89ddff">.</span><span class="token token method property-access" style="color:#c792ea">toHaveTextContent</span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#c3e88d">&#x27;Hello world&#x27;</span><span class="token token" style="color:#89ddff">)</span><span>
</span><span>    </span><span class="token token" style="color:#89ddff">}</span><span class="token token" style="color:#89ddff">)</span><span>
</span><span></span><span class="token token" style="color:#89ddff">}</span><span class="token token" style="color:#89ddff">)</span><span>
</span></code></pre></div></pre>
<p class=" code-block__paragraph">By using mws, we can setup a server mock for all APIs in a file, and we can use it easily.</p>
<div class="code-block__title">responseData.js</div>
<pre><div class="code-block__block"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 448 512" class="code-block__copy-func" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M433.941 65.941l-51.882-51.882A48 48 0 0 0 348.118 0H176c-26.51 0-48 21.49-48 48v48H48c-26.51 0-48 21.49-48 48v320c0 26.51 21.49 48 48 48h224c26.51 0 48-21.49 48-48v-48h80c26.51 0 48-21.49 48-48V99.882a48 48 0 0 0-14.059-33.941zM266 464H54a6 6 0 0 1-6-6V150a6 6 0 0 1 6-6h74v224c0 26.51 21.49 48 48 48h96v42a6 6 0 0 1-6 6zm128-96H182a6 6 0 0 1-6-6V54a6 6 0 0 1 6-6h106v88c0 13.255 10.745 24 24 24h88v202a6 6 0 0 1-6 6zm6-256h-64V48h9.632c1.591 0 3.117.632 4.243 1.757l48.368 48.368a6 6 0 0 1 1.757 4.243V112z"></path></svg><pre style="text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;color:#c3cee3;background:#263238;font-family:Roboto Mono, monospace;font-size:1em;line-height:1.5em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;overflow:auto;position:relative;margin:0.5em 0;padding:1.25em 1em"><code class="language-ts" style="text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;color:#c3cee3;background:#263238;font-family:Roboto Mono, monospace;font-size:1em;line-height:1.5em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token token module" style="color:#c792ea;font-style:italic">export</span><span> </span><span class="token token" style="color:#c792ea;font-style:italic">const</span><span> greetingResponse </span><span class="token token" style="color:#89ddff">=</span><span> </span><span class="token token" style="color:#89ddff">{</span><span>
</span><span>    nickName</span><span class="token token" style="color:#89ddff">:</span><span> </span><span class="token token" style="color:#c3e88d">&quot;Hello World&quot;</span><span class="token token" style="color:#89ddff">,</span><span>
</span><span></span><span class="token token" style="color:#89ddff">}</span><span class="token token" style="color:#89ddff">;</span><span>
</span><span></span><span class="token token module" style="color:#c792ea;font-style:italic">export</span><span> </span><span class="token token" style="color:#c792ea;font-style:italic">const</span><span> greetingErr </span><span class="token token" style="color:#89ddff">=</span><span> </span><span class="token token" style="color:#89ddff">{</span><span>
</span><span>    code</span><span class="token token" style="color:#89ddff">:</span><span> </span><span class="token token" style="color:#c3e88d">&quot;server.interupts&quot;</span><span class="token token" style="color:#89ddff">,</span><span>
</span><span>    message</span><span class="token token" style="color:#89ddff">:</span><span> </span><span class="token token" style="color:#c3e88d">&quot;Sorry, the server interupts, please try later!&quot;</span><span class="token token" style="color:#89ddff">,</span><span>
</span><span></span><span class="token token" style="color:#89ddff">}</span><span class="token token" style="color:#89ddff">;</span><span>
</span></code></pre></div></pre>
<div class="code-block__title">mockServerSetup.js</div>
<pre><div class="code-block__block"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 448 512" class="code-block__copy-func" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M433.941 65.941l-51.882-51.882A48 48 0 0 0 348.118 0H176c-26.51 0-48 21.49-48 48v48H48c-26.51 0-48 21.49-48 48v320c0 26.51 21.49 48 48 48h224c26.51 0 48-21.49 48-48v-48h80c26.51 0 48-21.49 48-48V99.882a48 48 0 0 0-14.059-33.941zM266 464H54a6 6 0 0 1-6-6V150a6 6 0 0 1 6-6h74v224c0 26.51 21.49 48 48 48h96v42a6 6 0 0 1-6 6zm128-96H182a6 6 0 0 1-6-6V54a6 6 0 0 1 6-6h106v88c0 13.255 10.745 24 24 24h88v202a6 6 0 0 1-6 6zm6-256h-64V48h9.632c1.591 0 3.117.632 4.243 1.757l48.368 48.368a6 6 0 0 1 1.757 4.243V112z"></path></svg><pre style="text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;color:#c3cee3;background:#263238;font-family:Roboto Mono, monospace;font-size:1em;line-height:1.5em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;overflow:auto;position:relative;margin:0.5em 0;padding:1.25em 1em"><code class="language-ts" style="text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;color:#c3cee3;background:#263238;font-family:Roboto Mono, monospace;font-size:1em;line-height:1.5em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token token module" style="color:#c792ea;font-style:italic">import</span><span> </span><span class="token token imports" style="color:#89ddff">{</span><span class="token token imports"> setupServer </span><span class="token token imports" style="color:#89ddff">}</span><span> </span><span class="token token module" style="color:#c792ea;font-style:italic">from</span><span> </span><span class="token token" style="color:#c3e88d">&quot;msw/node&quot;</span><span class="token token" style="color:#89ddff">;</span><span>
</span><span></span><span class="token token module" style="color:#c792ea;font-style:italic">import</span><span> </span><span class="token token imports" style="color:#89ddff">{</span><span class="token token imports"> rest </span><span class="token token imports" style="color:#89ddff">}</span><span> </span><span class="token token module" style="color:#c792ea;font-style:italic">from</span><span> </span><span class="token token" style="color:#c3e88d">&quot;msw&quot;</span><span class="token token" style="color:#89ddff">;</span><span>
</span><span></span><span class="token token module" style="color:#c792ea;font-style:italic">import</span><span> </span><span class="token token imports" style="color:#89ddff">{</span><span class="token token imports"> greetingErr</span><span class="token token imports" style="color:#89ddff">,</span><span class="token token imports"> greetingResponse </span><span class="token token imports" style="color:#89ddff">}</span><span> </span><span class="token token module" style="color:#c792ea;font-style:italic">from</span><span> </span><span class="token token" style="color:#c3e88d">&quot;./responseData&quot;</span><span class="token token" style="color:#89ddff">;</span><span>
</span>
<span></span><span class="token token" style="color:#c792ea;font-style:italic">const</span><span> </span><span class="token token maybe-class-name">ApiPaths</span><span> </span><span class="token token" style="color:#89ddff">=</span><span> </span><span class="token token" style="color:#89ddff">{</span><span>
</span><span>    </span><span class="token token" style="color:#c792ea">GREETING</span><span class="token token" style="color:#89ddff">:</span><span> </span><span class="token token" style="color:#c3e88d">&quot;/greeting&quot;</span><span class="token token" style="color:#89ddff">,</span><span>
</span><span></span><span class="token token" style="color:#89ddff">}</span><span class="token token" style="color:#89ddff">;</span><span>
</span>
<span></span><span class="token token" style="color:#c792ea;font-style:italic">const</span><span> </span><span class="token token maybe-class-name">HttpStatus</span><span> </span><span class="token token" style="color:#89ddff">=</span><span> </span><span class="token token" style="color:#89ddff">{</span><span>
</span><span>    </span><span class="token token" style="color:#c792ea">SUCCESS</span><span class="token token" style="color:#89ddff">:</span><span> </span><span class="token token" style="color:#fd9170">200</span><span class="token token" style="color:#89ddff">,</span><span>
</span><span>    </span><span class="token token" style="color:#c792ea">BAD_REQUEST</span><span class="token token" style="color:#89ddff">:</span><span> </span><span class="token token" style="color:#fd9170">400</span><span class="token token" style="color:#89ddff">,</span><span>
</span><span></span><span class="token token" style="color:#89ddff">}</span><span class="token token" style="color:#89ddff">;</span><span>
</span>
<span></span><span class="token token" style="color:#c792ea;font-style:italic">const</span><span> </span><span class="token token maybe-class-name">HttpMethod</span><span> </span><span class="token token" style="color:#89ddff">=</span><span> </span><span class="token token" style="color:#89ddff">{</span><span>
</span><span>    </span><span class="token token" style="color:#c792ea">GET</span><span class="token token" style="color:#89ddff">:</span><span> </span><span class="token token" style="color:#c3e88d">&quot;get&quot;</span><span class="token token" style="color:#89ddff">,</span><span>
</span><span>    </span><span class="token token" style="color:#c792ea">POST</span><span class="token token" style="color:#89ddff">:</span><span> </span><span class="token token" style="color:#c3e88d">&quot;post&quot;</span><span class="token token" style="color:#89ddff">,</span><span>
</span><span>    </span><span class="token token" style="color:#c792ea">PUT</span><span class="token token" style="color:#89ddff">:</span><span> </span><span class="token token" style="color:#c3e88d">&quot;put&quot;</span><span class="token token" style="color:#89ddff">,</span><span>
</span><span>    </span><span class="token token" style="color:#c792ea">DELETE</span><span class="token token" style="color:#89ddff">:</span><span> </span><span class="token token" style="color:#c3e88d">&quot;delete&quot;</span><span class="token token" style="color:#89ddff">,</span><span>
</span><span></span><span class="token token" style="color:#89ddff">}</span><span class="token token" style="color:#89ddff">;</span><span>
</span>
<span></span><span class="token token" style="color:#c792ea;font-style:italic">const</span><span> paths </span><span class="token token" style="color:#89ddff">=</span><span> </span><span class="token token" style="color:#89ddff">{</span><span class="token token" style="color:#89ddff">}</span><span class="token token" style="color:#89ddff">;</span><span>
</span>
<span></span><span class="token token" style="color:#c792ea;font-style:italic">const</span><span> server </span><span class="token token" style="color:#89ddff">=</span><span> </span><span class="token token" style="color:#c792ea">setupServer</span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#89ddff">)</span><span class="token token" style="color:#89ddff">;</span><span>
</span>
<span></span><span class="token token" style="color:#c792ea;font-style:italic">const</span><span> </span><span class="token token function-variable" style="color:#c792ea">getKey</span><span> </span><span class="token token" style="color:#89ddff">=</span><span> </span><span class="token token" style="color:#89ddff">(</span><span>path</span><span class="token token" style="color:#89ddff">,</span><span> method</span><span class="token token" style="color:#89ddff">,</span><span> status</span><span class="token token" style="color:#89ddff">,</span><span> code</span><span class="token token" style="color:#89ddff">)</span><span> </span><span class="token token arrow" style="color:#89ddff">=&gt;</span><span> </span><span class="token token" style="color:#89ddff">{</span><span>
</span><span>    </span><span class="token token control-flow" style="color:#c792ea;font-style:italic">return</span><span> </span><span class="token token template-string template-punctuation" style="color:#c3e88d">`</span><span class="token token template-string interpolation interpolation-punctuation" style="color:#89ddff">${</span><span class="token token template-string interpolation">path</span><span class="token token template-string interpolation interpolation-punctuation" style="color:#89ddff">}</span><span class="token token template-string" style="color:#c3e88d">.</span><span class="token token template-string interpolation interpolation-punctuation" style="color:#89ddff">${</span><span class="token token template-string interpolation">method</span><span class="token token template-string interpolation interpolation-punctuation" style="color:#89ddff">}</span><span class="token token template-string" style="color:#c3e88d">.</span><span class="token token template-string interpolation interpolation-punctuation" style="color:#89ddff">${</span><span class="token token template-string interpolation">status</span><span class="token token template-string interpolation interpolation-punctuation" style="color:#89ddff">}</span><span class="token token template-string" style="color:#c3e88d">.</span><span class="token token template-string interpolation interpolation-punctuation" style="color:#89ddff">${</span><span class="token token template-string interpolation">code </span><span class="token token template-string interpolation" style="color:#89ddff">||</span><span class="token token template-string interpolation"> </span><span class="token token template-string interpolation" style="color:#c3e88d">&quot;&quot;</span><span class="token token template-string interpolation interpolation-punctuation" style="color:#89ddff">}</span><span class="token token template-string template-punctuation" style="color:#c3e88d">`</span><span class="token token" style="color:#89ddff">;</span><span>
</span><span></span><span class="token token" style="color:#89ddff">}</span><span class="token token" style="color:#89ddff">;</span><span>
</span>
<span></span><span class="token token" style="color:#c792ea;font-style:italic">const</span><span> </span><span class="token token function-variable" style="color:#c792ea">use</span><span> </span><span class="token token" style="color:#89ddff">=</span><span> </span><span class="token token" style="color:#89ddff">(</span><span>path</span><span class="token token" style="color:#89ddff">,</span><span> method</span><span class="token token" style="color:#89ddff">,</span><span> status</span><span class="token token" style="color:#89ddff">,</span><span> code</span><span class="token token" style="color:#89ddff">)</span><span> </span><span class="token token arrow" style="color:#89ddff">=&gt;</span><span> </span><span class="token token" style="color:#89ddff">{</span><span>
</span><span>    </span><span class="token token control-flow" style="color:#c792ea;font-style:italic">switch</span><span> </span><span class="token token" style="color:#89ddff">(</span><span>method</span><span class="token token" style="color:#89ddff">)</span><span> </span><span class="token token" style="color:#89ddff">{</span><span>
</span><span>        </span><span class="token token" style="color:#c792ea;font-style:italic">case</span><span> </span><span class="token token maybe-class-name">HttpMethod</span><span class="token token" style="color:#89ddff">.</span><span class="token token" style="color:#c792ea">GET</span><span class="token token" style="color:#89ddff">:</span><span> </span><span class="token token" style="color:#89ddff">{</span><span>
</span><span>            server</span><span class="token token" style="color:#89ddff">.</span><span class="token token method property-access" style="color:#c792ea">use</span><span class="token token" style="color:#89ddff">(</span><span>rest</span><span class="token token" style="color:#89ddff">.</span><span class="token token method property-access" style="color:#c792ea">get</span><span class="token token" style="color:#89ddff">(</span><span>path</span><span class="token token" style="color:#89ddff">,</span><span> paths</span><span class="token token" style="color:#89ddff">[</span><span class="token token" style="color:#c792ea">getKey</span><span class="token token" style="color:#89ddff">(</span><span>path</span><span class="token token" style="color:#89ddff">,</span><span> method</span><span class="token token" style="color:#89ddff">,</span><span> status</span><span class="token token" style="color:#89ddff">,</span><span> code</span><span class="token token" style="color:#89ddff">)</span><span class="token token" style="color:#89ddff">]</span><span class="token token" style="color:#89ddff">)</span><span class="token token" style="color:#89ddff">)</span><span class="token token" style="color:#89ddff">;</span><span>
</span><span>            </span><span class="token token control-flow" style="color:#c792ea;font-style:italic">break</span><span class="token token" style="color:#89ddff">;</span><span>
</span><span>        </span><span class="token token" style="color:#89ddff">}</span><span>
</span><span>        </span><span class="token token module" style="color:#c792ea;font-style:italic">default</span><span class="token token" style="color:#89ddff">:</span><span>
</span><span>            </span><span class="token token console" style="color:#f2ff00">console</span><span class="token token" style="color:#89ddff">.</span><span class="token token method property-access" style="color:#c792ea">log</span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#c3e88d">&quot;No default&quot;</span><span class="token token" style="color:#89ddff">)</span><span class="token token" style="color:#89ddff">;</span><span>
</span><span>    </span><span class="token token" style="color:#89ddff">}</span><span>
</span><span></span><span class="token token" style="color:#89ddff">}</span><span class="token token" style="color:#89ddff">;</span><span>
</span>
<span></span><span class="token token" style="color:#c792ea;font-style:italic">const</span><span> </span><span class="token token function-variable" style="color:#c792ea">addToPaths</span><span> </span><span class="token token" style="color:#89ddff">=</span><span> </span><span class="token token" style="color:#89ddff">(</span><span>path</span><span class="token token" style="color:#89ddff">,</span><span> method</span><span class="token token" style="color:#89ddff">,</span><span> status</span><span class="token token" style="color:#89ddff">,</span><span> response</span><span class="token token" style="color:#89ddff">,</span><span> code</span><span class="token token" style="color:#89ddff">)</span><span> </span><span class="token token arrow" style="color:#89ddff">=&gt;</span><span> </span><span class="token token" style="color:#89ddff">{</span><span>
</span><span>    </span><span class="token token" style="color:#c792ea;font-style:italic">const</span><span> </span><span class="token token function-variable" style="color:#c792ea">value</span><span> </span><span class="token token" style="color:#89ddff">=</span><span> </span><span class="token token" style="color:#89ddff">(</span><span>req</span><span class="token token" style="color:#89ddff">,</span><span> res</span><span class="token token" style="color:#89ddff">,</span><span> ctx</span><span class="token token" style="color:#89ddff">)</span><span> </span><span class="token token arrow" style="color:#89ddff">=&gt;</span><span> </span><span class="token token" style="color:#89ddff">{</span><span>
</span><span>        </span><span class="token token control-flow" style="color:#c792ea;font-style:italic">return</span><span> </span><span class="token token" style="color:#c792ea">res</span><span class="token token" style="color:#89ddff">(</span><span>ctx</span><span class="token token" style="color:#89ddff">.</span><span class="token token method property-access" style="color:#c792ea">status</span><span class="token token" style="color:#89ddff">(</span><span>status</span><span class="token token" style="color:#89ddff">)</span><span class="token token" style="color:#89ddff">,</span><span> ctx</span><span class="token token" style="color:#89ddff">.</span><span class="token token method property-access" style="color:#c792ea">json</span><span class="token token" style="color:#89ddff">(</span><span>response</span><span class="token token" style="color:#89ddff">)</span><span class="token token" style="color:#89ddff">)</span><span class="token token" style="color:#89ddff">;</span><span>
</span><span>    </span><span class="token token" style="color:#89ddff">}</span><span class="token token" style="color:#89ddff">;</span><span>
</span><span>    paths</span><span class="token token" style="color:#89ddff">[</span><span class="token token" style="color:#c792ea">getKey</span><span class="token token" style="color:#89ddff">(</span><span>path</span><span class="token token" style="color:#89ddff">,</span><span> method</span><span class="token token" style="color:#89ddff">,</span><span> status</span><span class="token token" style="color:#89ddff">,</span><span> code</span><span class="token token" style="color:#89ddff">)</span><span class="token token" style="color:#89ddff">]</span><span> </span><span class="token token" style="color:#89ddff">=</span><span> value</span><span class="token token" style="color:#89ddff">;</span><span>
</span><span>    </span><span class="token token" style="color:#c792ea">use</span><span class="token token" style="color:#89ddff">(</span><span>path</span><span class="token token" style="color:#89ddff">,</span><span> method</span><span class="token token" style="color:#89ddff">,</span><span> status</span><span class="token token" style="color:#89ddff">)</span><span class="token token" style="color:#89ddff">;</span><span>
</span><span></span><span class="token token" style="color:#89ddff">}</span><span class="token token" style="color:#89ddff">;</span><span>
</span>
<span></span><span class="token token" style="color:#c792ea;font-style:italic">const</span><span> </span><span class="token token function-variable" style="color:#c792ea">initDefaultPaths</span><span> </span><span class="token token" style="color:#89ddff">=</span><span> </span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#89ddff">)</span><span> </span><span class="token token arrow" style="color:#89ddff">=&gt;</span><span> </span><span class="token token" style="color:#89ddff">{</span><span>
</span><span>    </span><span class="token token" style="color:#c792ea">addToPaths</span><span class="token token" style="color:#89ddff">(</span><span>
</span><span>        </span><span class="token token maybe-class-name">ApiPaths</span><span class="token token" style="color:#89ddff">.</span><span class="token token" style="color:#c792ea">GREETING</span><span class="token token" style="color:#89ddff">,</span><span>
</span><span>        </span><span class="token token maybe-class-name">HttpMethod</span><span class="token token" style="color:#89ddff">.</span><span class="token token" style="color:#c792ea">GET</span><span class="token token" style="color:#89ddff">,</span><span>
</span><span>        </span><span class="token token maybe-class-name">HttpStatus</span><span class="token token" style="color:#89ddff">.</span><span class="token token" style="color:#c792ea">SUCCESS</span><span class="token token" style="color:#89ddff">,</span><span>
</span>        greetingResponse
<span>    </span><span class="token token" style="color:#89ddff">)</span><span class="token token" style="color:#89ddff">;</span><span>
</span><span>    </span><span class="token token" style="color:#c792ea">addToPaths</span><span class="token token" style="color:#89ddff">(</span><span>
</span><span>        </span><span class="token token maybe-class-name">ApiPaths</span><span class="token token" style="color:#89ddff">.</span><span class="token token" style="color:#c792ea">GREETING</span><span class="token token" style="color:#89ddff">,</span><span>
</span><span>        </span><span class="token token maybe-class-name">HttpMethod</span><span class="token token" style="color:#89ddff">.</span><span class="token token" style="color:#c792ea">GET</span><span class="token token" style="color:#89ddff">,</span><span>
</span><span>        </span><span class="token token maybe-class-name">HttpStatus</span><span class="token token" style="color:#89ddff">.</span><span class="token token" style="color:#c792ea">BAD_REQUEST</span><span class="token token" style="color:#89ddff">,</span><span>
</span>        greetingErr
<span>    </span><span class="token token" style="color:#89ddff">)</span><span class="token token" style="color:#89ddff">;</span><span>
</span><span></span><span class="token token" style="color:#89ddff">}</span><span class="token token" style="color:#89ddff">;</span><span>
</span>
<span></span><span class="token token module" style="color:#c792ea;font-style:italic">export</span><span> </span><span class="token token exports" style="color:#89ddff">{</span><span class="token token exports">
</span><span class="token token exports">    </span><span class="token token exports maybe-class-name">ApiPaths</span><span class="token token exports" style="color:#89ddff">,</span><span class="token token exports">
</span><span class="token token exports">    </span><span class="token token exports maybe-class-name">HttpStatus</span><span class="token token exports" style="color:#89ddff">,</span><span class="token token exports">
</span><span class="token token exports">    </span><span class="token token exports maybe-class-name">HttpMethod</span><span class="token token exports" style="color:#89ddff">,</span><span class="token token exports">
</span><span class="token token exports">    server</span><span class="token token exports" style="color:#89ddff">,</span><span class="token token exports">
</span><span class="token token exports">    initDefaultPaths</span><span class="token token exports" style="color:#89ddff">,</span><span class="token token exports">
</span><span class="token token exports">    addToPaths</span><span class="token token exports" style="color:#89ddff">,</span><span class="token token exports">
</span><span class="token token exports">    use</span><span class="token token exports" style="color:#89ddff">,</span><span class="token token exports">
</span><span class="token token exports"></span><span class="token token exports" style="color:#89ddff">}</span><span class="token token" style="color:#89ddff">;</span><span>
</span></code></pre></div></pre>
<p class=" code-block__paragraph">Now we can easy to use it in test like example below</p>
<div class="code-block__title">MockApiComponent.js</div>
<pre><div class="code-block__block"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 448 512" class="code-block__copy-func" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M433.941 65.941l-51.882-51.882A48 48 0 0 0 348.118 0H176c-26.51 0-48 21.49-48 48v48H48c-26.51 0-48 21.49-48 48v320c0 26.51 21.49 48 48 48h224c26.51 0 48-21.49 48-48v-48h80c26.51 0 48-21.49 48-48V99.882a48 48 0 0 0-14.059-33.941zM266 464H54a6 6 0 0 1-6-6V150a6 6 0 0 1 6-6h74v224c0 26.51 21.49 48 48 48h96v42a6 6 0 0 1-6 6zm128-96H182a6 6 0 0 1-6-6V54a6 6 0 0 1 6-6h106v88c0 13.255 10.745 24 24 24h88v202a6 6 0 0 1-6 6zm6-256h-64V48h9.632c1.591 0 3.117.632 4.243 1.757l48.368 48.368a6 6 0 0 1 1.757 4.243V112z"></path></svg><pre style="text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;color:#c3cee3;background:#263238;font-family:Roboto Mono, monospace;font-size:1em;line-height:1.5em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;overflow:auto;position:relative;margin:0.5em 0;padding:1.25em 1em"><code class="language-tsx" style="text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;color:#c3cee3;background:#263238;font-family:Roboto Mono, monospace;font-size:1em;line-height:1.5em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token token" style="color:#546e7a">/* eslint-disable jest/expect-expect */</span><span>
</span><span></span><span class="token token" style="color:#546e7a">/* eslint-disable jest/no-disabled-tests */</span><span>
</span><span></span><span class="token token module" style="color:#c792ea;font-style:italic">import</span><span> </span><span class="token token imports maybe-class-name">React</span><span> </span><span class="token token module" style="color:#c792ea;font-style:italic">from</span><span> </span><span class="token token" style="color:#c3e88d">&quot;react&quot;</span><span class="token token" style="color:#89ddff">;</span><span>
</span><span></span><span class="token token module" style="color:#c792ea;font-style:italic">import</span><span> </span><span class="token token imports" style="color:#89ddff">{</span><span class="token token imports"> </span><span class="token token imports maybe-class-name">MockApiComponent</span><span class="token token imports"> </span><span class="token token imports" style="color:#89ddff">}</span><span> </span><span class="token token module" style="color:#c792ea;font-style:italic">from</span><span> </span><span class="token token" style="color:#c3e88d">&quot;./MockApiComponent&quot;</span><span class="token token" style="color:#89ddff">;</span><span>
</span><span></span><span class="token token module" style="color:#c792ea;font-style:italic">import</span><span> </span><span class="token token imports" style="color:#89ddff">{</span><span class="token token imports"> render</span><span class="token token imports" style="color:#89ddff">,</span><span class="token token imports"> screen</span><span class="token token imports" style="color:#89ddff">,</span><span class="token token imports"> waitFor </span><span class="token token imports" style="color:#89ddff">}</span><span> </span><span class="token token module" style="color:#c792ea;font-style:italic">from</span><span> </span><span class="token token" style="color:#c3e88d">&quot;@testing-library/react&quot;</span><span class="token token" style="color:#89ddff">;</span><span>
</span><span></span><span class="token token module" style="color:#c792ea;font-style:italic">import</span><span> </span><span class="token token imports" style="color:#89ddff">{</span><span class="token token imports"> greetingResponse </span><span class="token token imports" style="color:#89ddff">}</span><span> </span><span class="token token module" style="color:#c792ea;font-style:italic">from</span><span> </span><span class="token token" style="color:#c3e88d">&quot;../mockServerSetup/responseData&quot;</span><span class="token token" style="color:#89ddff">;</span><span>
</span><span></span><span class="token token module" style="color:#c792ea;font-style:italic">import</span><span> </span><span class="token token imports" style="color:#89ddff">{</span><span class="token token imports">
</span><span class="token token imports">    server</span><span class="token token imports" style="color:#89ddff">,</span><span class="token token imports">
</span><span class="token token imports">    initDefaultPaths</span><span class="token token imports" style="color:#89ddff">,</span><span class="token token imports">
</span><span class="token token imports">    use</span><span class="token token imports" style="color:#89ddff">,</span><span class="token token imports">
</span><span class="token token imports">    </span><span class="token token imports maybe-class-name">ApiPaths</span><span class="token token imports" style="color:#89ddff">,</span><span class="token token imports">
</span><span class="token token imports">    </span><span class="token token imports maybe-class-name">HttpMethod</span><span class="token token imports" style="color:#89ddff">,</span><span class="token token imports">
</span><span class="token token imports">    </span><span class="token token imports maybe-class-name">HttpStatus</span><span class="token token imports" style="color:#89ddff">,</span><span class="token token imports">
</span><span class="token token imports"></span><span class="token token imports" style="color:#89ddff">}</span><span> </span><span class="token token module" style="color:#c792ea;font-style:italic">from</span><span> </span><span class="token token" style="color:#c3e88d">&quot;../mockServerSetup&quot;</span><span class="token token" style="color:#89ddff">;</span><span>
</span>
<span></span><span class="token token" style="color:#c792ea">initDefaultPaths</span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#89ddff">)</span><span class="token token" style="color:#89ddff">;</span><span>
</span>
<span></span><span class="token token" style="color:#c792ea">beforeAll</span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#89ddff">)</span><span> </span><span class="token token arrow" style="color:#89ddff">=&gt;</span><span> server</span><span class="token token" style="color:#89ddff">.</span><span class="token token method property-access" style="color:#c792ea">listen</span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#89ddff">)</span><span class="token token" style="color:#89ddff">)</span><span class="token token" style="color:#89ddff">;</span><span>
</span><span></span><span class="token token" style="color:#c792ea">afterEach</span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#89ddff">)</span><span> </span><span class="token token arrow" style="color:#89ddff">=&gt;</span><span> server</span><span class="token token" style="color:#89ddff">.</span><span class="token token method property-access" style="color:#c792ea">resetHandlers</span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#89ddff">)</span><span class="token token" style="color:#89ddff">)</span><span class="token token" style="color:#89ddff">;</span><span>
</span><span></span><span class="token token" style="color:#c792ea">afterAll</span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#89ddff">)</span><span> </span><span class="token token arrow" style="color:#89ddff">=&gt;</span><span> server</span><span class="token token" style="color:#89ddff">.</span><span class="token token method property-access" style="color:#c792ea">close</span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#89ddff">)</span><span class="token token" style="color:#89ddff">)</span><span class="token token" style="color:#89ddff">;</span><span>
</span>
<!-- -->
<span></span><span class="token token" style="color:#c792ea">describe</span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#c3e88d">&quot;MockAPIWithMsw&quot;</span><span class="token token" style="color:#89ddff">,</span><span> </span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#89ddff">)</span><span> </span><span class="token token arrow" style="color:#89ddff">=&gt;</span><span> </span><span class="token token" style="color:#89ddff">{</span><span>
</span>
<span>    </span><span class="token token" style="color:#c792ea">test</span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#c3e88d">&quot;render with api calling&quot;</span><span class="token token" style="color:#89ddff">,</span><span> </span><span class="token token" style="color:#c792ea;font-style:italic">async</span><span> </span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#89ddff">)</span><span> </span><span class="token token arrow" style="color:#89ddff">=&gt;</span><span> </span><span class="token token" style="color:#89ddff">{</span><span>
</span><span>        </span><span class="token token" style="color:#c792ea">use</span><span class="token token" style="color:#89ddff">(</span><span class="token token maybe-class-name">ApiPaths</span><span class="token token" style="color:#89ddff">.</span><span class="token token" style="color:#c792ea">GREETING</span><span class="token token" style="color:#89ddff">,</span><span> </span><span class="token token maybe-class-name">HttpMethod</span><span class="token token" style="color:#89ddff">.</span><span class="token token" style="color:#c792ea">GET</span><span class="token token" style="color:#89ddff">,</span><span> </span><span class="token token maybe-class-name">HttpStatus</span><span class="token token" style="color:#89ddff">.</span><span class="token token" style="color:#c792ea">SUCCESS</span><span class="token token" style="color:#89ddff">)</span><span class="token token" style="color:#89ddff">;</span><span>
</span><span>        </span><span class="token token" style="color:#c792ea">render</span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#89ddff">&lt;</span><span class="token token" style="color:#f2ff00">MockApiComponent</span><span class="token token" style="color:#89ddff">/&gt;</span><span class="token token" style="color:#89ddff">)</span><span class="token token" style="color:#89ddff">;</span><span>
</span>
<span>        </span><span class="token token" style="color:#546e7a">// Only one assertion within waitFor https://kentcdodds.com/blog/common-mistakes-with-react-testing-library</span><span>
</span><span>        </span><span class="token token control-flow" style="color:#c792ea;font-style:italic">await</span><span> </span><span class="token token" style="color:#c792ea">waitFor</span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#c792ea;font-style:italic">async</span><span> </span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#89ddff">)</span><span> </span><span class="token token arrow" style="color:#89ddff">=&gt;</span><span> </span><span class="token token" style="color:#89ddff">{</span><span>
</span><span>            </span><span class="token token" style="color:#c792ea">expect</span><span class="token token" style="color:#89ddff">(</span><span>screen</span><span class="token token" style="color:#89ddff">.</span><span class="token token method property-access" style="color:#c792ea">getByTestId</span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#c3e88d">&quot;nickName&quot;</span><span class="token token" style="color:#89ddff">)</span><span class="token token" style="color:#89ddff">)</span><span class="token token" style="color:#89ddff">.</span><span class="token token method property-access" style="color:#c792ea">toHaveTextContent</span><span class="token token" style="color:#89ddff">(</span><span>
</span><span>                greetingResponse</span><span class="token token" style="color:#89ddff">.</span><span class="token token property-access">nickName</span><span>
</span><span>            </span><span class="token token" style="color:#89ddff">)</span><span class="token token" style="color:#89ddff">;</span><span>
</span><span>        </span><span class="token token" style="color:#89ddff">}</span><span class="token token" style="color:#89ddff">)</span><span class="token token" style="color:#89ddff">;</span><span>
</span><span>    </span><span class="token token" style="color:#89ddff">}</span><span class="token token" style="color:#89ddff">)</span><span class="token token" style="color:#89ddff">;</span><span>
</span><span></span><span class="token token" style="color:#89ddff">}</span><span class="token token" style="color:#89ddff">)</span><span class="token token" style="color:#89ddff">;</span><span>
</span>
</code></pre></div></pre>
<h3>Mocking with jest mock</h3>
<p class=" code-block__paragraph">In this example, we mock the get method of axios to return a resolved value. This way just works when a component
calls an API by using axios.</p>
<pre><div class="code-block__block"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 448 512" class="code-block__copy-func" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M433.941 65.941l-51.882-51.882A48 48 0 0 0 348.118 0H176c-26.51 0-48 21.49-48 48v48H48c-26.51 0-48 21.49-48 48v320c0 26.51 21.49 48 48 48h224c26.51 0 48-21.49 48-48v-48h80c26.51 0 48-21.49 48-48V99.882a48 48 0 0 0-14.059-33.941zM266 464H54a6 6 0 0 1-6-6V150a6 6 0 0 1 6-6h74v224c0 26.51 21.49 48 48 48h96v42a6 6 0 0 1-6 6zm128-96H182a6 6 0 0 1-6-6V54a6 6 0 0 1 6-6h106v88c0 13.255 10.745 24 24 24h88v202a6 6 0 0 1-6 6zm6-256h-64V48h9.632c1.591 0 3.117.632 4.243 1.757l48.368 48.368a6 6 0 0 1 1.757 4.243V112z"></path></svg><pre style="text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;color:#c3cee3;background:#263238;font-family:Roboto Mono, monospace;font-size:1em;line-height:1.5em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;overflow:auto;position:relative;margin:0.5em 0;padding:1.25em 1em"><code class="language-tsx" style="text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;color:#c3cee3;background:#263238;font-family:Roboto Mono, monospace;font-size:1em;line-height:1.5em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token token module" style="color:#c792ea;font-style:italic">import</span><span> </span><span class="token token imports">axios</span><span> </span><span class="token token module" style="color:#c792ea;font-style:italic">from</span><span> </span><span class="token token" style="color:#c3e88d">&#x27;axios&#x27;</span><span class="token token" style="color:#89ddff">;</span><span>
</span>
<span>jest</span><span class="token token" style="color:#89ddff">.</span><span class="token token method property-access" style="color:#c792ea">mock</span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#c3e88d">&#x27;axios&#x27;</span><span class="token token" style="color:#89ddff">)</span><span class="token token" style="color:#89ddff">;</span><span>
</span><span></span><span class="token token" style="color:#c792ea;font-style:italic">const</span><span> mockedAxios </span><span class="token token" style="color:#89ddff">=</span><span> axios </span><span class="token token module" style="color:#c792ea;font-style:italic">as</span><span> jest</span><span class="token token" style="color:#89ddff">.</span><span class="token token property-access maybe-class-name">Mocked</span><span class="token token" style="color:#89ddff">&lt;</span><span class="token token" style="color:#c792ea;font-style:italic">typeof</span><span> axios</span><span class="token token" style="color:#89ddff">&gt;</span><span class="token token" style="color:#89ddff">;</span><span>
</span>
<span></span><span class="token token" style="color:#c792ea">describe</span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#c3e88d">&#x27;Render component correctly after data loaded&#x27;</span><span class="token token" style="color:#89ddff">,</span><span> </span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#89ddff">)</span><span> </span><span class="token token arrow" style="color:#89ddff">=&gt;</span><span> </span><span class="token token" style="color:#89ddff">{</span><span>
</span><span>    </span><span class="token token" style="color:#c792ea">test</span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#c3e88d">&#x27;Home component render correctly&#x27;</span><span class="token token" style="color:#89ddff">,</span><span> </span><span class="token token" style="color:#c792ea;font-style:italic">async</span><span> </span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#89ddff">)</span><span> </span><span class="token token arrow" style="color:#89ddff">=&gt;</span><span> </span><span class="token token" style="color:#89ddff">{</span><span>
</span><span>        mockedAxios</span><span class="token token" style="color:#89ddff">.</span><span class="token token property-access">get</span><span class="token token" style="color:#89ddff">.</span><span class="token token method property-access" style="color:#c792ea">mockResolveValue</span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#89ddff">{</span><span> nickName</span><span class="token token" style="color:#89ddff">:</span><span> </span><span class="token token" style="color:#c3e88d">&#x27;hello World&#x27;</span><span> </span><span class="token token" style="color:#89ddff">}</span><span class="token token" style="color:#89ddff">)</span><span class="token token" style="color:#89ddff">;</span><span>
</span>
<span>        </span><span class="token token" style="color:#c792ea">render</span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#89ddff">&lt;</span><span class="token token" style="color:#f2ff00">HomeComponent</span><span class="token token" style="color:#89ddff">/&gt;</span><span class="token token" style="color:#89ddff">)</span><span>
</span>
<span>        </span><span class="token token control-flow" style="color:#c792ea;font-style:italic">await</span><span> userEvent</span><span class="token token" style="color:#89ddff">.</span><span class="token token method property-access" style="color:#c792ea">click</span><span class="token token" style="color:#89ddff">(</span><span>screen</span><span class="token token" style="color:#89ddff">.</span><span class="token token method property-access" style="color:#c792ea">getByText</span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#c3e88d">&#x27;Load Nickname&#x27;</span><span class="token token" style="color:#89ddff">)</span><span class="token token" style="color:#89ddff">)</span><span class="token token" style="color:#89ddff">;</span><span>
</span>
<span>        </span><span class="token token" style="color:#c792ea">expect</span><span class="token token" style="color:#89ddff">(</span><span>mockedAxios</span><span class="token token" style="color:#89ddff">.</span><span class="token token property-access">get</span><span class="token token" style="color:#89ddff">)</span><span class="token token" style="color:#89ddff">.</span><span class="token token method property-access" style="color:#c792ea">toHaveBeenCalled</span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#89ddff">)</span><span class="token token" style="color:#89ddff">;</span><span>
</span><span>        </span><span class="token token" style="color:#c792ea">expect</span><span class="token token" style="color:#89ddff">(</span><span>screen</span><span class="token token" style="color:#89ddff">.</span><span class="token token method property-access" style="color:#c792ea">getByRole</span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#c3e88d">&#x27;span&#x27;</span><span class="token token" style="color:#89ddff">)</span><span class="token token" style="color:#89ddff">)</span><span class="token token" style="color:#89ddff">.</span><span class="token token method property-access" style="color:#c792ea">toHaveTextContent</span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#c3e88d">&#x27;Hello world&#x27;</span><span class="token token" style="color:#89ddff">)</span><span class="token token" style="color:#89ddff">;</span><span>
</span><span>    </span><span class="token token" style="color:#89ddff">}</span><span class="token token" style="color:#89ddff">)</span><span>
</span><span></span><span class="token token" style="color:#89ddff">}</span><span class="token token" style="color:#89ddff">)</span><span>
</span></code></pre></div></pre>
<p class=" code-block__paragraph">So, how we can test the component that fetches data from multiple APIs, we can use <code value="mockImplementation" class="code-block__code">mockImplementation</code> of jest to do
it.</p>
<pre><div class="code-block__block"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 448 512" class="code-block__copy-func" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M433.941 65.941l-51.882-51.882A48 48 0 0 0 348.118 0H176c-26.51 0-48 21.49-48 48v48H48c-26.51 0-48 21.49-48 48v320c0 26.51 21.49 48 48 48h224c26.51 0 48-21.49 48-48v-48h80c26.51 0 48-21.49 48-48V99.882a48 48 0 0 0-14.059-33.941zM266 464H54a6 6 0 0 1-6-6V150a6 6 0 0 1 6-6h74v224c0 26.51 21.49 48 48 48h96v42a6 6 0 0 1-6 6zm128-96H182a6 6 0 0 1-6-6V54a6 6 0 0 1 6-6h106v88c0 13.255 10.745 24 24 24h88v202a6 6 0 0 1-6 6zm6-256h-64V48h9.632c1.591 0 3.117.632 4.243 1.757l48.368 48.368a6 6 0 0 1 1.757 4.243V112z"></path></svg><pre style="text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;color:#c3cee3;background:#263238;font-family:Roboto Mono, monospace;font-size:1em;line-height:1.5em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;overflow:auto;position:relative;margin:0.5em 0;padding:1.25em 1em"><code class="language-tsx" style="text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;color:#c3cee3;background:#263238;font-family:Roboto Mono, monospace;font-size:1em;line-height:1.5em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token token module" style="color:#c792ea;font-style:italic">import</span><span> </span><span class="token token imports">axios</span><span> </span><span class="token token module" style="color:#c792ea;font-style:italic">from</span><span> </span><span class="token token" style="color:#c3e88d">&#x27;axios&#x27;</span><span class="token token" style="color:#89ddff">;</span><span>
</span>
<span>jest</span><span class="token token" style="color:#89ddff">.</span><span class="token token method property-access" style="color:#c792ea">mock</span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#c3e88d">&#x27;axios&#x27;</span><span class="token token" style="color:#89ddff">)</span><span class="token token" style="color:#89ddff">;</span><span>
</span><span></span><span class="token token" style="color:#c792ea;font-style:italic">const</span><span> mockedAxios </span><span class="token token" style="color:#89ddff">=</span><span> axios </span><span class="token token module" style="color:#c792ea;font-style:italic">as</span><span> jest</span><span class="token token" style="color:#89ddff">.</span><span class="token token property-access maybe-class-name">Mocked</span><span class="token token" style="color:#89ddff">&lt;</span><span class="token token" style="color:#c792ea;font-style:italic">typeof</span><span> axios</span><span class="token token" style="color:#89ddff">&gt;</span><span class="token token" style="color:#89ddff">;</span><span>
</span>
<span></span><span class="token token" style="color:#c792ea">describe</span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#c3e88d">&#x27;Render component correctly after data loaded&#x27;</span><span class="token token" style="color:#89ddff">,</span><span> </span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#89ddff">)</span><span> </span><span class="token token arrow" style="color:#89ddff">=&gt;</span><span> </span><span class="token token" style="color:#89ddff">{</span><span>
</span><span>    </span><span class="token token" style="color:#c792ea">test</span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#c3e88d">&#x27;Home component render correctly&#x27;</span><span class="token token" style="color:#89ddff">,</span><span> </span><span class="token token" style="color:#c792ea;font-style:italic">async</span><span> </span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#89ddff">)</span><span> </span><span class="token token arrow" style="color:#89ddff">=&gt;</span><span> </span><span class="token token" style="color:#89ddff">{</span><span>
</span><span>        </span><span class="token token" style="color:#c792ea;font-style:italic">const</span><span> regexTemplate </span><span class="token token" style="color:#89ddff">=</span><span> </span><span class="token token" style="color:#89ddff">{</span><span>
</span><span>            </span><span class="token token string-property" style="color:#80cbc4">&#x27;greeting&#x27;</span><span class="token token" style="color:#89ddff">:</span><span> </span><span class="token token" style="color:#c3e88d">&#x27;/greeting/&#x27;</span><span class="token token" style="color:#89ddff">,</span><span>
</span><span>            </span><span class="token token string-property" style="color:#80cbc4">&#x27;greetingWithId&#x27;</span><span class="token token" style="color:#89ddff">:</span><span> </span><span class="token token" style="color:#c3e88d">&#x27;/greeting\/$/&#x27;</span><span>
</span><span>        </span><span class="token token" style="color:#89ddff">}</span><span>
</span><span>        mockedAxios</span><span class="token token" style="color:#89ddff">.</span><span class="token token property-access">get</span><span class="token token" style="color:#89ddff">.</span><span class="token token method property-access" style="color:#c792ea">mockImplementation</span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#89ddff">(</span><span>url</span><span class="token token" style="color:#89ddff">)</span><span> </span><span class="token token arrow" style="color:#89ddff">=&gt;</span><span> </span><span class="token token" style="color:#89ddff">{</span><span>
</span><span>            </span><span class="token token control-flow" style="color:#c792ea;font-style:italic">switch</span><span> </span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#c792ea">true</span><span class="token token" style="color:#89ddff">)</span><span> </span><span class="token token" style="color:#89ddff">{</span><span>
</span><span>                </span><span class="token token" style="color:#c792ea;font-style:italic">case</span><span> regexTemplate</span><span class="token token" style="color:#89ddff">[</span><span class="token token" style="color:#c3e88d">&#x27;greeting&#x27;</span><span class="token token" style="color:#89ddff">]</span><span class="token token" style="color:#89ddff">.</span><span class="token token method property-access" style="color:#c792ea">test</span><span class="token token" style="color:#89ddff">(</span><span>url</span><span class="token token" style="color:#89ddff">)</span><span class="token token" style="color:#89ddff">:</span><span>
</span><span>                    </span><span class="token token control-flow" style="color:#c792ea;font-style:italic">return</span><span> </span><span class="token token known-class-name" style="color:#f2ff00">Promise</span><span class="token token" style="color:#89ddff">.</span><span class="token token method property-access" style="color:#c792ea">resolve</span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#89ddff">{</span><span> data</span><span class="token token" style="color:#89ddff">:</span><span> </span><span class="token token" style="color:#89ddff">{</span><span> nickName</span><span class="token token" style="color:#89ddff">:</span><span> </span><span class="token token" style="color:#c3e88d">&#x27;Hello world&#x27;</span><span> </span><span class="token token" style="color:#89ddff">}</span><span> </span><span class="token token" style="color:#89ddff">}</span><span class="token token" style="color:#89ddff">)</span><span>
</span><span>                </span><span class="token token" style="color:#c792ea;font-style:italic">case</span><span> regexTemplate</span><span class="token token" style="color:#89ddff">[</span><span class="token token" style="color:#c3e88d">&#x27;greetingWithId&#x27;</span><span class="token token" style="color:#89ddff">]</span><span class="token token" style="color:#89ddff">.</span><span class="token token method property-access" style="color:#c792ea">test</span><span class="token token" style="color:#89ddff">(</span><span>url</span><span class="token token" style="color:#89ddff">)</span><span class="token token" style="color:#89ddff">:</span><span>
</span><span>                    </span><span class="token token control-flow" style="color:#c792ea;font-style:italic">return</span><span> </span><span class="token token known-class-name" style="color:#f2ff00">Promise</span><span class="token token" style="color:#89ddff">.</span><span class="token token method property-access" style="color:#c792ea">resolve</span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#89ddff">{</span><span> data</span><span class="token token" style="color:#89ddff">:</span><span> </span><span class="token token" style="color:#89ddff">{</span><span> nickName</span><span class="token token" style="color:#89ddff">:</span><span> </span><span class="token token" style="color:#c3e88d">&#x27;Hello world with id&#x27;</span><span> </span><span class="token token" style="color:#89ddff">}</span><span> </span><span class="token token" style="color:#89ddff">}</span><span class="token token" style="color:#89ddff">)</span><span>
</span><span>                </span><span class="token token module" style="color:#c792ea;font-style:italic">default</span><span class="token token" style="color:#89ddff">:</span><span>
</span><span>                    </span><span class="token token control-flow" style="color:#c792ea;font-style:italic">return</span><span> </span><span class="token token known-class-name" style="color:#f2ff00">Promise</span><span class="token token" style="color:#89ddff">.</span><span class="token token method property-access" style="color:#c792ea">reject</span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#c792ea;font-style:italic">new</span><span> </span><span class="token token known-class-name" style="color:#f2ff00">Error</span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#c3e88d">&#x27;not found&#x27;</span><span class="token token" style="color:#89ddff">)</span><span class="token token" style="color:#89ddff">)</span><span>
</span><span>            </span><span class="token token" style="color:#89ddff">}</span><span>
</span><span>        </span><span class="token token" style="color:#89ddff">}</span><span class="token token" style="color:#89ddff">)</span><span>
</span>
<span>        </span><span class="token token" style="color:#c792ea">render</span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#89ddff">&lt;</span><span class="token token" style="color:#f2ff00">HomeComponent</span><span class="token token" style="color:#89ddff">/&gt;</span><span class="token token" style="color:#89ddff">)</span><span>
</span>
<span>        </span><span class="token token control-flow" style="color:#c792ea;font-style:italic">await</span><span> userEvent</span><span class="token token" style="color:#89ddff">.</span><span class="token token method property-access" style="color:#c792ea">click</span><span class="token token" style="color:#89ddff">(</span><span>screen</span><span class="token token" style="color:#89ddff">.</span><span class="token token method property-access" style="color:#c792ea">getByText</span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#c3e88d">&#x27;Load Nickname&#x27;</span><span class="token token" style="color:#89ddff">)</span><span class="token token" style="color:#89ddff">)</span><span class="token token" style="color:#89ddff">;</span><span>
</span>
<span>        </span><span class="token token" style="color:#c792ea">expect</span><span class="token token" style="color:#89ddff">(</span><span>mockedAxios</span><span class="token token" style="color:#89ddff">.</span><span class="token token property-access">get</span><span class="token token" style="color:#89ddff">)</span><span class="token token" style="color:#89ddff">.</span><span class="token token method property-access" style="color:#c792ea">toHaveBeenCalled</span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#89ddff">)</span><span class="token token" style="color:#89ddff">;</span><span>
</span><span>        </span><span class="token token" style="color:#c792ea">expect</span><span class="token token" style="color:#89ddff">(</span><span>screen</span><span class="token token" style="color:#89ddff">.</span><span class="token token method property-access" style="color:#c792ea">getByRole</span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#c3e88d">&#x27;span&#x27;</span><span class="token token" style="color:#89ddff">)</span><span class="token token" style="color:#89ddff">)</span><span class="token token" style="color:#89ddff">.</span><span class="token token method property-access" style="color:#c792ea">toHaveTextContent</span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#c3e88d">&#x27;Hello world&#x27;</span><span class="token token" style="color:#89ddff">)</span><span class="token token" style="color:#89ddff">;</span><span>
</span><span>    </span><span class="token token" style="color:#89ddff">}</span><span class="token token" style="color:#89ddff">)</span><span>
</span><span></span><span class="token token" style="color:#89ddff">}</span><span class="token token" style="color:#89ddff">)</span><span>
</span></code></pre></div></pre>
<h2>Test with React Router Dom</h2>
<p class=" code-block__paragraph">Now we will combine both API and <code value="react-router-dom" class="code-block__code">react-router-dom</code>, the case is a component fetches user data, and then checking if
this
user is admin or not, if he is an admin, the user should be navigated to admin page.</p>
<pre><div class="code-block__block"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 448 512" class="code-block__copy-func" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M433.941 65.941l-51.882-51.882A48 48 0 0 0 348.118 0H176c-26.51 0-48 21.49-48 48v48H48c-26.51 0-48 21.49-48 48v320c0 26.51 21.49 48 48 48h224c26.51 0 48-21.49 48-48v-48h80c26.51 0 48-21.49 48-48V99.882a48 48 0 0 0-14.059-33.941zM266 464H54a6 6 0 0 1-6-6V150a6 6 0 0 1 6-6h74v224c0 26.51 21.49 48 48 48h96v42a6 6 0 0 1-6 6zm128-96H182a6 6 0 0 1-6-6V54a6 6 0 0 1 6-6h106v88c0 13.255 10.745 24 24 24h88v202a6 6 0 0 1-6 6zm6-256h-64V48h9.632c1.591 0 3.117.632 4.243 1.757l48.368 48.368a6 6 0 0 1 1.757 4.243V112z"></path></svg><pre style="text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;color:#c3cee3;background:#263238;font-family:Roboto Mono, monospace;font-size:1em;line-height:1.5em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;overflow:auto;position:relative;margin:0.5em 0;padding:1.25em 1em"><code class="language-tsx" style="text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;color:#c3cee3;background:#263238;font-family:Roboto Mono, monospace;font-size:1em;line-height:1.5em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token token module" style="color:#c792ea;font-style:italic">import</span><span> </span><span class="token token imports" style="color:#89ddff">{</span><span class="token token imports"> </span><span class="token token imports maybe-class-name">MockRouteComponent</span><span class="token token imports"> </span><span class="token token imports" style="color:#89ddff">}</span><span> </span><span class="token token module" style="color:#c792ea;font-style:italic">from</span><span> </span><span class="token token" style="color:#c3e88d">&quot;./MockRouteComponent&quot;</span><span class="token token" style="color:#89ddff">;</span><span>
</span><span></span><span class="token token module" style="color:#c792ea;font-style:italic">import</span><span> </span><span class="token token imports" style="color:#89ddff">{</span><span class="token token imports"> render</span><span class="token token imports" style="color:#89ddff">,</span><span class="token token imports"> screen</span><span class="token token imports" style="color:#89ddff">,</span><span class="token token imports"> waitFor</span><span class="token token imports" style="color:#89ddff">,</span><span class="token token imports"> fireEvent </span><span class="token token imports" style="color:#89ddff">}</span><span> </span><span class="token token module" style="color:#c792ea;font-style:italic">from</span><span> </span><span class="token token" style="color:#c3e88d">&quot;@testing-library/react&quot;</span><span class="token token" style="color:#89ddff">;</span><span>
</span><span></span><span class="token token module" style="color:#c792ea;font-style:italic">import</span><span> </span><span class="token token imports">axios</span><span> </span><span class="token token module" style="color:#c792ea;font-style:italic">from</span><span> </span><span class="token token" style="color:#c3e88d">&#x27;axios&#x27;</span><span class="token token" style="color:#89ddff">;</span><span>
</span>
<span>jest</span><span class="token token" style="color:#89ddff">.</span><span class="token token method property-access" style="color:#c792ea">mock</span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#c3e88d">&#x27;axios&#x27;</span><span class="token token" style="color:#89ddff">)</span><span class="token token" style="color:#89ddff">;</span><span>
</span><span></span><span class="token token" style="color:#c792ea;font-style:italic">const</span><span> mockedAxios </span><span class="token token" style="color:#89ddff">=</span><span> axios </span><span class="token token module" style="color:#c792ea;font-style:italic">as</span><span> jest</span><span class="token token" style="color:#89ddff">.</span><span class="token token property-access maybe-class-name">Mocked</span><span class="token token" style="color:#89ddff">&lt;</span><span class="token token" style="color:#c792ea;font-style:italic">typeof</span><span> axios</span><span class="token token" style="color:#89ddff">&gt;</span><span class="token token" style="color:#89ddff">;</span><span>
</span>
<span></span><span class="token token" style="color:#c792ea;font-style:italic">const</span><span> mockNavigate </span><span class="token token" style="color:#89ddff">=</span><span> jest</span><span class="token token" style="color:#89ddff">.</span><span class="token token method property-access" style="color:#c792ea">fn</span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#89ddff">)</span><span class="token token" style="color:#89ddff">;</span><span>
</span><span></span><span class="token token" style="color:#c792ea;font-style:italic">const</span><span> mockShouldNavigateToHome </span><span class="token token" style="color:#89ddff">=</span><span> jest</span><span class="token token" style="color:#89ddff">.</span><span class="token token method property-access" style="color:#c792ea">fn</span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#89ddff">)</span><span class="token token" style="color:#89ddff">;</span><span>
</span>
<span>jest</span><span class="token token" style="color:#89ddff">.</span><span class="token token method property-access" style="color:#c792ea">mock</span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#c3e88d">&quot;react-router-dom&quot;</span><span class="token token" style="color:#89ddff">,</span><span> </span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#89ddff">)</span><span> </span><span class="token token arrow" style="color:#89ddff">=&gt;</span><span> </span><span class="token token" style="color:#89ddff">{</span><span>
</span><span>    </span><span class="token token" style="color:#c792ea;font-style:italic">const</span><span> actualReactRouterDom </span><span class="token token" style="color:#89ddff">=</span><span> jest</span><span class="token token" style="color:#89ddff">.</span><span class="token token method property-access" style="color:#c792ea">requireActual</span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#c3e88d">&quot;react-router-dom&quot;</span><span class="token token" style="color:#89ddff">)</span><span class="token token" style="color:#89ddff">;</span><span>
</span><span>    </span><span class="token token control-flow" style="color:#c792ea;font-style:italic">return</span><span> </span><span class="token token" style="color:#89ddff">{</span><span>
</span><span>        </span><span class="token token spread" style="color:#89ddff">...</span><span>actualReactRouterDom</span><span class="token token" style="color:#89ddff">,</span><span>
</span><span>        </span><span class="token token function-variable" style="color:#c792ea">useNavigate</span><span class="token token" style="color:#89ddff">:</span><span> </span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#89ddff">)</span><span> </span><span class="token token arrow" style="color:#89ddff">=&gt;</span><span> mockNavigate</span><span class="token token" style="color:#89ddff">,</span><span>
</span><span>        </span><span class="token token function-variable" style="color:#c792ea">useLocation</span><span class="token token" style="color:#89ddff">:</span><span> </span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#89ddff">)</span><span> </span><span class="token token arrow" style="color:#89ddff">=&gt;</span><span> </span><span class="token token" style="color:#89ddff">{</span><span>
</span><span>            </span><span class="token token control-flow" style="color:#c792ea;font-style:italic">return</span><span> </span><span class="token token" style="color:#89ddff">{</span><span>
</span><span>                state</span><span class="token token" style="color:#89ddff">:</span><span> </span><span class="token token" style="color:#89ddff">{</span><span>
</span><span>                    shouldNavigateToHome</span><span class="token token" style="color:#89ddff">:</span><span> </span><span class="token token" style="color:#c792ea">mockShouldNavigateToHome</span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#89ddff">)</span><span class="token token" style="color:#89ddff">,</span><span>
</span><span>                </span><span class="token token" style="color:#89ddff">}</span><span class="token token" style="color:#89ddff">,</span><span>
</span><span>            </span><span class="token token" style="color:#89ddff">}</span><span class="token token" style="color:#89ddff">;</span><span>
</span><span>        </span><span class="token token" style="color:#89ddff">}</span><span class="token token" style="color:#89ddff">,</span><span>
</span><span>    </span><span class="token token" style="color:#89ddff">}</span><span class="token token" style="color:#89ddff">;</span><span>
</span><span></span><span class="token token" style="color:#89ddff">}</span><span class="token token" style="color:#89ddff">)</span><span class="token token" style="color:#89ddff">;</span><span>
</span>
<span></span><span class="token token" style="color:#c792ea">describe</span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#c3e88d">&quot;MockRouteComponent&quot;</span><span class="token token" style="color:#89ddff">,</span><span> </span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#89ddff">)</span><span> </span><span class="token token arrow" style="color:#89ddff">=&gt;</span><span> </span><span class="token token" style="color:#89ddff">{</span><span>
</span><span>    </span><span class="token token" style="color:#c792ea">test</span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#c3e88d">&quot;render correctly&quot;</span><span class="token token" style="color:#89ddff">,</span><span> </span><span class="token token" style="color:#c792ea;font-style:italic">async</span><span> </span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#89ddff">)</span><span> </span><span class="token token arrow" style="color:#89ddff">=&gt;</span><span> </span><span class="token token" style="color:#89ddff">{</span><span>
</span><span>        mockedAxios</span><span class="token token" style="color:#89ddff">.</span><span class="token token property-access">get</span><span class="token token" style="color:#89ddff">.</span><span class="token token method property-access" style="color:#c792ea">mockResolveValue</span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#89ddff">{</span><span> nickName</span><span class="token token" style="color:#89ddff">:</span><span> </span><span class="token token" style="color:#c3e88d">&#x27;hello World&#x27;</span><span class="token token" style="color:#89ddff">,</span><span> isAdmin</span><span class="token token" style="color:#89ddff">:</span><span> </span><span class="token token" style="color:#c792ea">false</span><span> </span><span class="token token" style="color:#89ddff">}</span><span class="token token" style="color:#89ddff">)</span><span class="token token" style="color:#89ddff">;</span><span>
</span><span>        </span><span class="token token" style="color:#c792ea">render</span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#89ddff">&lt;</span><span class="token token" style="color:#f2ff00">MockRouteComponent</span><span class="token token" style="color:#89ddff">/&gt;</span><span class="token token" style="color:#89ddff">)</span><span class="token token" style="color:#89ddff">;</span><span>
</span><span>        </span><span class="token token" style="color:#c792ea">expect</span><span class="token token" style="color:#89ddff">(</span><span>mockNavigate</span><span class="token token" style="color:#89ddff">)</span><span class="token token" style="color:#89ddff">.</span><span class="token token method property-access" style="color:#c792ea">toBeCalledWith</span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#c3e88d">&quot;/&quot;</span><span class="token token" style="color:#89ddff">)</span><span class="token token" style="color:#89ddff">;</span><span>
</span><span>    </span><span class="token token" style="color:#89ddff">}</span><span class="token token" style="color:#89ddff">)</span><span class="token token" style="color:#89ddff">;</span><span>
</span>
<span>    </span><span class="token token" style="color:#c792ea">test</span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#c3e88d">&quot;render with api calling and then navigate&quot;</span><span class="token token" style="color:#89ddff">,</span><span> </span><span class="token token" style="color:#c792ea;font-style:italic">async</span><span> </span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#89ddff">)</span><span> </span><span class="token token arrow" style="color:#89ddff">=&gt;</span><span> </span><span class="token token" style="color:#89ddff">{</span><span>
</span><span>        </span><span class="token token" style="color:#546e7a">// IMPORTANT: Must reset the mock to avoid stored state</span><span>
</span><span>        mockNavigate</span><span class="token token" style="color:#89ddff">.</span><span class="token token method property-access" style="color:#c792ea">mockReset</span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#89ddff">)</span><span class="token token" style="color:#89ddff">;</span><span>
</span><span>        mockedAxios</span><span class="token token" style="color:#89ddff">.</span><span class="token token property-access">get</span><span class="token token" style="color:#89ddff">.</span><span class="token token method property-access" style="color:#c792ea">mockResolveValue</span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#89ddff">{</span><span> nickName</span><span class="token token" style="color:#89ddff">:</span><span> </span><span class="token token" style="color:#c3e88d">&#x27;hello World&#x27;</span><span class="token token" style="color:#89ddff">,</span><span> isAdmin</span><span class="token token" style="color:#89ddff">:</span><span> </span><span class="token token" style="color:#c792ea">true</span><span> </span><span class="token token" style="color:#89ddff">}</span><span class="token token" style="color:#89ddff">)</span><span class="token token" style="color:#89ddff">;</span><span>
</span><span>        </span><span class="token token" style="color:#c792ea">render</span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#89ddff">&lt;</span><span class="token token" style="color:#f2ff00">MockRouteComponent</span><span class="token token" style="color:#89ddff">/&gt;</span><span class="token token" style="color:#89ddff">)</span><span class="token token" style="color:#89ddff">;</span><span>
</span>
<span>        </span><span class="token token" style="color:#546e7a">// Only one assertion within waitFor https://kentcdodds.com/blog/common-mistakes-with-react-testing-library</span><span>
</span><span>        </span><span class="token token control-flow" style="color:#c792ea;font-style:italic">await</span><span> </span><span class="token token" style="color:#c792ea">waitFor</span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#c792ea;font-style:italic">async</span><span> </span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#89ddff">)</span><span> </span><span class="token token arrow" style="color:#89ddff">=&gt;</span><span> </span><span class="token token" style="color:#89ddff">{</span><span>
</span><span>            </span><span class="token token" style="color:#c792ea">expect</span><span class="token token" style="color:#89ddff">(</span><span>screen</span><span class="token token" style="color:#89ddff">.</span><span class="token token method property-access" style="color:#c792ea">getByTestId</span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#c3e88d">&quot;nickName&quot;</span><span class="token token" style="color:#89ddff">)</span><span class="token token" style="color:#89ddff">)</span><span class="token token" style="color:#89ddff">.</span><span class="token token method property-access" style="color:#c792ea">toHaveTextContent</span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#c3e88d">&#x27;hello World&#x27;</span><span class="token token" style="color:#89ddff">)</span><span class="token token" style="color:#89ddff">;</span><span>
</span><span>        </span><span class="token token" style="color:#89ddff">}</span><span class="token token" style="color:#89ddff">)</span><span class="token token" style="color:#89ddff">;</span><span>
</span><span>        </span><span class="token token control-flow" style="color:#c792ea;font-style:italic">await</span><span> </span><span class="token token" style="color:#c792ea">waitFor</span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#c792ea;font-style:italic">async</span><span> </span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#89ddff">)</span><span> </span><span class="token token arrow" style="color:#89ddff">=&gt;</span><span> </span><span class="token token" style="color:#89ddff">{</span><span>
</span><span>            </span><span class="token token" style="color:#c792ea">expect</span><span class="token token" style="color:#89ddff">(</span><span>mockNavigate</span><span class="token token" style="color:#89ddff">)</span><span class="token token" style="color:#89ddff">.</span><span class="token token method property-access" style="color:#c792ea">toBeCalledWith</span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#c3e88d">&quot;/admin&quot;</span><span class="token token" style="color:#89ddff">)</span><span class="token token" style="color:#89ddff">;</span><span>
</span><span>        </span><span class="token token" style="color:#89ddff">}</span><span class="token token" style="color:#89ddff">)</span><span class="token token" style="color:#89ddff">;</span><span>
</span><span>    </span><span class="token token" style="color:#89ddff">}</span><span class="token token" style="color:#89ddff">)</span><span class="token token" style="color:#89ddff">;</span><span>
</span><span></span><span class="token token" style="color:#89ddff">}</span><span class="token token" style="color:#89ddff">)</span><span class="token token" style="color:#89ddff">;</span><span>
</span></code></pre></div></pre>
<h2>Test with i18n</h2>
<p class=" code-block__paragraph">How about if we combine with the i18n, i18n needs to have configuration about translation file, but actually
we can mock i18n and add just few keys related to the testing component.</p>
<div class="code-block__title">i18n.test.js</div>
<pre><div class="code-block__block"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 448 512" class="code-block__copy-func" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M433.941 65.941l-51.882-51.882A48 48 0 0 0 348.118 0H176c-26.51 0-48 21.49-48 48v48H48c-26.51 0-48 21.49-48 48v320c0 26.51 21.49 48 48 48h224c26.51 0 48-21.49 48-48v-48h80c26.51 0 48-21.49 48-48V99.882a48 48 0 0 0-14.059-33.941zM266 464H54a6 6 0 0 1-6-6V150a6 6 0 0 1 6-6h74v224c0 26.51 21.49 48 48 48h96v42a6 6 0 0 1-6 6zm128-96H182a6 6 0 0 1-6-6V54a6 6 0 0 1 6-6h106v88c0 13.255 10.745 24 24 24h88v202a6 6 0 0 1-6 6zm6-256h-64V48h9.632c1.591 0 3.117.632 4.243 1.757l48.368 48.368a6 6 0 0 1 1.757 4.243V112z"></path></svg><pre style="text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;color:#c3cee3;background:#263238;font-family:Roboto Mono, monospace;font-size:1em;line-height:1.5em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;overflow:auto;position:relative;margin:0.5em 0;padding:1.25em 1em"><code class="language-ts" style="text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;color:#c3cee3;background:#263238;font-family:Roboto Mono, monospace;font-size:1em;line-height:1.5em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span>jest</span><span class="token token" style="color:#89ddff">.</span><span class="token token method property-access" style="color:#c792ea">mock</span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#c3e88d">&#x27;i18n&#x27;</span><span class="token token" style="color:#89ddff">,</span><span> </span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#89ddff">)</span><span> </span><span class="token token arrow" style="color:#89ddff">=&gt;</span><span> </span><span class="token token" style="color:#89ddff">{</span><span>
</span><span>    </span><span class="token token control-flow" style="color:#c792ea;font-style:italic">return</span><span> </span><span class="token token" style="color:#89ddff">{</span><span>
</span><span>        </span><span class="token token function-variable" style="color:#c792ea">t</span><span class="token token" style="color:#89ddff">:</span><span> </span><span class="token token" style="color:#89ddff">(</span><span>key</span><span class="token token" style="color:#89ddff">:</span><span> </span><span class="token token" style="color:#ffcb6b">string</span><span class="token token" style="color:#89ddff">)</span><span> </span><span class="token token arrow" style="color:#89ddff">=&gt;</span><span> </span><span class="token token" style="color:#89ddff">{</span><span>
</span><span>            </span><span class="token token control-flow" style="color:#c792ea;font-style:italic">return</span><span> </span><span class="token token" style="color:#c3e88d">&#x27;mocked i18n&#x27;</span><span class="token token" style="color:#89ddff">;</span><span>
</span><span>        </span><span class="token token" style="color:#89ddff">}</span><span class="token token" style="color:#89ddff">,</span><span>
</span><span>        i18n</span><span class="token token" style="color:#89ddff">:</span><span> </span><span class="token token" style="color:#89ddff">{</span><span>
</span><span>            language</span><span class="token token" style="color:#89ddff">:</span><span> </span><span class="token token" style="color:#c3e88d">&#x27;en&#x27;</span><span class="token token" style="color:#89ddff">,</span><span>
</span><span>        </span><span class="token token" style="color:#89ddff">}</span><span class="token token" style="color:#89ddff">,</span><span>
</span><span>    </span><span class="token token" style="color:#89ddff">}</span><span class="token token" style="color:#89ddff">;</span><span>
</span><span></span><span class="token token" style="color:#89ddff">}</span><span class="token token" style="color:#89ddff">)</span><span class="token token" style="color:#89ddff">;</span><span>
</span></code></pre></div></pre>
<h2>Test in complex components</h2>
<p class=" code-block__paragraph">When we test, we will have complex component, but we just only care about the logic of this page and ignore other child
components, we can mock the others.</p>
<div class="code-block__title">Homepage.tsx</div>
<pre><div class="code-block__block"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 448 512" class="code-block__copy-func" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M433.941 65.941l-51.882-51.882A48 48 0 0 0 348.118 0H176c-26.51 0-48 21.49-48 48v48H48c-26.51 0-48 21.49-48 48v320c0 26.51 21.49 48 48 48h224c26.51 0 48-21.49 48-48v-48h80c26.51 0 48-21.49 48-48V99.882a48 48 0 0 0-14.059-33.941zM266 464H54a6 6 0 0 1-6-6V150a6 6 0 0 1 6-6h74v224c0 26.51 21.49 48 48 48h96v42a6 6 0 0 1-6 6zm128-96H182a6 6 0 0 1-6-6V54a6 6 0 0 1 6-6h106v88c0 13.255 10.745 24 24 24h88v202a6 6 0 0 1-6 6zm6-256h-64V48h9.632c1.591 0 3.117.632 4.243 1.757l48.368 48.368a6 6 0 0 1 1.757 4.243V112z"></path></svg><pre style="text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;color:#c3cee3;background:#263238;font-family:Roboto Mono, monospace;font-size:1em;line-height:1.5em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;overflow:auto;position:relative;margin:0.5em 0;padding:1.25em 1em"><code class="language-tsx" style="text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;color:#c3cee3;background:#263238;font-family:Roboto Mono, monospace;font-size:1em;line-height:1.5em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token token" style="color:#c792ea;font-style:italic">const</span><span> </span><span class="token token function-variable maybe-class-name" style="color:#c792ea">HomePage</span><span> </span><span class="token token" style="color:#89ddff">=</span><span> </span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#89ddff">)</span><span> </span><span class="token token arrow" style="color:#89ddff">=&gt;</span><span> </span><span class="token token" style="color:#89ddff">{</span><span>
</span><span>    </span><span class="token token control-flow" style="color:#c792ea;font-style:italic">return</span><span> </span><span class="token token" style="color:#89ddff">(</span><span>
</span><span>        </span><span class="token token" style="color:#89ddff">&lt;</span><span class="token token" style="color:#f2ff00">HomePageContainer</span><span class="token token" style="color:#89ddff">&gt;</span><span class="token token plain-text">
</span><span class="token token plain-text">            </span><span class="token token" style="color:#89ddff">&lt;</span><span class="token token" style="color:#f2ff00">HeadSection</span><span class="token token" style="color:#89ddff">/&gt;</span><span class="token token plain-text">
</span><span class="token token plain-text">            </span><span class="token token" style="color:#89ddff">&lt;</span><span class="token token" style="color:#f2ff00">BodySection</span><span class="token token" style="color:#89ddff">/&gt;</span><span class="token token plain-text">
</span><span class="token token plain-text">            </span><span class="token token" style="color:#89ddff">&lt;</span><span class="token token" style="color:#f2ff00">FooterSection</span><span class="token token" style="color:#89ddff">/&gt;</span><span class="token token plain-text">
</span><span class="token token plain-text">        </span><span class="token token" style="color:#89ddff">&lt;/</span><span class="token token" style="color:#f2ff00">HomePageContainer</span><span class="token token" style="color:#89ddff">&gt;</span><span>
</span><span>    </span><span class="token token" style="color:#89ddff">)</span><span class="token token" style="color:#89ddff">;</span><span>
</span><span></span><span class="token token" style="color:#89ddff">}</span><span>
</span></code></pre></div></pre>
<div class="code-block__title">Homepage.test.tsx</div>
<pre><div class="code-block__block"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 448 512" class="code-block__copy-func" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M433.941 65.941l-51.882-51.882A48 48 0 0 0 348.118 0H176c-26.51 0-48 21.49-48 48v48H48c-26.51 0-48 21.49-48 48v320c0 26.51 21.49 48 48 48h224c26.51 0 48-21.49 48-48v-48h80c26.51 0 48-21.49 48-48V99.882a48 48 0 0 0-14.059-33.941zM266 464H54a6 6 0 0 1-6-6V150a6 6 0 0 1 6-6h74v224c0 26.51 21.49 48 48 48h96v42a6 6 0 0 1-6 6zm128-96H182a6 6 0 0 1-6-6V54a6 6 0 0 1 6-6h106v88c0 13.255 10.745 24 24 24h88v202a6 6 0 0 1-6 6zm6-256h-64V48h9.632c1.591 0 3.117.632 4.243 1.757l48.368 48.368a6 6 0 0 1 1.757 4.243V112z"></path></svg><pre style="text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;color:#c3cee3;background:#263238;font-family:Roboto Mono, monospace;font-size:1em;line-height:1.5em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;overflow:auto;position:relative;margin:0.5em 0;padding:1.25em 1em"><code class="language-tsx" style="text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;color:#c3cee3;background:#263238;font-family:Roboto Mono, monospace;font-size:1em;line-height:1.5em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span>jest</span><span class="token token" style="color:#89ddff">.</span><span class="token token method property-access" style="color:#c792ea">mock</span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#c3e88d">&#x27;./components&#x27;</span><span class="token token" style="color:#89ddff">,</span><span> </span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#89ddff">)</span><span> </span><span class="token token arrow" style="color:#89ddff">=&gt;</span><span> </span><span class="token token" style="color:#89ddff">{</span><span>
</span><span>    </span><span class="token token" style="color:#c792ea;font-style:italic">const</span><span> </span><span class="token token function-variable maybe-class-name" style="color:#c792ea">HeadSection</span><span> </span><span class="token token" style="color:#89ddff">=</span><span> </span><span class="token token" style="color:#89ddff">(</span><span>props</span><span class="token token" style="color:#89ddff">)</span><span> </span><span class="token token arrow" style="color:#89ddff">=&gt;</span><span> </span><span class="token token" style="color:#89ddff">&lt;</span><span class="token token" style="color:#f07178">div</span><span class="token token" style="color:#f07178"> </span><span class="token token" style="color:#ffcb6b">data-testid</span><span class="token token attr-equals" style="color:#89ddff">=</span><span class="token token" style="color:#89ddff">&quot;</span><span class="token token" style="color:#c3e88d">mock-HeadSection</span><span class="token token" style="color:#89ddff">&quot;</span><span class="token token" style="color:#f07178"> </span><span class="token token spread" style="color:#89ddff">{</span><span class="token token spread" style="color:#89ddff">...</span><span class="token token spread" style="color:#f07178">props</span><span class="token token spread" style="color:#89ddff">}</span><span class="token token" style="color:#f07178"> </span><span class="token token" style="color:#89ddff">/&gt;</span><span class="token token" style="color:#89ddff">;</span><span>
</span><span>    </span><span class="token token" style="color:#c792ea;font-style:italic">const</span><span> </span><span class="token token function-variable maybe-class-name" style="color:#c792ea">BodySection</span><span> </span><span class="token token" style="color:#89ddff">=</span><span> </span><span class="token token" style="color:#89ddff">(</span><span>props</span><span class="token token" style="color:#89ddff">)</span><span> </span><span class="token token arrow" style="color:#89ddff">=&gt;</span><span> </span><span class="token token" style="color:#89ddff">&lt;</span><span class="token token" style="color:#f07178">div</span><span class="token token" style="color:#f07178"> </span><span class="token token" style="color:#ffcb6b">data-testid</span><span class="token token attr-equals" style="color:#89ddff">=</span><span class="token token" style="color:#89ddff">&quot;</span><span class="token token" style="color:#c3e88d">mock-BodySection</span><span class="token token" style="color:#89ddff">&quot;</span><span class="token token" style="color:#f07178"> </span><span class="token token spread" style="color:#89ddff">{</span><span class="token token spread" style="color:#89ddff">...</span><span class="token token spread" style="color:#f07178">props</span><span class="token token spread" style="color:#89ddff">}</span><span class="token token" style="color:#f07178"> </span><span class="token token" style="color:#89ddff">/&gt;</span><span class="token token" style="color:#89ddff">;</span><span>
</span><span>    </span><span class="token token" style="color:#c792ea;font-style:italic">const</span><span> </span><span class="token token function-variable maybe-class-name" style="color:#c792ea">FooterSection</span><span> </span><span class="token token" style="color:#89ddff">=</span><span> </span><span class="token token" style="color:#89ddff">(</span><span>props</span><span class="token token" style="color:#89ddff">)</span><span> </span><span class="token token arrow" style="color:#89ddff">=&gt;</span><span> </span><span class="token token" style="color:#89ddff">&lt;</span><span class="token token" style="color:#f07178">div</span><span class="token token" style="color:#f07178"> </span><span class="token token" style="color:#ffcb6b">data-testid</span><span class="token token attr-equals" style="color:#89ddff">=</span><span class="token token" style="color:#89ddff">&quot;</span><span class="token token" style="color:#c3e88d">mock-FooterSection</span><span class="token token" style="color:#89ddff">&quot;</span><span class="token token" style="color:#f07178"> </span><span class="token token spread" style="color:#89ddff">{</span><span class="token token spread" style="color:#89ddff">...</span><span class="token token spread" style="color:#f07178">props</span><span class="token token spread" style="color:#89ddff">}</span><span class="token token" style="color:#f07178"> </span><span class="token token" style="color:#89ddff">/&gt;</span><span class="token token" style="color:#89ddff">;</span><span>
</span><span>    </span><span class="token token control-flow" style="color:#c792ea;font-style:italic">return</span><span> </span><span class="token token" style="color:#89ddff">{</span><span>
</span><span>        </span><span class="token token maybe-class-name">HeadSection</span><span class="token token" style="color:#89ddff">,</span><span> </span><span class="token token maybe-class-name">BodySection</span><span class="token token" style="color:#89ddff">,</span><span> </span><span class="token token maybe-class-name">FooterSection</span><span class="token token" style="color:#89ddff">,</span><span>
</span><span>    </span><span class="token token" style="color:#89ddff">}</span><span class="token token" style="color:#89ddff">;</span><span>
</span><span></span><span class="token token" style="color:#89ddff">}</span><span class="token token" style="color:#89ddff">)</span><span class="token token" style="color:#89ddff">;</span><span>
</span>
<span></span><span class="token token" style="color:#c792ea">describe</span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#c3e88d">&#x27;HomePage&#x27;</span><span class="token token" style="color:#89ddff">,</span><span> </span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#89ddff">)</span><span> </span><span class="token token arrow" style="color:#89ddff">=&gt;</span><span> </span><span class="token token" style="color:#89ddff">{</span><span>
</span><span>    </span><span class="token token" style="color:#c792ea">test</span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#c3e88d">&#x27;render correctly&#x27;</span><span class="token token" style="color:#89ddff">,</span><span> </span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#89ddff">)</span><span> </span><span class="token token arrow" style="color:#89ddff">=&gt;</span><span> </span><span class="token token" style="color:#89ddff">{</span><span>
</span><span>        </span><span class="token token" style="color:#c792ea;font-style:italic">const</span><span> </span><span class="token token" style="color:#89ddff">{</span><span> getByTestId </span><span class="token token" style="color:#89ddff">}</span><span> </span><span class="token token" style="color:#89ddff">=</span><span> </span><span class="token token" style="color:#c792ea">render</span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#89ddff">&lt;</span><span class="token token" style="color:#f2ff00">HomePage</span><span class="token token" style="color:#89ddff">/&gt;</span><span class="token token" style="color:#89ddff">)</span><span class="token token" style="color:#89ddff">;</span><span>
</span><span>        </span><span class="token token" style="color:#c792ea">expect</span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#c792ea">getByTestId</span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#c3e88d">&#x27;mock-HeadSection&#x27;</span><span class="token token" style="color:#89ddff">)</span><span class="token token" style="color:#89ddff">)</span><span class="token token" style="color:#89ddff">.</span><span class="token token method property-access" style="color:#c792ea">toBeTruthy</span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#89ddff">)</span><span class="token token" style="color:#89ddff">;</span><span>
</span><span>        </span><span class="token token" style="color:#c792ea">expect</span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#c792ea">getByTestId</span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#c3e88d">&#x27;mock-BodySection&#x27;</span><span class="token token" style="color:#89ddff">)</span><span class="token token" style="color:#89ddff">)</span><span class="token token" style="color:#89ddff">.</span><span class="token token method property-access" style="color:#c792ea">toBeTruthy</span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#89ddff">)</span><span class="token token" style="color:#89ddff">;</span><span>
</span><span>        </span><span class="token token" style="color:#c792ea">expect</span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#c792ea">getByTestId</span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#c3e88d">&#x27;mock-FooterSection&#x27;</span><span class="token token" style="color:#89ddff">)</span><span class="token token" style="color:#89ddff">)</span><span class="token token" style="color:#89ddff">.</span><span class="token token method property-access" style="color:#c792ea">toBeTruthy</span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#89ddff">)</span><span class="token token" style="color:#89ddff">;</span><span>
</span><span>    </span><span class="token token" style="color:#89ddff">}</span><span class="token token" style="color:#89ddff">)</span><span>
</span><span></span><span class="token token" style="color:#89ddff">}</span><span class="token token" style="color:#89ddff">)</span><span>
</span></code></pre></div></pre>
<h2>Test function inside component</h2>
<div class="code-block__title">Homepage.tsx</div>
<pre><div class="code-block__block"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 448 512" class="code-block__copy-func" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M433.941 65.941l-51.882-51.882A48 48 0 0 0 348.118 0H176c-26.51 0-48 21.49-48 48v48H48c-26.51 0-48 21.49-48 48v320c0 26.51 21.49 48 48 48h224c26.51 0 48-21.49 48-48v-48h80c26.51 0 48-21.49 48-48V99.882a48 48 0 0 0-14.059-33.941zM266 464H54a6 6 0 0 1-6-6V150a6 6 0 0 1 6-6h74v224c0 26.51 21.49 48 48 48h96v42a6 6 0 0 1-6 6zm128-96H182a6 6 0 0 1-6-6V54a6 6 0 0 1 6-6h106v88c0 13.255 10.745 24 24 24h88v202a6 6 0 0 1-6 6zm6-256h-64V48h9.632c1.591 0 3.117.632 4.243 1.757l48.368 48.368a6 6 0 0 1 1.757 4.243V112z"></path></svg><pre style="text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;color:#c3cee3;background:#263238;font-family:Roboto Mono, monospace;font-size:1em;line-height:1.5em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;overflow:auto;position:relative;margin:0.5em 0;padding:1.25em 1em"><code class="language-tsx" style="text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;color:#c3cee3;background:#263238;font-family:Roboto Mono, monospace;font-size:1em;line-height:1.5em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token token" style="color:#c792ea;font-style:italic">const</span><span> </span><span class="token token function-variable maybe-class-name" style="color:#c792ea">HomePage</span><span> </span><span class="token token" style="color:#89ddff">=</span><span> </span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#89ddff">)</span><span> </span><span class="token token arrow" style="color:#89ddff">=&gt;</span><span> </span><span class="token token" style="color:#89ddff">{</span><span>
</span><span>    </span><span class="token token" style="color:#c792ea;font-style:italic">const</span><span> </span><span class="token token" style="color:#89ddff">[</span><span>count</span><span class="token token" style="color:#89ddff">,</span><span> setCount</span><span class="token token" style="color:#89ddff">]</span><span> </span><span class="token token" style="color:#89ddff">=</span><span> </span><span class="token token" style="color:#c792ea">useState</span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#fd9170">0</span><span class="token token" style="color:#89ddff">)</span><span class="token token" style="color:#89ddff">;</span><span>
</span>
<span>    </span><span class="token token" style="color:#c792ea;font-style:italic">const</span><span> </span><span class="token token function-variable" style="color:#c792ea">increase</span><span> </span><span class="token token" style="color:#89ddff">=</span><span> </span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#89ddff">)</span><span> </span><span class="token token arrow" style="color:#89ddff">=&gt;</span><span> </span><span class="token token" style="color:#89ddff">{</span><span>
</span><span>        </span><span class="token token" style="color:#c792ea">setCount</span><span class="token token" style="color:#89ddff">(</span><span>count </span><span class="token token" style="color:#89ddff">+</span><span> </span><span class="token token" style="color:#fd9170">1</span><span class="token token" style="color:#89ddff">)</span><span class="token token" style="color:#89ddff">;</span><span>
</span><span>    </span><span class="token token" style="color:#89ddff">}</span><span>
</span>
<span>    </span><span class="token token control-flow" style="color:#c792ea;font-style:italic">return</span><span> </span><span class="token token" style="color:#89ddff">(</span><span>
</span><span>        </span><span class="token token" style="color:#89ddff">&lt;</span><span class="token token" style="color:#f07178">div</span><span class="token token" style="color:#89ddff">&gt;</span><span class="token token plain-text">
</span><span class="token token plain-text">          </span><span class="token token" style="color:#89ddff">&lt;</span><span class="token token" style="color:#f07178">h1</span><span class="token token" style="color:#89ddff">&gt;</span><span class="token token plain-text">Count: </span><span class="token token" style="color:#89ddff">{</span><span>count</span><span class="token token" style="color:#89ddff">}</span><span class="token token" style="color:#89ddff">&lt;/</span><span class="token token" style="color:#f07178">h1</span><span class="token token" style="color:#89ddff">&gt;</span><span class="token token plain-text">
</span><span class="token token plain-text">          </span><span class="token token" style="color:#89ddff">&lt;</span><span class="token token" style="color:#f2ff00">Children</span><span class="token token" style="color:#f07178"> </span><span class="token token" style="color:#ffcb6b">increase</span><span class="token token script language-javascript script-punctuation" style="color:#f07178">=</span><span class="token token script language-javascript" style="color:#89ddff">{</span><span class="token token script language-javascript" style="color:#f07178">increase</span><span class="token token script language-javascript" style="color:#89ddff">}</span><span class="token token" style="color:#89ddff">/&gt;</span><span class="token token plain-text">
</span><span class="token token plain-text">        </span><span class="token token" style="color:#89ddff">&lt;/</span><span class="token token" style="color:#f07178">div</span><span class="token token" style="color:#89ddff">&gt;</span><span>
</span><span>    </span><span class="token token" style="color:#89ddff">)</span><span class="token token" style="color:#89ddff">;</span><span>
</span><span></span><span class="token token" style="color:#89ddff">}</span><span>
</span></code></pre></div></pre>
<div class="code-block__title">Homepage.test.tsx</div>
<pre><div class="code-block__block"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 448 512" class="code-block__copy-func" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M433.941 65.941l-51.882-51.882A48 48 0 0 0 348.118 0H176c-26.51 0-48 21.49-48 48v48H48c-26.51 0-48 21.49-48 48v320c0 26.51 21.49 48 48 48h224c26.51 0 48-21.49 48-48v-48h80c26.51 0 48-21.49 48-48V99.882a48 48 0 0 0-14.059-33.941zM266 464H54a6 6 0 0 1-6-6V150a6 6 0 0 1 6-6h74v224c0 26.51 21.49 48 48 48h96v42a6 6 0 0 1-6 6zm128-96H182a6 6 0 0 1-6-6V54a6 6 0 0 1 6-6h106v88c0 13.255 10.745 24 24 24h88v202a6 6 0 0 1-6 6zm6-256h-64V48h9.632c1.591 0 3.117.632 4.243 1.757l48.368 48.368a6 6 0 0 1 1.757 4.243V112z"></path></svg><pre style="text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;color:#c3cee3;background:#263238;font-family:Roboto Mono, monospace;font-size:1em;line-height:1.5em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;overflow:auto;position:relative;margin:0.5em 0;padding:1.25em 1em"><code class="language-tsx" style="text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;color:#c3cee3;background:#263238;font-family:Roboto Mono, monospace;font-size:1em;line-height:1.5em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span>jest</span><span class="token token" style="color:#89ddff">.</span><span class="token token method property-access" style="color:#c792ea">mock</span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#c3e88d">&#x27;./components&#x27;</span><span class="token token" style="color:#89ddff">,</span><span> </span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#89ddff">)</span><span> </span><span class="token token arrow" style="color:#89ddff">=&gt;</span><span> </span><span class="token token" style="color:#89ddff">{</span><span>
</span><span>  </span><span class="token token" style="color:#c792ea;font-style:italic">const</span><span> </span><span class="token token function-variable maybe-class-name" style="color:#c792ea">Children</span><span> </span><span class="token token" style="color:#89ddff">=</span><span> </span><span class="token token" style="color:#89ddff">(</span><span>props</span><span class="token token" style="color:#89ddff">)</span><span> </span><span class="token token arrow" style="color:#89ddff">=&gt;</span><span> </span><span class="token token" style="color:#89ddff">&lt;</span><span class="token token" style="color:#f07178">div</span><span class="token token" style="color:#f07178"> </span><span class="token token" style="color:#ffcb6b">data-testid</span><span class="token token attr-equals" style="color:#89ddff">=</span><span class="token token" style="color:#89ddff">&quot;</span><span class="token token" style="color:#c3e88d">mock-Chirem</span><span class="token token" style="color:#89ddff">&quot;</span><span class="token token" style="color:#f07178"> </span><span class="token token" style="color:#ffcb6b">onClick</span><span class="token token script language-javascript script-punctuation" style="color:#f07178">=</span><span class="token token script language-javascript" style="color:#89ddff">{</span><span class="token token script language-javascript" style="color:#f07178">props</span><span class="token token script language-javascript" style="color:#89ddff">.</span><span class="token token script language-javascript property-access" style="color:#f07178">increase</span><span class="token token script language-javascript" style="color:#89ddff">}</span><span class="token token" style="color:#f07178"> </span><span class="token token spread" style="color:#89ddff">{</span><span class="token token spread" style="color:#89ddff">...</span><span class="token token spread" style="color:#f07178">props</span><span class="token token spread" style="color:#89ddff">}</span><span class="token token" style="color:#f07178"> </span><span class="token token" style="color:#89ddff">/&gt;</span><span class="token token" style="color:#89ddff">;</span><span>
</span><span>  </span><span class="token token control-flow" style="color:#c792ea;font-style:italic">return</span><span> </span><span class="token token" style="color:#89ddff">{</span><span>
</span><span>    </span><span class="token token maybe-class-name">Children</span><span>
</span><span>  </span><span class="token token" style="color:#89ddff">}</span><span class="token token" style="color:#89ddff">;</span><span>
</span><span></span><span class="token token" style="color:#89ddff">}</span><span class="token token" style="color:#89ddff">)</span><span class="token token" style="color:#89ddff">;</span><span>
</span>
<span></span><span class="token token" style="color:#c792ea">describe</span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#c3e88d">&#x27;HomePage&#x27;</span><span class="token token" style="color:#89ddff">,</span><span> </span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#89ddff">)</span><span> </span><span class="token token arrow" style="color:#89ddff">=&gt;</span><span> </span><span class="token token" style="color:#89ddff">{</span><span>
</span><span>  </span><span class="token token" style="color:#c792ea">test</span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#c3e88d">&#x27;render correctly&#x27;</span><span class="token token" style="color:#89ddff">,</span><span> </span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#89ddff">)</span><span> </span><span class="token token arrow" style="color:#89ddff">=&gt;</span><span> </span><span class="token token" style="color:#89ddff">{</span><span>
</span><span>    </span><span class="token token" style="color:#c792ea;font-style:italic">const</span><span> </span><span class="token token" style="color:#89ddff">{</span><span> getByTestId </span><span class="token token" style="color:#89ddff">}</span><span> </span><span class="token token" style="color:#89ddff">=</span><span> </span><span class="token token" style="color:#c792ea">render</span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#89ddff">&lt;</span><span class="token token" style="color:#f2ff00">HomePage</span><span class="token token" style="color:#89ddff">/&gt;</span><span class="token token" style="color:#89ddff">)</span><span class="token token" style="color:#89ddff">;</span><span>
</span><span>  </span><span class="token token" style="color:#89ddff">}</span><span class="token token" style="color:#89ddff">)</span><span>
</span><span></span><span class="token token" style="color:#89ddff">}</span><span class="token token" style="color:#89ddff">)</span><span>
</span></code></pre></div></pre>
<h2>How to remove data-testid for production</h2>
<p class=" code-block__paragraph">We can use <code value="babel-plugin-react-remove-properties" class="code-block__code">babel-plugin-react-remove-properties</code> to remove <code value="data-testid" class="code-block__code">data-testid</code> attribute in production.</p>
<pre><div class="code-block__block"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 448 512" class="code-block__copy-func" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M433.941 65.941l-51.882-51.882A48 48 0 0 0 348.118 0H176c-26.51 0-48 21.49-48 48v48H48c-26.51 0-48 21.49-48 48v320c0 26.51 21.49 48 48 48h224c26.51 0 48-21.49 48-48v-48h80c26.51 0 48-21.49 48-48V99.882a48 48 0 0 0-14.059-33.941zM266 464H54a6 6 0 0 1-6-6V150a6 6 0 0 1 6-6h74v224c0 26.51 21.49 48 48 48h96v42a6 6 0 0 1-6 6zm128-96H182a6 6 0 0 1-6-6V54a6 6 0 0 1 6-6h106v88c0 13.255 10.745 24 24 24h88v202a6 6 0 0 1-6 6zm6-256h-64V48h9.632c1.591 0 3.117.632 4.243 1.757l48.368 48.368a6 6 0 0 1 1.757 4.243V112z"></path></svg><pre style="text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;color:#c3cee3;background:#263238;font-family:Roboto Mono, monospace;font-size:1em;line-height:1.5em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;overflow:auto;position:relative;margin:0.5em 0;padding:1.25em 1em"><code class="language-json" style="text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;color:#c3cee3;background:#263238;font-family:Roboto Mono, monospace;font-size:1em;line-height:1.5em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token token" style="color:#89ddff">{</span><span>
</span><span>  </span><span class="token token" style="color:#80cbc4">&quot;plugins&quot;</span><span class="token token" style="color:#89ddff">:</span><span> </span><span class="token token" style="color:#89ddff">[</span><span>
</span><span>    </span><span class="token token" style="color:#89ddff">[</span><span>
</span><span>      </span><span class="token token" style="color:#c3e88d">&quot;babel-plugin-react-remove-properties&quot;</span><span class="token token" style="color:#89ddff">,</span><span>
</span><span>      </span><span class="token token" style="color:#89ddff">{</span><span>
</span><span>        </span><span class="token token" style="color:#80cbc4">&quot;properties&quot;</span><span class="token token" style="color:#89ddff">:</span><span> </span><span class="token token" style="color:#89ddff">[</span><span>
</span><span>          </span><span class="token token" style="color:#c3e88d">&quot;data-testid&quot;</span><span>
</span><span>        </span><span class="token token" style="color:#89ddff">]</span><span>
</span><span>      </span><span class="token token" style="color:#89ddff">}</span><span>
</span><span>    </span><span class="token token" style="color:#89ddff">]</span><span>
</span><span>  </span><span class="token token" style="color:#89ddff">]</span><span>
</span><span></span><span class="token token" style="color:#89ddff">}</span><span>
</span></code></pre></div></pre>
<h2>Note</h2>
<p class=" code-block__paragraph">When we unsure what we imagine what will render in test, we can log it to console log by
the command below</p>
<pre><div class="code-block__block"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 448 512" class="code-block__copy-func" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M433.941 65.941l-51.882-51.882A48 48 0 0 0 348.118 0H176c-26.51 0-48 21.49-48 48v48H48c-26.51 0-48 21.49-48 48v320c0 26.51 21.49 48 48 48h224c26.51 0 48-21.49 48-48v-48h80c26.51 0 48-21.49 48-48V99.882a48 48 0 0 0-14.059-33.941zM266 464H54a6 6 0 0 1-6-6V150a6 6 0 0 1 6-6h74v224c0 26.51 21.49 48 48 48h96v42a6 6 0 0 1-6 6zm128-96H182a6 6 0 0 1-6-6V54a6 6 0 0 1 6-6h106v88c0 13.255 10.745 24 24 24h88v202a6 6 0 0 1-6 6zm6-256h-64V48h9.632c1.591 0 3.117.632 4.243 1.757l48.368 48.368a6 6 0 0 1 1.757 4.243V112z"></path></svg><pre style="text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;color:#c3cee3;background:#263238;font-family:Roboto Mono, monospace;font-size:1em;line-height:1.5em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;overflow:auto;position:relative;margin:0.5em 0;padding:1.25em 1em"><code class="language-tsx" style="text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;color:#c3cee3;background:#263238;font-family:Roboto Mono, monospace;font-size:1em;line-height:1.5em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token token" style="color:#c792ea;font-style:italic">const</span><span> component </span><span class="token token" style="color:#89ddff">=</span><span> </span><span class="token token" style="color:#c792ea">render</span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#89ddff">&lt;</span><span class="token token" style="color:#f2ff00">MyComponent</span><span class="token token" style="color:#89ddff">/&gt;</span><span class="token token" style="color:#89ddff">)</span><span class="token token" style="color:#89ddff">;</span><span>
</span><span></span><span class="token token console" style="color:#f2ff00">console</span><span class="token token" style="color:#89ddff">.</span><span class="token token method property-access" style="color:#c792ea">log</span><span class="token token" style="color:#89ddff">(</span><span>component</span><span class="token token" style="color:#89ddff">.</span><span class="token token method property-access" style="color:#c792ea">debug</span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#89ddff">)</span><span class="token token" style="color:#89ddff">)</span><span class="token token" style="color:#89ddff">;</span><span>
</span></code></pre></div></pre></div></div></main></div></div><script id="__NEXT_DATA__" type="application/json" crossorigin="">{"props":{"pageProps":{"frontmatter":{"title":"React testing collection","date":"Feb 16, 2024","excerpt":"This article will collect my experience about React testing","tag":"reactjs","author":"Nghia Ngo","cover_image":"/images/posts/how-you-understand-nodejs/nodejs-cover.jpeg"},"slug":"react-testing","content":"\n# Introduction\n\nTesting is an important part of the development process. It helps us to ensure the quality of the project.\nIn this article, I will collect my experience about testing in React.\n\nIn this article, I will use [Jest](https://jestjs.io/),\n[React Testing Library](https://testing-library.com/docs/react-testing-library/intro/) and\n[msw](https://mswjs.io/) for testing.\n\n# Testing\n\n## Setup testing utilities\n\nAdd a setup for `jest-dom` from `testing-library` to adds custom mathchers for asserting on the DOM nodes, that allows\nyou to do things like `expect(element).toHaveTextContent(/react/i)`.\nRead more on [jest-dom](https://github.com/testing-library/jest-dom).\n\n```tsx\nimport '@testing-library/jest-dom';\nimport { render, screen } from '@testing-library/react';\nimport { ReactElement } from 'react';\nimport { BrowserRouter as Router } from 'react-router-dom';\n\nconst renderWithProviders = (ui: ReactElement, { route = '/' } = {}) =\u003e {\n    Object.defineProperty(window, 'matchMedia', {\n        writable: true,\n        value: jest.fn().mockImplementation((query) =\u003e ({\n            matches: false,\n            media: query,\n            onchange: null,\n            addListener: jest.fn(), // Deprecated\n            removeListener: jest.fn(), // Deprecated\n            addEventListener: jest.fn(),\n            removeEventListener: jest.fn(),\n            dispatchEvent: jest.fn(),\n        })),\n    });\n    window.history.pushState({}, 'Test page', route);\n    return render(ui, { wrapper: Router });\n};\n\nexport { renderWithProviders as render, screen };\n```\n\nNow, whenever we want to use `render` and `screen` from `@testing-library/react`, we can use our custom `render`\nand `screen` instead.\n\n## Simple test\n\nWe start with a simple test by rendering a component and check if it's rendered correctly.\n\n```tsx\nimport { render } from 'setupTests';\nimport HomeComponent from 'pages/HomeComponent';\n\ndescribe('Simple test', () =\u003e {\n    test('render correctly', () =\u003e {\n        const { getByTestId, getAllByTestId } = render(\u003cHomeComponent/\u003e);\n        expect(getByTestId('homeHeader')).toBeTruthy();\n        expect(getAllByTestId('input')).toHaveLength(4);\n    })\n})\n```\n\nAs you can see that, we use `getByTestId` and `getAllByTestId` to get the element by `data-testid` attribute.\nTherefore, in our component, we need to add `data-testid` attribute to the element that we want to test.\n\nFor example:\n\n```tsx\nconst HomeComponent = () =\u003e {\n    return (\n        \u003cdiv\u003e\n            \u003ch1 data-testid=\"homeHeader\"\u003eHome\u003c/h1\u003e\n            \u003cinput data-testid=\"input\"/\u003e\n            \u003cinput data-testid=\"input\"/\u003e\n            \u003cinput data-testid=\"input\"/\u003e\n            \u003cinput data-testid=\"input\"/\u003e\n        \u003c/div\u003e\n    )\n}\n```\n\n## Test with Provider\n\nIt is clear that some cases require a context to execute logic inside the component, for example, we have `AdminHeader`\ncomponent and `NormalHeader` component, now we have to check the user from the context to render the correct component.\n\n\u003cdiv class=\"code-block__title\"\u003eHomeComponent.tsx\u003c/div\u003e\n\n```tsx\nimport { HomeContext } from 'contexts/homeContext';\n\nconst HomeComponent = () =\u003e {\n    const { state } = useContext(HomeContext);\n    return (\n        \u003c\u003e\n            {state.isAdmin ? \u003cAdminHeader data-testid=\"adminHeader\"/\u003e : \u003cNormalHeader data-testid=\"normalHeader\"/\u003e}\n            \u003cContent\u003e\u003c/Content\u003e\n        \u003c/\u003e\n    )\n}\n```\n\nNow to test with the `HomeContext`, we will mock the value of it.\n\n\u003cdiv class=\"code-block__title\"\u003eHomeComponent.test.tsx\u003c/div\u003e\n\n```tsx\nimport { render } from 'setupTests';\nimport HomeComponent from 'pages/HomeComponent';\n\ndescribe('Test with context Provider', () =\u003e {\n    test('render admin header when isAdmin is true', () =\u003e {\n        const mockHomeValueContext = {\n            state: {\n                isAdmin: true\n            },\n            dispatch: jest.fn(),\n        };\n        const { getByTestId } = render(\n            \u003cHomeContext.Provider value={mockHomeValueContext}\u003e\n                \u003cHomeComponent/\u003e\n            \u003c/HomeContext.Provider\u003e\n        );\n        expect(getByTestId('adminHeader')).toBeTruthy();\n    })\n})\n```\n\n## Test with Event\n\nIn some cases, we want to test behavior of components after an event is triggered. For example, we click on a button\ninside a component, then it will trigger an action of the component. Now, we will check if the action is triggered\ncorrectly.\n\nWe can use `fireEvent` from `@testing-library/react` to simulate the event.\n\n```tsx\nimport { fireEvent } from '@testing-library/react';\nimport { render } from 'setupTests';\n\ndescribe('Test component after action click', () =\u003e {\n    test('menu component', () =\u003e {\n        const mockClick = jest.fn();\n        const mockItems = [\n            { id: 'id-1', label: 'label-1', icon: 'icon-1' },\n            { id: 'id-2', label: 'label-2', icon: 'icon-2' }\n        ];\n        const mockMenuProps = {\n            items: mockItems,\n            selectedItemKey: mockItems[0].id,\n            onItemClick: mockClick,\n        };\n        const { getByText } = render(\u003cMenu {...mockMenuProps} /\u003e);\n        const menuItem = getByText('label-2');\n        fireEvent.click(menuItem);\n        expect(mockClick).toHaveBeenCalledTimes(1);\n    })\n})\n```\n\n## Test with API\n\nHow about if we want to test the component that fetches data from an API? Actually, we have two ways to do it.\n\n- The first way, using mocking HTTP server(msw, nock) to mock a API server, that means we mock at the network level.\n- The second way, using jest mock data to mock calling api, that means we mock at code function level.\n\nIn conclusion, I prefer mocking with HTTP server more than using jest mock, because we don't need to handle any logics\ncompared to some complexity configurations before and after calling API.\n\n### Mocking HTTP server with msw\n\n```tsx\nimport userEvent from '@testing-library/user-event';\nimport { rest } from 'msw';\nimport { setupServer } from 'msw/node';\nimport { render, screen } from 'setupTests';\n\nconst server = setupServer(\n    rest.get('/greeting', (req, res, ctx) =\u003e {\n        return res(ctx.json({ nickName: 'Hello world' }));\n    }),\n);\n\nbeforeAll(() =\u003e server.listen());\nafterEach(() =\u003e server.resetHandlers());\nafterAll(() =\u003e server.close());\n\ndescribe('Render component correctly after data loaded', () =\u003e {\n    test('Home component render correctly', async () =\u003e {\n        render(\u003cHomeComponent/\u003e)\n\n        await userEvent.click(screen.getByText('Load Nickname'));\n        expect(screen.getByRole('span')).toHaveTextContent('Hello world')\n    })\n})\n```\n\nBy using mws, we can setup a server mock for all APIs in a file, and we can use it easily.\n\n\u003cdiv class=\"code-block__title\"\u003eresponseData.js\u003c/div\u003e\n\n```ts\nexport const greetingResponse = {\n    nickName: \"Hello World\",\n};\nexport const greetingErr = {\n    code: \"server.interupts\",\n    message: \"Sorry, the server interupts, please try later!\",\n};\n```\n\n\u003cdiv class=\"code-block__title\"\u003emockServerSetup.js\u003c/div\u003e\n\n```ts\nimport { setupServer } from \"msw/node\";\nimport { rest } from \"msw\";\nimport { greetingErr, greetingResponse } from \"./responseData\";\n\nconst ApiPaths = {\n    GREETING: \"/greeting\",\n};\n\nconst HttpStatus = {\n    SUCCESS: 200,\n    BAD_REQUEST: 400,\n};\n\nconst HttpMethod = {\n    GET: \"get\",\n    POST: \"post\",\n    PUT: \"put\",\n    DELETE: \"delete\",\n};\n\nconst paths = {};\n\nconst server = setupServer();\n\nconst getKey = (path, method, status, code) =\u003e {\n    return `${path}.${method}.${status}.${code || \"\"}`;\n};\n\nconst use = (path, method, status, code) =\u003e {\n    switch (method) {\n        case HttpMethod.GET: {\n            server.use(rest.get(path, paths[getKey(path, method, status, code)]));\n            break;\n        }\n        default:\n            console.log(\"No default\");\n    }\n};\n\nconst addToPaths = (path, method, status, response, code) =\u003e {\n    const value = (req, res, ctx) =\u003e {\n        return res(ctx.status(status), ctx.json(response));\n    };\n    paths[getKey(path, method, status, code)] = value;\n    use(path, method, status);\n};\n\nconst initDefaultPaths = () =\u003e {\n    addToPaths(\n        ApiPaths.GREETING,\n        HttpMethod.GET,\n        HttpStatus.SUCCESS,\n        greetingResponse\n    );\n    addToPaths(\n        ApiPaths.GREETING,\n        HttpMethod.GET,\n        HttpStatus.BAD_REQUEST,\n        greetingErr\n    );\n};\n\nexport {\n    ApiPaths,\n    HttpStatus,\n    HttpMethod,\n    server,\n    initDefaultPaths,\n    addToPaths,\n    use,\n};\n```\n\nNow we can easy to use it in test like example below\n\n\u003cdiv class=\"code-block__title\"\u003eMockApiComponent.js\u003c/div\u003e\n\n```tsx\n/* eslint-disable jest/expect-expect */\n/* eslint-disable jest/no-disabled-tests */\nimport React from \"react\";\nimport { MockApiComponent } from \"./MockApiComponent\";\nimport { render, screen, waitFor } from \"@testing-library/react\";\nimport { greetingResponse } from \"../mockServerSetup/responseData\";\nimport {\n    server,\n    initDefaultPaths,\n    use,\n    ApiPaths,\n    HttpMethod,\n    HttpStatus,\n} from \"../mockServerSetup\";\n\ninitDefaultPaths();\n\nbeforeAll(() =\u003e server.listen());\nafterEach(() =\u003e server.resetHandlers());\nafterAll(() =\u003e server.close());\n\n\ndescribe(\"MockAPIWithMsw\", () =\u003e {\n\n    test(\"render with api calling\", async () =\u003e {\n        use(ApiPaths.GREETING, HttpMethod.GET, HttpStatus.SUCCESS);\n        render(\u003cMockApiComponent/\u003e);\n\n        // Only one assertion within waitFor https://kentcdodds.com/blog/common-mistakes-with-react-testing-library\n        await waitFor(async () =\u003e {\n            expect(screen.getByTestId(\"nickName\")).toHaveTextContent(\n                greetingResponse.nickName\n            );\n        });\n    });\n});\n\n```\n\n### Mocking with jest mock\n\nIn this example, we mock the get method of axios to return a resolved value. This way just works when a component\ncalls an API by using axios.\n\n```tsx\nimport axios from 'axios';\n\njest.mock('axios');\nconst mockedAxios = axios as jest.Mocked\u003ctypeof axios\u003e;\n\ndescribe('Render component correctly after data loaded', () =\u003e {\n    test('Home component render correctly', async () =\u003e {\n        mockedAxios.get.mockResolveValue({ nickName: 'hello World' });\n\n        render(\u003cHomeComponent/\u003e)\n\n        await userEvent.click(screen.getByText('Load Nickname'));\n\n        expect(mockedAxios.get).toHaveBeenCalled();\n        expect(screen.getByRole('span')).toHaveTextContent('Hello world');\n    })\n})\n```\n\nSo, how we can test the component that fetches data from multiple APIs, we can use `mockImplementation` of jest to do\nit.\n\n```tsx\nimport axios from 'axios';\n\njest.mock('axios');\nconst mockedAxios = axios as jest.Mocked\u003ctypeof axios\u003e;\n\ndescribe('Render component correctly after data loaded', () =\u003e {\n    test('Home component render correctly', async () =\u003e {\n        const regexTemplate = {\n            'greeting': '/greeting/',\n            'greetingWithId': '/greeting\\/$/'\n        }\n        mockedAxios.get.mockImplementation((url) =\u003e {\n            switch (true) {\n                case regexTemplate['greeting'].test(url):\n                    return Promise.resolve({ data: { nickName: 'Hello world' } })\n                case regexTemplate['greetingWithId'].test(url):\n                    return Promise.resolve({ data: { nickName: 'Hello world with id' } })\n                default:\n                    return Promise.reject(new Error('not found'))\n            }\n        })\n\n        render(\u003cHomeComponent/\u003e)\n\n        await userEvent.click(screen.getByText('Load Nickname'));\n\n        expect(mockedAxios.get).toHaveBeenCalled();\n        expect(screen.getByRole('span')).toHaveTextContent('Hello world');\n    })\n})\n```\n\n## Test with React Router Dom\n\nNow we will combine both API and `react-router-dom`, the case is a component fetches user data, and then checking if\nthis\nuser is admin or not, if he is an admin, the user should be navigated to admin page.\n\n```tsx\nimport { MockRouteComponent } from \"./MockRouteComponent\";\nimport { render, screen, waitFor, fireEvent } from \"@testing-library/react\";\nimport axios from 'axios';\n\njest.mock('axios');\nconst mockedAxios = axios as jest.Mocked\u003ctypeof axios\u003e;\n\nconst mockNavigate = jest.fn();\nconst mockShouldNavigateToHome = jest.fn();\n\njest.mock(\"react-router-dom\", () =\u003e {\n    const actualReactRouterDom = jest.requireActual(\"react-router-dom\");\n    return {\n        ...actualReactRouterDom,\n        useNavigate: () =\u003e mockNavigate,\n        useLocation: () =\u003e {\n            return {\n                state: {\n                    shouldNavigateToHome: mockShouldNavigateToHome(),\n                },\n            };\n        },\n    };\n});\n\ndescribe(\"MockRouteComponent\", () =\u003e {\n    test(\"render correctly\", async () =\u003e {\n        mockedAxios.get.mockResolveValue({ nickName: 'hello World', isAdmin: false });\n        render(\u003cMockRouteComponent/\u003e);\n        expect(mockNavigate).toBeCalledWith(\"/\");\n    });\n\n    test(\"render with api calling and then navigate\", async () =\u003e {\n        // IMPORTANT: Must reset the mock to avoid stored state\n        mockNavigate.mockReset();\n        mockedAxios.get.mockResolveValue({ nickName: 'hello World', isAdmin: true });\n        render(\u003cMockRouteComponent/\u003e);\n\n        // Only one assertion within waitFor https://kentcdodds.com/blog/common-mistakes-with-react-testing-library\n        await waitFor(async () =\u003e {\n            expect(screen.getByTestId(\"nickName\")).toHaveTextContent('hello World');\n        });\n        await waitFor(async () =\u003e {\n            expect(mockNavigate).toBeCalledWith(\"/admin\");\n        });\n    });\n});\n```\n\n## Test with i18n\n\nHow about if we combine with the i18n, i18n needs to have configuration about translation file, but actually\nwe can mock i18n and add just few keys related to the testing component.\n\n\u003cdiv class=\"code-block__title\"\u003ei18n.test.js\u003c/div\u003e\n\n```ts\njest.mock('i18n', () =\u003e {\n    return {\n        t: (key: string) =\u003e {\n            return 'mocked i18n';\n        },\n        i18n: {\n            language: 'en',\n        },\n    };\n});\n```\n\n## Test in complex components\n\nWhen we test, we will have complex component, but we just only care about the logic of this page and ignore other child\ncomponents, we can mock the others.\n\n\u003cdiv class=\"code-block__title\"\u003eHomepage.tsx\u003c/div\u003e\n\n```tsx\nconst HomePage = () =\u003e {\n    return (\n        \u003cHomePageContainer\u003e\n            \u003cHeadSection/\u003e\n            \u003cBodySection/\u003e\n            \u003cFooterSection/\u003e\n        \u003c/HomePageContainer\u003e\n    );\n}\n```\n\n\u003cdiv class=\"code-block__title\"\u003eHomepage.test.tsx\u003c/div\u003e\n\n```tsx\njest.mock('./components', () =\u003e {\n    const HeadSection = (props) =\u003e \u003cdiv data-testid=\"mock-HeadSection\" {...props} /\u003e;\n    const BodySection = (props) =\u003e \u003cdiv data-testid=\"mock-BodySection\" {...props} /\u003e;\n    const FooterSection = (props) =\u003e \u003cdiv data-testid=\"mock-FooterSection\" {...props} /\u003e;\n    return {\n        HeadSection, BodySection, FooterSection,\n    };\n});\n\ndescribe('HomePage', () =\u003e {\n    test('render correctly', () =\u003e {\n        const { getByTestId } = render(\u003cHomePage/\u003e);\n        expect(getByTestId('mock-HeadSection')).toBeTruthy();\n        expect(getByTestId('mock-BodySection')).toBeTruthy();\n        expect(getByTestId('mock-FooterSection')).toBeTruthy();\n    })\n})\n```\n\n## Test function inside component\n\n\u003cdiv class=\"code-block__title\"\u003eHomepage.tsx\u003c/div\u003e\n\n```tsx\nconst HomePage = () =\u003e {\n    const [count, setCount] = useState(0);\n\n    const increase = () =\u003e {\n        setCount(count + 1);\n    }\n\n    return (\n        \u003cdiv\u003e\n          \u003ch1\u003eCount: {count}\u003c/h1\u003e\n          \u003cChildren increase={increase}/\u003e\n        \u003c/div\u003e\n    );\n}\n```\n\n\u003cdiv class=\"code-block__title\"\u003eHomepage.test.tsx\u003c/div\u003e\n\n```tsx\njest.mock('./components', () =\u003e {\n  const Children = (props) =\u003e \u003cdiv data-testid=\"mock-Chirem\" onClick={props.increase} {...props} /\u003e;\n  return {\n    Children\n  };\n});\n\ndescribe('HomePage', () =\u003e {\n  test('render correctly', () =\u003e {\n    const { getByTestId } = render(\u003cHomePage/\u003e);\n  })\n})\n```\n\n\n## How to remove data-testid for production\n\nWe can use `babel-plugin-react-remove-properties` to remove `data-testid` attribute in production.\n\n```json\n{\n  \"plugins\": [\n    [\n      \"babel-plugin-react-remove-properties\",\n      {\n        \"properties\": [\n          \"data-testid\"\n        ]\n      }\n    ]\n  ]\n}\n```\n\n## Note\n\nWhen we unsure what we imagine what will render in test, we can log it to console log by\nthe command below\n\n```tsx\nconst component = render(\u003cMyComponent/\u003e);\nconsole.log(component.debug());\n```"},"__N_SSG":true},"page":"/guide/[slug]","query":{"slug":"react-testing"},"buildId":"ylG0eKTBBf-wlJIinfZSJ","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>